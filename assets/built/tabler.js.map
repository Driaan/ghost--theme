{"version":3,"file":"tabler.js","sources":["tabler.js"],"sourcesContent":["/*!\n * Tabler v1.0.0-alpha.22 (https://tabler.io)\n * @version 1.0.0-alpha.22\n * @link https://tabler.io\n * Copyright 2018-2021 The Tabler Authors\n * Copyright 2018-2021 codecalm.net PaweÅ‚ Kuna\n * Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)\n */ \n(function(factory) {\n    typeof define === 'function' && define.amd ? define(factory) :\n        factory();\n}((function() {\n    'use strict';\n\n    var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n    function createCommonjsModule(fn) {\n        var module = { exports: {} };\n        return fn(module, module.exports), module.exports;\n    }\n\n    /*!\n    \tautosize 4.0.2\n    \tlicense: MIT\n    \thttp://www.jacklmoore.com/autosize\n    */\n    var autosize = createCommonjsModule(function(module, exports) {\n        (function(global, factory) {\n            {\n                factory(module, exports);\n            }\n        })(commonjsGlobal, function(module, exports) {\n            var map = typeof Map === \"function\" ? new Map() : function() {\n                var keys = [];\n                var values = [];\n                return {\n                    has: function has(key) {\n                        return keys.indexOf(key) > -1;\n                    },\n                    get: function get(key) {\n                        return values[keys.indexOf(key)];\n                    },\n                    set: function set(key, value) {\n                        if (keys.indexOf(key) === -1) {\n                            keys.push(key);\n                            values.push(value);\n                        }\n                    },\n                    delete: function _delete(key) {\n                        var index = keys.indexOf(key);\n                        if (index > -1) {\n                            keys.splice(index, 1);\n                            values.splice(index, 1);\n                        }\n                    }\n                };\n            }();\n            var createEvent = function createEvent(name) {\n                return new Event(name, { bubbles: true });\n            };\n            try {\n                new Event('test');\n            } catch (e) {\n                createEvent = function createEvent(name) {\n                    var evt = document.createEvent('Event');\n                    evt.initEvent(name, true, false);\n                    return evt;\n                };\n            }\n\n            function assign(ta) {\n                if (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n                var heightOffset = null;\n                var clientWidth = null;\n                var cachedHeight = null;\n\n                function init() {\n                    var style = window.getComputedStyle(ta, null);\n                    if (style.resize === 'vertical') {\n                        ta.style.resize = 'none';\n                    } else if (style.resize === 'both') {\n                        ta.style.resize = 'horizontal';\n                    }\n                    if (style.boxSizing === 'content-box') {\n                        heightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n                    } else {\n                        heightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n                    }\n                    if (isNaN(heightOffset)) {\n                        heightOffset = 0;\n                    }\n                    update();\n                }\n\n                function changeOverflow(value) {\n                    {\n                        var width = ta.style.width;\n                        ta.style.width = '0px';\n                        ta.offsetWidth;\n                        ta.style.width = width;\n                    }\n                    ta.style.overflowY = value;\n                }\n\n                function getParentOverflows(el) {\n                    var arr = [];\n                    while (el && el.parentNode && el.parentNode instanceof Element) {\n                        if (el.parentNode.scrollTop) {\n                            arr.push({\n                                node: el.parentNode,\n                                scrollTop: el.parentNode.scrollTop\n                            });\n                        }\n                        el = el.parentNode;\n                    }\n                    return arr;\n                }\n\n                function resize() {\n                    if (ta.scrollHeight === 0) {\n                        return;\n                    }\n                    var overflows = getParentOverflows(ta);\n                    var docTop = document.documentElement && document.documentElement.scrollTop;\n                    ta.style.height = '';\n                    ta.style.height = ta.scrollHeight + heightOffset + 'px';\n                    clientWidth = ta.clientWidth;\n                    overflows.forEach(function(el) {\n                        el.node.scrollTop = el.scrollTop;\n                    });\n                    if (docTop) {\n                        document.documentElement.scrollTop = docTop;\n                    }\n                }\n\n                function update() {\n                    resize();\n                    var styleHeight = Math.round(parseFloat(ta.style.height));\n                    var computed = window.getComputedStyle(ta, null);\n                    var actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n                    if (actualHeight < styleHeight) {\n                        if (computed.overflowY === 'hidden') {\n                            changeOverflow('scroll');\n                            resize();\n                            actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n                        }\n                    } else {\n                        if (computed.overflowY !== 'hidden') {\n                            changeOverflow('hidden');\n                            resize();\n                            actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n                        }\n                    }\n                    if (cachedHeight !== actualHeight) {\n                        cachedHeight = actualHeight;\n                        var evt = createEvent('autosize:resized');\n                        try {\n                            ta.dispatchEvent(evt);\n                        } catch (err) {}\n                    }\n                }\n                var pageResize = function pageResize() {\n                    if (ta.clientWidth !== clientWidth) {\n                        update();\n                    }\n                };\n                var destroy = function(style) {\n                    window.removeEventListener('resize', pageResize, false);\n                    ta.removeEventListener('input', update, false);\n                    ta.removeEventListener('keyup', update, false);\n                    ta.removeEventListener('autosize:destroy', destroy, false);\n                    ta.removeEventListener('autosize:update', update, false);\n                    Object.keys(style).forEach(function(key) {\n                        ta.style[key] = style[key];\n                    });\n                    map.delete(ta);\n                }.bind(ta, {\n                    height: ta.style.height,\n                    resize: ta.style.resize,\n                    overflowY: ta.style.overflowY,\n                    overflowX: ta.style.overflowX,\n                    wordWrap: ta.style.wordWrap\n                });\n                ta.addEventListener('autosize:destroy', destroy, false);\n                if ('onpropertychange' in ta && 'oninput' in ta) {\n                    ta.addEventListener('keyup', update, false);\n                }\n                window.addEventListener('resize', pageResize, false);\n                ta.addEventListener('input', update, false);\n                ta.addEventListener('autosize:update', update, false);\n                ta.style.overflowX = 'hidden';\n                ta.style.wordWrap = 'break-word';\n                map.set(ta, {\n                    destroy: destroy,\n                    update: update\n                });\n                init();\n            }\n\n            function destroy(ta) {\n                var methods = map.get(ta);\n                if (methods) {\n                    methods.destroy();\n                }\n            }\n\n            function update(ta) {\n                var methods = map.get(ta);\n                if (methods) {\n                    methods.update();\n                }\n            }\n            var autosize = null;\n            if (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n                autosize = function autosize(el) {\n                    return el;\n                };\n                autosize.destroy = function(el) {\n                    return el;\n                };\n                autosize.update = function(el) {\n                    return el;\n                };\n            } else {\n                autosize = function autosize(el, options) {\n                    if (el) {\n                        Array.prototype.forEach.call(el.length ? el : [el], function(x) {\n                            return assign(x);\n                        });\n                    }\n                    return el;\n                };\n                autosize.destroy = function(el) {\n                    if (el) {\n                        Array.prototype.forEach.call(el.length ? el : [el], destroy);\n                    }\n                    return el;\n                };\n                autosize.update = function(el) {\n                    if (el) {\n                        Array.prototype.forEach.call(el.length ? el : [el], update);\n                    }\n                    return el;\n                };\n            }\n            exports.default = autosize;\n            module.exports = exports['default'];\n        });\n    });\n\n    var elements = document.querySelectorAll('[data-bs-toggle=\"autosize\"]');\n    if (elements.length) {\n        elements.forEach(function(element) {\n            autosize(element);\n        });\n    }\n\n    function _typeof(obj) {\n        \"@babel/helpers - typeof\";\n        if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n            _typeof = function(obj) {\n                return typeof obj;\n            };\n        } else {\n            _typeof = function(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            };\n        }\n        return _typeof(obj);\n    }\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }\n\n    function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n    }\n\n    function _defineProperty(obj, key, value) {\n        if (key in obj) {\n            Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true\n            });\n        } else {\n            obj[key] = value;\n        }\n        return obj;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== \"function\" && superClass !== null) {\n            throw new TypeError(\"Super expression must either be null or a function\");\n        }\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass) _setPrototypeOf(subClass, superClass);\n    }\n\n    function _getPrototypeOf(o) {\n        _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n            return o.__proto__ || Object.getPrototypeOf(o);\n        };\n        return _getPrototypeOf(o);\n    }\n\n    function _setPrototypeOf(o, p) {\n        _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n            o.__proto__ = p;\n            return o;\n        };\n        return _setPrototypeOf(o, p);\n    }\n\n    function _objectWithoutPropertiesLoose(source, excluded) {\n        if (source == null) return {};\n        var target = {};\n        var sourceKeys = Object.keys(source);\n        var key, i;\n        for (i = 0; i < sourceKeys.length; i++) {\n            key = sourceKeys[i];\n            if (excluded.indexOf(key) >= 0) continue;\n            target[key] = source[key];\n        }\n        return target;\n    }\n\n    function _objectWithoutProperties(source, excluded) {\n        if (source == null) return {};\n        var target = _objectWithoutPropertiesLoose(source, excluded);\n        var key, i;\n        if (Object.getOwnPropertySymbols) {\n            var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n            for (i = 0; i < sourceSymbolKeys.length; i++) {\n                key = sourceSymbolKeys[i];\n                if (excluded.indexOf(key) >= 0) continue;\n                if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n                target[key] = source[key];\n            }\n        }\n        return target;\n    }\n\n    function _assertThisInitialized(self) {\n        if (self === void 0) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n        return self;\n    }\n\n    function _possibleConstructorReturn(self, call) {\n        if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n            return call;\n        }\n        return _assertThisInitialized(self);\n    }\n\n    function _superPropBase(object, property) {\n        while (!Object.prototype.hasOwnProperty.call(object, property)) {\n            object = _getPrototypeOf(object);\n            if (object === null) break;\n        }\n        return object;\n    }\n\n    function _get(target, property, receiver) {\n        if (typeof Reflect !== \"undefined\" && Reflect.get) {\n            _get = Reflect.get;\n        } else {\n            _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n                if (desc.get) {\n                    return desc.get.call(receiver);\n                }\n                return desc.value;\n            };\n        }\n        return _get(target, property, receiver || target);\n    }\n\n    function set(target, property, value, receiver) {\n        if (typeof Reflect !== \"undefined\" && Reflect.set) {\n            set = Reflect.set;\n        } else {\n            set = function set(target, property, value, receiver) {\n                var base = _superPropBase(target, property);\n                var desc;\n                if (base) {\n                    desc = Object.getOwnPropertyDescriptor(base, property);\n                    if (desc.set) {\n                        desc.set.call(receiver, value);\n                        return true;\n                    } else if (!desc.writable) {\n                        return false;\n                    }\n                }\n                desc = Object.getOwnPropertyDescriptor(receiver, property);\n                if (desc) {\n                    if (!desc.writable) {\n                        return false;\n                    }\n                    desc.value = value;\n                    Object.defineProperty(receiver, property, desc);\n                } else {\n                    _defineProperty(receiver, property, value);\n                }\n                return true;\n            };\n        }\n        return set(target, property, value, receiver);\n    }\n\n    function _set(target, property, value, receiver, isStrict) {\n        var s = set(target, property, value, receiver || target);\n        if (!s && isStrict) {\n            throw new Error('failed to set property');\n        }\n        return value;\n    }\n\n    function _slicedToArray(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n    }\n\n    function _arrayWithHoles(arr) {\n        if (Array.isArray(arr)) return arr;\n    }\n\n    function _iterableToArrayLimit(arr, i) {\n        if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n            return;\n        }\n        var _arr = [];\n        var _n = true;\n        var _d = false;\n        var _e = undefined;\n        try {\n            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n                _arr.push(_s.value);\n                if (i && _arr.length === i) break;\n            }\n        } catch (err) {\n            _d = true;\n            _e = err;\n        } finally {\n            try {\n                if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n            } finally {\n                if (_d) throw _e;\n            }\n        }\n        return _arr;\n    }\n\n    function _nonIterableRest() {\n        throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n\n    function isString(str) {\n        return typeof str === 'string' || str instanceof String;\n    }\n    var DIRECTION = {\n        NONE: 'NONE',\n        LEFT: 'LEFT',\n        FORCE_LEFT: 'FORCE_LEFT',\n        RIGHT: 'RIGHT',\n        FORCE_RIGHT: 'FORCE_RIGHT'\n    };\n\n    function forceDirection(direction) {\n        switch (direction) {\n            case DIRECTION.LEFT:\n                return DIRECTION.FORCE_LEFT;\n            case DIRECTION.RIGHT:\n                return DIRECTION.FORCE_RIGHT;\n            default:\n                return direction;\n        }\n    }\n\n    function escapeRegExp(str) {\n        return str.replace(/([.*+?^=!:${}()|[\\]/\\\\])/g, '\\\\$1');\n    }\n\n    function objectIncludes(b, a) {\n        if (a === b) return true;\n        var arrA = Array.isArray(a),\n            arrB = Array.isArray(b),\n            i;\n        if (arrA && arrB) {\n            if (a.length != b.length) return false;\n            for (i = 0; i < a.length; i++) {\n                if (!objectIncludes(a[i], b[i])) return false;\n            }\n            return true;\n        }\n        if (arrA != arrB) return false;\n        if (a && b && _typeof(a) === 'object' && _typeof(b) === 'object') {\n            var dateA = a instanceof Date,\n                dateB = b instanceof Date;\n            if (dateA && dateB) return a.getTime() == b.getTime();\n            if (dateA != dateB) return false;\n            var regexpA = a instanceof RegExp,\n                regexpB = b instanceof RegExp;\n            if (regexpA && regexpB) return a.toString() == b.toString();\n            if (regexpA != regexpB) return false;\n            var keys = Object.keys(a);\n            for (i = 0; i < keys.length; i++) {\n                if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n            }\n            for (i = 0; i < keys.length; i++) {\n                if (!objectIncludes(b[keys[i]], a[keys[i]])) return false;\n            }\n            return true;\n        } else if (a && b && typeof a === 'function' && typeof b === 'function') {\n            return a.toString() === b.toString();\n        }\n        return false;\n    }\n\n    var ActionDetails =\n        function() {\n            function ActionDetails(value, cursorPos, oldValue, oldSelection) {\n                _classCallCheck(this, ActionDetails);\n                this.value = value;\n                this.cursorPos = cursorPos;\n                this.oldValue = oldValue;\n                this.oldSelection = oldSelection;\n                while (this.value.slice(0, this.startChangePos) !== this.oldValue.slice(0, this.startChangePos)) {\n                    --this.oldSelection.start;\n                }\n            }\n            _createClass(ActionDetails, [{\n                key: \"startChangePos\",\n                get: function get() {\n                    return Math.min(this.cursorPos, this.oldSelection.start);\n                }\n            }, {\n                key: \"insertedCount\",\n                get: function get() {\n                    return this.cursorPos - this.startChangePos;\n                }\n            }, {\n                key: \"inserted\",\n                get: function get() {\n                    return this.value.substr(this.startChangePos, this.insertedCount);\n                }\n            }, {\n                key: \"removedCount\",\n                get: function get() {\n                    return Math.max(this.oldSelection.end - this.startChangePos ||\n                        this.oldValue.length - this.value.length, 0);\n                }\n            }, {\n                key: \"removed\",\n                get: function get() {\n                    return this.oldValue.substr(this.startChangePos, this.removedCount);\n                }\n            }, {\n                key: \"head\",\n                get: function get() {\n                    return this.value.substring(0, this.startChangePos);\n                }\n            }, {\n                key: \"tail\",\n                get: function get() {\n                    return this.value.substring(this.startChangePos + this.insertedCount);\n                }\n            }, {\n                key: \"removeDirection\",\n                get: function get() {\n                    if (!this.removedCount || this.insertedCount) return DIRECTION.NONE;\n                    return this.oldSelection.end === this.cursorPos || this.oldSelection.start === this.cursorPos ? DIRECTION.RIGHT : DIRECTION.LEFT;\n                }\n            }]);\n            return ActionDetails;\n        }();\n\n    var ChangeDetails =\n        function() {\n            function ChangeDetails(details) {\n                _classCallCheck(this, ChangeDetails);\n                Object.assign(this, {\n                    inserted: '',\n                    rawInserted: '',\n                    skip: false,\n                    tailShift: 0\n                }, details);\n            }\n            _createClass(ChangeDetails, [{\n                key: \"aggregate\",\n                value: function aggregate(details) {\n                    this.rawInserted += details.rawInserted;\n                    this.skip = this.skip || details.skip;\n                    this.inserted += details.inserted;\n                    this.tailShift += details.tailShift;\n                    return this;\n                }\n            }, {\n                key: \"offset\",\n                get: function get() {\n                    return this.tailShift + this.inserted.length;\n                }\n            }]);\n            return ChangeDetails;\n        }();\n\n    var ContinuousTailDetails =\n        function() {\n            function ContinuousTailDetails() {\n                var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n                var from = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n                var stop = arguments.length > 2 ? arguments[2] : undefined;\n                _classCallCheck(this, ContinuousTailDetails);\n                this.value = value;\n                this.from = from;\n                this.stop = stop;\n            }\n            _createClass(ContinuousTailDetails, [{\n                key: \"toString\",\n                value: function toString() {\n                    return this.value;\n                }\n            }, {\n                key: \"extend\",\n                value: function extend(tail) {\n                    this.value += String(tail);\n                }\n            }, {\n                key: \"appendTo\",\n                value: function appendTo(masked) {\n                    return masked.append(this.toString(), {\n                        tail: true\n                    }).aggregate(masked._appendPlaceholder());\n                }\n            }, {\n                key: \"shiftBefore\",\n                value: function shiftBefore(pos) {\n                    if (this.from >= pos || !this.value.length) return '';\n                    var shiftChar = this.value[0];\n                    this.value = this.value.slice(1);\n                    return shiftChar;\n                }\n            }, {\n                key: \"state\",\n                get: function get() {\n                    return {\n                        value: this.value,\n                        from: this.from,\n                        stop: this.stop\n                    };\n                },\n                set: function set(state) {\n                    Object.assign(this, state);\n                }\n            }]);\n            return ContinuousTailDetails;\n        }();\n\n    function IMask(el) {\n        var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new IMask.InputMask(el, opts);\n    }\n\n    var Masked =\n        function() {\n            function Masked(opts) {\n                _classCallCheck(this, Masked);\n                this._value = '';\n                this._update(Object.assign({}, Masked.DEFAULTS, {}, opts));\n                this.isInitialized = true;\n            }\n            _createClass(Masked, [{\n                key: \"updateOptions\",\n                value: function updateOptions(opts) {\n                    if (!Object.keys(opts).length) return;\n                    this.withValueRefresh(this._update.bind(this, opts));\n                }\n            }, {\n                key: \"_update\",\n                value: function _update(opts) {\n                    Object.assign(this, opts);\n                }\n            }, {\n                key: \"reset\",\n                value: function reset() {\n                    this._value = '';\n                }\n            }, {\n                key: \"resolve\",\n                value: function resolve(value) {\n                    this.reset();\n                    this.append(value, {\n                        input: true\n                    }, '');\n                    this.doCommit();\n                    return this.value;\n                }\n            }, {\n                key: \"nearestInputPos\",\n                value: function nearestInputPos(cursorPos, direction) {\n                    return cursorPos;\n                }\n            }, {\n                key: \"extractInput\",\n                value: function extractInput() {\n                    var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n                    return this.value.slice(fromPos, toPos);\n                }\n            }, {\n                key: \"extractTail\",\n                value: function extractTail() {\n                    var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n                    return new ContinuousTailDetails(this.extractInput(fromPos, toPos), fromPos);\n                }\n            }, {\n                key: \"appendTail\",\n                value: function appendTail(tail) {\n                    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n                    return tail.appendTo(this);\n                }\n            }, {\n                key: \"_appendCharRaw\",\n                value: function _appendCharRaw(ch) {\n                    var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                    ch = this.doPrepare(ch, flags);\n                    if (!ch) return new ChangeDetails();\n                    this._value += ch;\n                    return new ChangeDetails({\n                        inserted: ch,\n                        rawInserted: ch\n                    });\n                }\n            }, {\n                key: \"_appendChar\",\n                value: function _appendChar(ch) {\n                    var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                    var checkTail = arguments.length > 2 ? arguments[2] : undefined;\n                    var consistentState = this.state;\n                    var details = this._appendCharRaw(ch, flags);\n                    if (details.inserted) {\n                        var consistentTail;\n                        var appended = this.doValidate(flags) !== false;\n                        if (appended && checkTail != null) {\n                            var beforeTailState = this.state;\n                            if (this.overwrite) {\n                                consistentTail = checkTail.state;\n                                checkTail.shiftBefore(this.value.length);\n                            }\n                            var tailDetails = this.appendTail(checkTail);\n                            appended = tailDetails.rawInserted === checkTail.toString();\n                            if (appended && tailDetails.inserted) this.state = beforeTailState;\n                        }\n                        if (!appended) {\n                            details = new ChangeDetails();\n                            this.state = consistentState;\n                            if (checkTail && consistentTail) checkTail.state = consistentTail;\n                        }\n                    }\n                    return details;\n                }\n            }, {\n                key: \"_appendPlaceholder\",\n                value: function _appendPlaceholder() {\n                    return new ChangeDetails();\n                }\n            }, {\n                key: \"append\",\n                value: function append(str, flags, tail) {\n                    if (!isString(str)) throw new Error('value should be string');\n                    var details = new ChangeDetails();\n                    var checkTail = isString(tail) ? new ContinuousTailDetails(String(tail)) : tail;\n                    if (flags.tail) flags._beforeTailState = this.state;\n                    for (var ci = 0; ci < str.length; ++ci) {\n                        details.aggregate(this._appendChar(str[ci], flags, checkTail));\n                    }\n                    if (checkTail != null) {\n                        details.tailShift += this.appendTail(checkTail).tailShift;\n                    }\n                    return details;\n                }\n            }, {\n                key: \"remove\",\n                value: function remove() {\n                    var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n                    this._value = this.value.slice(0, fromPos) + this.value.slice(toPos);\n                    return new ChangeDetails();\n                }\n            }, {\n                key: \"withValueRefresh\",\n                value: function withValueRefresh(fn) {\n                    if (this._refreshing || !this.isInitialized) return fn();\n                    this._refreshing = true;\n                    var rawInput = this.rawInputValue;\n                    var value = this.value;\n                    var ret = fn();\n                    this.rawInputValue = rawInput;\n                    if (this.value !== value && value.indexOf(this.value) === 0) {\n                        this.append(value.slice(this.value.length), {}, '');\n                    }\n                    delete this._refreshing;\n                    return ret;\n                }\n            }, {\n                key: \"runIsolated\",\n                value: function runIsolated(fn) {\n                    if (this._isolated || !this.isInitialized) return fn(this);\n                    this._isolated = true;\n                    var state = this.state;\n                    var ret = fn(this);\n                    this.state = state;\n                    delete this._isolated;\n                    return ret;\n                }\n            }, {\n                key: \"doPrepare\",\n                value: function doPrepare(str) {\n                    var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                    return this.prepare ? this.prepare(str, this, flags) : str;\n                }\n            }, {\n                key: \"doValidate\",\n                value: function doValidate(flags) {\n                    return (!this.validate || this.validate(this.value, this, flags)) && (!this.parent || this.parent.doValidate(flags));\n                }\n            }, {\n                key: \"doCommit\",\n                value: function doCommit() {\n                    if (this.commit) this.commit(this.value, this);\n                }\n            }, {\n                key: \"doFormat\",\n                value: function doFormat(value) {\n                    return this.format ? this.format(value, this) : value;\n                }\n            }, {\n                key: \"doParse\",\n                value: function doParse(str) {\n                    return this.parse ? this.parse(str, this) : str;\n                }\n            }, {\n                key: \"splice\",\n                value: function splice(start, deleteCount, inserted, removeDirection) {\n                    var tailPos = start + deleteCount;\n                    var tail = this.extractTail(tailPos);\n                    var startChangePos = this.nearestInputPos(start, removeDirection);\n                    var changeDetails = new ChangeDetails({\n                        tailShift: startChangePos - start\n                    }).aggregate(this.remove(startChangePos)).aggregate(this.append(inserted, {\n                        input: true\n                    }, tail));\n                    return changeDetails;\n                }\n            }, {\n                key: \"state\",\n                get: function get() {\n                    return {\n                        _value: this.value\n                    };\n                },\n                set: function set(state) {\n                    this._value = state._value;\n                }\n            }, {\n                key: \"value\",\n                get: function get() {\n                    return this._value;\n                },\n                set: function set(value) {\n                    this.resolve(value);\n                }\n            }, {\n                key: \"unmaskedValue\",\n                get: function get() {\n                    return this.value;\n                },\n                set: function set(value) {\n                    this.reset();\n                    this.append(value, {}, '');\n                    this.doCommit();\n                }\n            }, {\n                key: \"typedValue\",\n                get: function get() {\n                    return this.doParse(this.value);\n                },\n                set: function set(value) {\n                    this.value = this.doFormat(value);\n                }\n            }, {\n                key: \"rawInputValue\",\n                get: function get() {\n                    return this.extractInput(0, this.value.length, {\n                        raw: true\n                    });\n                },\n                set: function set(value) {\n                    this.reset();\n                    this.append(value, {\n                        raw: true\n                    }, '');\n                    this.doCommit();\n                }\n            }, {\n                key: \"isComplete\",\n                get: function get() {\n                    return true;\n                }\n            }]);\n            return Masked;\n        }();\n    Masked.DEFAULTS = {\n        format: function format(v) {\n            return v;\n        },\n        parse: function parse(v) {\n            return v;\n        }\n    };\n    IMask.Masked = Masked;\n\n    function maskedClass(mask) {\n        if (mask == null) {\n            throw new Error('mask property should be defined');\n        }\n        if (mask instanceof RegExp) return IMask.MaskedRegExp;\n        if (isString(mask)) return IMask.MaskedPattern;\n        if (mask instanceof Date || mask === Date) return IMask.MaskedDate;\n        if (mask instanceof Number || typeof mask === 'number' || mask === Number) return IMask.MaskedNumber;\n        if (Array.isArray(mask) || mask === Array) return IMask.MaskedDynamic;\n        if (IMask.Masked && mask.prototype instanceof IMask.Masked) return mask;\n        if (mask instanceof Function) return IMask.MaskedFunction;\n        if (mask instanceof IMask.Masked) return mask.constructor;\n        console.warn('Mask not found for mask', mask);\n        return IMask.Masked;\n    }\n\n    function createMask(opts) {\n        if (IMask.Masked && opts instanceof IMask.Masked) return opts;\n        opts = Object.assign({}, opts);\n        var mask = opts.mask;\n        if (IMask.Masked && mask instanceof IMask.Masked) return mask;\n        var MaskedClass = maskedClass(mask);\n        if (!MaskedClass) throw new Error('Masked class is not found for provided mask, appropriate module needs to be import manually before creating mask.');\n        return new MaskedClass(opts);\n    }\n    IMask.createMask = createMask;\n\n    var DEFAULT_INPUT_DEFINITIONS = {\n        '0': /\\d/,\n        'a': /[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\n        '*': /./\n    };\n    var PatternInputDefinition =\n        function() {\n            function PatternInputDefinition(opts) {\n                _classCallCheck(this, PatternInputDefinition);\n                var mask = opts.mask,\n                    blockOpts = _objectWithoutProperties(opts, [\"mask\"]);\n                this.masked = createMask({\n                    mask: mask\n                });\n                Object.assign(this, blockOpts);\n            }\n            _createClass(PatternInputDefinition, [{\n                key: \"reset\",\n                value: function reset() {\n                    this._isFilled = false;\n                    this.masked.reset();\n                }\n            }, {\n                key: \"remove\",\n                value: function remove() {\n                    var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n                    if (fromPos === 0 && toPos >= 1) {\n                        this._isFilled = false;\n                        return this.masked.remove(fromPos, toPos);\n                    }\n                    return new ChangeDetails();\n                }\n            }, {\n                key: \"_appendChar\",\n                value: function _appendChar(str) {\n                    var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                    if (this._isFilled) return new ChangeDetails();\n                    var state = this.masked.state;\n                    var details = this.masked._appendChar(str, flags);\n                    if (details.inserted && this.doValidate(flags) === false) {\n                        details.inserted = details.rawInserted = '';\n                        this.masked.state = state;\n                    }\n                    if (!details.inserted && !this.isOptional && !this.lazy && !flags.input) {\n                        details.inserted = this.placeholderChar;\n                    }\n                    details.skip = !details.inserted && !this.isOptional;\n                    this._isFilled = Boolean(details.inserted);\n                    return details;\n                }\n            }, {\n                key: \"append\",\n                value: function append() {\n                    var _this$masked;\n                    return (_this$masked = this.masked).append.apply(_this$masked, arguments);\n                }\n            }, {\n                key: \"_appendPlaceholder\",\n                value: function _appendPlaceholder() {\n                    var details = new ChangeDetails();\n                    if (this._isFilled || this.isOptional) return details;\n                    this._isFilled = true;\n                    details.inserted = this.placeholderChar;\n                    return details;\n                }\n            }, {\n                key: \"extractTail\",\n                value: function extractTail() {\n                    var _this$masked2;\n                    return (_this$masked2 = this.masked).extractTail.apply(_this$masked2, arguments);\n                }\n            }, {\n                key: \"appendTail\",\n                value: function appendTail() {\n                    var _this$masked3;\n                    return (_this$masked3 = this.masked).appendTail.apply(_this$masked3, arguments);\n                }\n            }, {\n                key: \"extractInput\",\n                value: function extractInput() {\n                    var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n                    var flags = arguments.length > 2 ? arguments[2] : undefined;\n                    return this.masked.extractInput(fromPos, toPos, flags);\n                }\n            }, {\n                key: \"nearestInputPos\",\n                value: function nearestInputPos(cursorPos) {\n                    var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;\n                    var minPos = 0;\n                    var maxPos = this.value.length;\n                    var boundPos = Math.min(Math.max(cursorPos, minPos), maxPos);\n                    switch (direction) {\n                        case DIRECTION.LEFT:\n                        case DIRECTION.FORCE_LEFT:\n                            return this.isComplete ? boundPos : minPos;\n                        case DIRECTION.RIGHT:\n                        case DIRECTION.FORCE_RIGHT:\n                            return this.isComplete ? boundPos : maxPos;\n                        case DIRECTION.NONE:\n                        default:\n                            return boundPos;\n                    }\n                }\n            }, {\n                key: \"doValidate\",\n                value: function doValidate() {\n                    var _this$masked4, _this$parent;\n                    return (_this$masked4 = this.masked).doValidate.apply(_this$masked4, arguments) && (!this.parent || (_this$parent = this.parent).doValidate.apply(_this$parent, arguments));\n                }\n            }, {\n                key: \"doCommit\",\n                value: function doCommit() {\n                    this.masked.doCommit();\n                }\n            }, {\n                key: \"value\",\n                get: function get() {\n                    return this.masked.value || (this._isFilled && !this.isOptional ? this.placeholderChar : '');\n                }\n            }, {\n                key: \"unmaskedValue\",\n                get: function get() {\n                    return this.masked.unmaskedValue;\n                }\n            }, {\n                key: \"isComplete\",\n                get: function get() {\n                    return Boolean(this.masked.value) || this.isOptional;\n                }\n            }, {\n                key: \"state\",\n                get: function get() {\n                    return {\n                        masked: this.masked.state,\n                        _isFilled: this._isFilled\n                    };\n                },\n                set: function set(state) {\n                    this.masked.state = state.masked;\n                    this._isFilled = state._isFilled;\n                }\n            }]);\n            return PatternInputDefinition;\n        }();\n\n    var PatternFixedDefinition =\n        function() {\n            function PatternFixedDefinition(opts) {\n                _classCallCheck(this, PatternFixedDefinition);\n                Object.assign(this, opts);\n                this._value = '';\n            }\n            _createClass(PatternFixedDefinition, [{\n                key: \"reset\",\n                value: function reset() {\n                    this._isRawInput = false;\n                    this._value = '';\n                }\n            }, {\n                key: \"remove\",\n                value: function remove() {\n                    var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._value.length;\n                    this._value = this._value.slice(0, fromPos) + this._value.slice(toPos);\n                    if (!this._value) this._isRawInput = false;\n                    return new ChangeDetails();\n                }\n            }, {\n                key: \"nearestInputPos\",\n                value: function nearestInputPos(cursorPos) {\n                    var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;\n                    var minPos = 0;\n                    var maxPos = this._value.length;\n                    switch (direction) {\n                        case DIRECTION.LEFT:\n                        case DIRECTION.FORCE_LEFT:\n                            return minPos;\n                        case DIRECTION.NONE:\n                        case DIRECTION.RIGHT:\n                        case DIRECTION.FORCE_RIGHT:\n                        default:\n                            return maxPos;\n                    }\n                }\n            }, {\n                key: \"extractInput\",\n                value: function extractInput() {\n                    var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._value.length;\n                    var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n                    return flags.raw && this._isRawInput && this._value.slice(fromPos, toPos) || '';\n                }\n            }, {\n                key: \"_appendChar\",\n                value: function _appendChar(str) {\n                    var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                    var details = new ChangeDetails();\n                    if (this._value) return details;\n                    var appended = this.char === str[0];\n                    var isResolved = appended && (this.isUnmasking || flags.input || flags.raw) && !flags.tail;\n                    if (isResolved) details.rawInserted = this.char;\n                    this._value = details.inserted = this.char;\n                    this._isRawInput = isResolved && (flags.raw || flags.input);\n                    return details;\n                }\n            }, {\n                key: \"_appendPlaceholder\",\n                value: function _appendPlaceholder() {\n                    var details = new ChangeDetails();\n                    if (this._value) return details;\n                    this._value = details.inserted = this.char;\n                    return details;\n                }\n            }, {\n                key: \"extractTail\",\n                value: function extractTail() {\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n                    return new ContinuousTailDetails('');\n                }\n            }, {\n                key: \"appendTail\",\n                value: function appendTail(tail) {\n                    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n                    return tail.appendTo(this);\n                }\n            }, {\n                key: \"append\",\n                value: function append(str, flags, tail) {\n                    var details = this._appendChar(str, flags);\n                    if (tail != null) {\n                        details.tailShift += this.appendTail(tail).tailShift;\n                    }\n                    return details;\n                }\n            }, {\n                key: \"doCommit\",\n                value: function doCommit() {}\n            }, {\n                key: \"value\",\n                get: function get() {\n                    return this._value;\n                }\n            }, {\n                key: \"unmaskedValue\",\n                get: function get() {\n                    return this.isUnmasking ? this.value : '';\n                }\n            }, {\n                key: \"isComplete\",\n                get: function get() {\n                    return true;\n                }\n            }, {\n                key: \"state\",\n                get: function get() {\n                    return {\n                        _value: this._value,\n                        _isRawInput: this._isRawInput\n                    };\n                },\n                set: function set(state) {\n                    Object.assign(this, state);\n                }\n            }]);\n            return PatternFixedDefinition;\n        }();\n\n    var ChunksTailDetails =\n        function() {\n            function ChunksTailDetails() {\n                var chunks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n                var from = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n                _classCallCheck(this, ChunksTailDetails);\n                this.chunks = chunks;\n                this.from = from;\n            }\n            _createClass(ChunksTailDetails, [{\n                key: \"toString\",\n                value: function toString() {\n                    return this.chunks.map(String).join('');\n                }\n            }, {\n                key: \"extend\",\n                value: function extend(tailChunk) {\n                    if (!String(tailChunk)) return;\n                    if (isString(tailChunk)) tailChunk = new ContinuousTailDetails(String(tailChunk));\n                    var lastChunk = this.chunks[this.chunks.length - 1];\n                    var extendLast = lastChunk && (\n                            lastChunk.stop === tailChunk.stop || tailChunk.stop == null) &&\n                        tailChunk.from === lastChunk.from + lastChunk.toString().length;\n                    if (tailChunk instanceof ContinuousTailDetails) {\n                        if (extendLast) {\n                            lastChunk.extend(tailChunk.toString());\n                        } else {\n                            this.chunks.push(tailChunk);\n                        }\n                    } else if (tailChunk instanceof ChunksTailDetails) {\n                        if (tailChunk.stop == null) {\n                            var firstTailChunk;\n                            while (tailChunk.chunks.length && tailChunk.chunks[0].stop == null) {\n                                firstTailChunk = tailChunk.chunks.shift();\n                                firstTailChunk.from += tailChunk.from;\n                                this.extend(firstTailChunk);\n                            }\n                        }\n                        if (tailChunk.toString()) {\n                            tailChunk.stop = tailChunk.blockIndex;\n                            this.chunks.push(tailChunk);\n                        }\n                    }\n                }\n            }, {\n                key: \"appendTo\",\n                value: function appendTo(masked) {\n                    if (!(masked instanceof IMask.MaskedPattern)) {\n                        var tail = new ContinuousTailDetails(this.toString());\n                        return tail.appendTo(masked);\n                    }\n                    var details = new ChangeDetails();\n                    for (var ci = 0; ci < this.chunks.length && !details.skip; ++ci) {\n                        var chunk = this.chunks[ci];\n                        var lastBlockIter = masked._mapPosToBlock(masked.value.length);\n                        var stop = chunk.stop;\n                        var chunkBlock = void 0;\n                        if (stop != null && (!lastBlockIter || lastBlockIter.index <= stop)) {\n                            if (chunk instanceof ChunksTailDetails ||\n                                masked._stops.indexOf(stop) >= 0) {\n                                details.aggregate(masked._appendPlaceholder(stop));\n                            }\n                            chunkBlock = chunk instanceof ChunksTailDetails && masked._blocks[stop];\n                        }\n                        if (chunkBlock) {\n                            var tailDetails = chunkBlock.appendTail(chunk);\n                            tailDetails.skip = false;\n                            details.aggregate(tailDetails);\n                            masked._value += tailDetails.inserted;\n                            var remainChars = chunk.toString().slice(tailDetails.rawInserted.length);\n                            if (remainChars) details.aggregate(masked.append(remainChars, {\n                                tail: true\n                            }));\n                        } else {\n                            details.aggregate(masked.append(chunk.toString(), {\n                                tail: true\n                            }));\n                        }\n                    }\n                    return details;\n                }\n            }, {\n                key: \"shiftBefore\",\n                value: function shiftBefore(pos) {\n                    if (this.from >= pos || !this.chunks.length) return '';\n                    var chunkShiftPos = pos - this.from;\n                    var ci = 0;\n                    while (ci < this.chunks.length) {\n                        var chunk = this.chunks[ci];\n                        var shiftChar = chunk.shiftBefore(chunkShiftPos);\n                        if (chunk.toString()) {\n                            if (!shiftChar) break;\n                            ++ci;\n                        } else {\n                            this.chunks.splice(ci, 1);\n                        }\n                        if (shiftChar) return shiftChar;\n                    }\n                    return '';\n                }\n            }, {\n                key: \"state\",\n                get: function get() {\n                    return {\n                        chunks: this.chunks.map(function(c) {\n                            return c.state;\n                        }),\n                        from: this.from,\n                        stop: this.stop,\n                        blockIndex: this.blockIndex\n                    };\n                },\n                set: function set(state) {\n                    var chunks = state.chunks,\n                        props = _objectWithoutProperties(state, [\"chunks\"]);\n                    Object.assign(this, props);\n                    this.chunks = chunks.map(function(cstate) {\n                        var chunk = \"chunks\" in cstate ? new ChunksTailDetails() : new ContinuousTailDetails();\n                        chunk.state = cstate;\n                        return chunk;\n                    });\n                }\n            }]);\n            return ChunksTailDetails;\n        }();\n\n    var MaskedRegExp =\n        function(_Masked) {\n            _inherits(MaskedRegExp, _Masked);\n\n            function MaskedRegExp() {\n                _classCallCheck(this, MaskedRegExp);\n                return _possibleConstructorReturn(this, _getPrototypeOf(MaskedRegExp).apply(this, arguments));\n            }\n            _createClass(MaskedRegExp, [{\n                key: \"_update\",\n                value: function _update(opts) {\n                    if (opts.mask) opts.validate = function(value) {\n                        return value.search(opts.mask) >= 0;\n                    };\n                    _get(_getPrototypeOf(MaskedRegExp.prototype), \"_update\", this).call(this, opts);\n                }\n            }]);\n            return MaskedRegExp;\n        }(Masked);\n    IMask.MaskedRegExp = MaskedRegExp;\n\n    var MaskedPattern =\n        function(_Masked) {\n            _inherits(MaskedPattern, _Masked);\n\n            function MaskedPattern() {\n                var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                _classCallCheck(this, MaskedPattern);\n                opts.definitions = Object.assign({}, DEFAULT_INPUT_DEFINITIONS, opts.definitions);\n                return _possibleConstructorReturn(this, _getPrototypeOf(MaskedPattern).call(this, Object.assign({}, MaskedPattern.DEFAULTS, {}, opts)));\n            }\n            _createClass(MaskedPattern, [{\n                key: \"_update\",\n                value: function _update() {\n                    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n                    opts.definitions = Object.assign({}, this.definitions, opts.definitions);\n                    _get(_getPrototypeOf(MaskedPattern.prototype), \"_update\", this).call(this, opts);\n                    this._rebuildMask();\n                }\n            }, {\n                key: \"_rebuildMask\",\n                value: function _rebuildMask() {\n                    var _this = this;\n                    var defs = this.definitions;\n                    this._blocks = [];\n                    this._stops = [];\n                    this._maskedBlocks = {};\n                    var pattern = this.mask;\n                    if (!pattern || !defs) return;\n                    var unmaskingBlock = false;\n                    var optionalBlock = false;\n                    for (var i = 0; i < pattern.length; ++i) {\n                        if (this.blocks) {\n                            var _ret = function() {\n                                var p = pattern.slice(i);\n                                var bNames = Object.keys(_this.blocks).filter(function(bName) {\n                                    return p.indexOf(bName) === 0;\n                                });\n                                bNames.sort(function(a, b) {\n                                    return b.length - a.length;\n                                });\n                                var bName = bNames[0];\n                                if (bName) {\n                                    var maskedBlock = createMask(Object.assign({\n                                        parent: _this,\n                                        lazy: _this.lazy,\n                                        placeholderChar: _this.placeholderChar,\n                                        overwrite: _this.overwrite\n                                    }, _this.blocks[bName]));\n                                    if (maskedBlock) {\n                                        _this._blocks.push(maskedBlock);\n                                        if (!_this._maskedBlocks[bName]) _this._maskedBlocks[bName] = [];\n                                        _this._maskedBlocks[bName].push(_this._blocks.length - 1);\n                                    }\n                                    i += bName.length - 1;\n                                    return \"continue\";\n                                }\n                            }();\n                            if (_ret === \"continue\") continue;\n                        }\n                        var char = pattern[i];\n                        var _isInput = char in defs;\n                        if (char === MaskedPattern.STOP_CHAR) {\n                            this._stops.push(this._blocks.length);\n                            continue;\n                        }\n                        if (char === '{' || char === '}') {\n                            unmaskingBlock = !unmaskingBlock;\n                            continue;\n                        }\n                        if (char === '[' || char === ']') {\n                            optionalBlock = !optionalBlock;\n                            continue;\n                        }\n                        if (char === MaskedPattern.ESCAPE_CHAR) {\n                            ++i;\n                            char = pattern[i];\n                            if (!char) break;\n                            _isInput = false;\n                        }\n                        var def = _isInput ? new PatternInputDefinition({\n                            parent: this,\n                            lazy: this.lazy,\n                            placeholderChar: this.placeholderChar,\n                            mask: defs[char],\n                            isOptional: optionalBlock\n                        }) : new PatternFixedDefinition({\n                            char: char,\n                            isUnmasking: unmaskingBlock\n                        });\n                        this._blocks.push(def);\n                    }\n                }\n            }, {\n                key: \"reset\",\n                value: function reset() {\n                    _get(_getPrototypeOf(MaskedPattern.prototype), \"reset\", this).call(this);\n                    this._blocks.forEach(function(b) {\n                        return b.reset();\n                    });\n                }\n            }, {\n                key: \"doCommit\",\n                value: function doCommit() {\n                    this._blocks.forEach(function(b) {\n                        return b.doCommit();\n                    });\n                    _get(_getPrototypeOf(MaskedPattern.prototype), \"doCommit\", this).call(this);\n                }\n            }, {\n                key: \"appendTail\",\n                value: function appendTail(tail) {\n                    return _get(_getPrototypeOf(MaskedPattern.prototype), \"appendTail\", this).call(this, tail).aggregate(this._appendPlaceholder());\n                }\n            }, {\n                key: \"_appendCharRaw\",\n                value: function _appendCharRaw(ch) {\n                    var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                    ch = this.doPrepare(ch, flags);\n                    var blockIter = this._mapPosToBlock(this.value.length);\n                    var details = new ChangeDetails();\n                    if (!blockIter) return details;\n                    for (var bi = blockIter.index;; ++bi) {\n                        var _block = this._blocks[bi];\n                        if (!_block) break;\n                        var blockDetails = _block._appendChar(ch, flags);\n                        var skip = blockDetails.skip;\n                        details.aggregate(blockDetails);\n                        if (skip || blockDetails.rawInserted) break;\n                    }\n                    return details;\n                }\n            }, {\n                key: \"extractTail\",\n                value: function extractTail() {\n                    var _this2 = this;\n                    var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n                    var chunkTail = new ChunksTailDetails();\n                    if (fromPos === toPos) return chunkTail;\n                    this._forEachBlocksInRange(fromPos, toPos, function(b, bi, bFromPos, bToPos) {\n                        var blockChunk = b.extractTail(bFromPos, bToPos);\n                        blockChunk.stop = _this2._findStopBefore(bi);\n                        blockChunk.from = _this2._blockStartPos(bi);\n                        if (blockChunk instanceof ChunksTailDetails) blockChunk.blockIndex = bi;\n                        chunkTail.extend(blockChunk);\n                    });\n                    return chunkTail;\n                }\n            }, {\n                key: \"extractInput\",\n                value: function extractInput() {\n                    var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n                    var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n                    if (fromPos === toPos) return '';\n                    var input = '';\n                    this._forEachBlocksInRange(fromPos, toPos, function(b, _, fromPos, toPos) {\n                        input += b.extractInput(fromPos, toPos, flags);\n                    });\n                    return input;\n                }\n            }, {\n                key: \"_findStopBefore\",\n                value: function _findStopBefore(blockIndex) {\n                    var stopBefore;\n                    for (var si = 0; si < this._stops.length; ++si) {\n                        var stop = this._stops[si];\n                        if (stop <= blockIndex) stopBefore = stop;\n                        else break;\n                    }\n                    return stopBefore;\n                }\n            }, {\n                key: \"_appendPlaceholder\",\n                value: function _appendPlaceholder(toBlockIndex) {\n                    var _this3 = this;\n                    var details = new ChangeDetails();\n                    if (this.lazy && toBlockIndex == null) return details;\n                    var startBlockIter = this._mapPosToBlock(this.value.length);\n                    if (!startBlockIter) return details;\n                    var startBlockIndex = startBlockIter.index;\n                    var endBlockIndex = toBlockIndex != null ? toBlockIndex : this._blocks.length;\n                    this._blocks.slice(startBlockIndex, endBlockIndex).forEach(function(b) {\n                        if (!b.lazy || toBlockIndex != null) {\n                            var args = b._blocks != null ? [b._blocks.length] : [];\n                            var bDetails = b._appendPlaceholder.apply(b, args);\n                            _this3._value += bDetails.inserted;\n                            details.aggregate(bDetails);\n                        }\n                    });\n                    return details;\n                }\n            }, {\n                key: \"_mapPosToBlock\",\n                value: function _mapPosToBlock(pos) {\n                    var accVal = '';\n                    for (var bi = 0; bi < this._blocks.length; ++bi) {\n                        var _block2 = this._blocks[bi];\n                        var blockStartPos = accVal.length;\n                        accVal += _block2.value;\n                        if (pos <= accVal.length) {\n                            return {\n                                index: bi,\n                                offset: pos - blockStartPos\n                            };\n                        }\n                    }\n                }\n            }, {\n                key: \"_blockStartPos\",\n                value: function _blockStartPos(blockIndex) {\n                    return this._blocks.slice(0, blockIndex).reduce(function(pos, b) {\n                        return pos += b.value.length;\n                    }, 0);\n                }\n            }, {\n                key: \"_forEachBlocksInRange\",\n                value: function _forEachBlocksInRange(fromPos) {\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n                    var fn = arguments.length > 2 ? arguments[2] : undefined;\n                    var fromBlockIter = this._mapPosToBlock(fromPos);\n                    if (fromBlockIter) {\n                        var toBlockIter = this._mapPosToBlock(toPos);\n                        var isSameBlock = toBlockIter && fromBlockIter.index === toBlockIter.index;\n                        var fromBlockStartPos = fromBlockIter.offset;\n                        var fromBlockEndPos = toBlockIter && isSameBlock ? toBlockIter.offset : this._blocks[fromBlockIter.index].value.length;\n                        fn(this._blocks[fromBlockIter.index], fromBlockIter.index, fromBlockStartPos, fromBlockEndPos);\n                        if (toBlockIter && !isSameBlock) {\n                            for (var bi = fromBlockIter.index + 1; bi < toBlockIter.index; ++bi) {\n                                fn(this._blocks[bi], bi, 0, this._blocks[bi].value.length);\n                            }\n                            fn(this._blocks[toBlockIter.index], toBlockIter.index, 0, toBlockIter.offset);\n                        }\n                    }\n                }\n            }, {\n                key: \"remove\",\n                value: function remove() {\n                    var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n                    var removeDetails = _get(_getPrototypeOf(MaskedPattern.prototype), \"remove\", this).call(this, fromPos, toPos);\n                    this._forEachBlocksInRange(fromPos, toPos, function(b, _, bFromPos, bToPos) {\n                        removeDetails.aggregate(b.remove(bFromPos, bToPos));\n                    });\n                    return removeDetails;\n                }\n            }, {\n                key: \"nearestInputPos\",\n                value: function nearestInputPos(cursorPos) {\n                    var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;\n                    var beginBlockData = this._mapPosToBlock(cursorPos) || {\n                        index: 0,\n                        offset: 0\n                    };\n                    var beginBlockOffset = beginBlockData.offset,\n                        beginBlockIndex = beginBlockData.index;\n                    var beginBlock = this._blocks[beginBlockIndex];\n                    if (!beginBlock) return cursorPos;\n                    var beginBlockCursorPos = beginBlockOffset;\n                    if (beginBlockCursorPos !== 0 && beginBlockCursorPos < beginBlock.value.length) {\n                        beginBlockCursorPos = beginBlock.nearestInputPos(beginBlockOffset, forceDirection(direction));\n                    }\n                    var cursorAtRight = beginBlockCursorPos === beginBlock.value.length;\n                    var cursorAtLeft = beginBlockCursorPos === 0;\n                    if (!cursorAtLeft && !cursorAtRight) return this._blockStartPos(beginBlockIndex) + beginBlockCursorPos;\n                    var searchBlockIndex = cursorAtRight ? beginBlockIndex + 1 : beginBlockIndex;\n                    if (direction === DIRECTION.NONE) {\n                        if (searchBlockIndex > 0) {\n                            var blockIndexAtLeft = searchBlockIndex - 1;\n                            var blockAtLeft = this._blocks[blockIndexAtLeft];\n                            var blockInputPos = blockAtLeft.nearestInputPos(0, DIRECTION.NONE);\n                            if (!blockAtLeft.value.length || blockInputPos !== blockAtLeft.value.length) {\n                                return this._blockStartPos(searchBlockIndex);\n                            }\n                        }\n                        var firstInputAtRight = searchBlockIndex;\n                        for (var bi = firstInputAtRight; bi < this._blocks.length; ++bi) {\n                            var blockAtRight = this._blocks[bi];\n                            var _blockInputPos = blockAtRight.nearestInputPos(0, DIRECTION.NONE);\n                            if (!blockAtRight.value.length || _blockInputPos !== blockAtRight.value.length) {\n                                return this._blockStartPos(bi) + _blockInputPos;\n                            }\n                        }\n                        for (var _bi = searchBlockIndex - 1; _bi >= 0; --_bi) {\n                            var _block3 = this._blocks[_bi];\n                            var _blockInputPos2 = _block3.nearestInputPos(0, DIRECTION.NONE);\n                            if (!_block3.value.length || _blockInputPos2 !== _block3.value.length) {\n                                return this._blockStartPos(_bi) + _block3.value.length;\n                            }\n                        }\n                        return cursorPos;\n                    }\n                    if (direction === DIRECTION.LEFT || direction === DIRECTION.FORCE_LEFT) {\n                        var firstFilledBlockIndexAtRight;\n                        for (var _bi2 = searchBlockIndex; _bi2 < this._blocks.length; ++_bi2) {\n                            if (this._blocks[_bi2].value) {\n                                firstFilledBlockIndexAtRight = _bi2;\n                                break;\n                            }\n                        }\n                        if (firstFilledBlockIndexAtRight != null) {\n                            var filledBlock = this._blocks[firstFilledBlockIndexAtRight];\n                            var _blockInputPos3 = filledBlock.nearestInputPos(0, DIRECTION.RIGHT);\n                            if (_blockInputPos3 === 0 && filledBlock.unmaskedValue.length) {\n                                return this._blockStartPos(firstFilledBlockIndexAtRight) + _blockInputPos3;\n                            }\n                        }\n                        var firstFilledInputBlockIndex = -1;\n                        var firstEmptyInputBlockIndex;\n                        for (var _bi3 = searchBlockIndex - 1; _bi3 >= 0; --_bi3) {\n                            var _block4 = this._blocks[_bi3];\n                            var _blockInputPos4 = _block4.nearestInputPos(_block4.value.length, DIRECTION.FORCE_LEFT);\n                            if (!_block4.value || _blockInputPos4 !== 0) firstEmptyInputBlockIndex = _bi3;\n                            if (_blockInputPos4 !== 0) {\n                                if (_blockInputPos4 !== _block4.value.length) {\n                                    return this._blockStartPos(_bi3) + _blockInputPos4;\n                                } else {\n                                    firstFilledInputBlockIndex = _bi3;\n                                    break;\n                                }\n                            }\n                        }\n                        if (direction === DIRECTION.LEFT) {\n                            for (var _bi4 = firstFilledInputBlockIndex + 1; _bi4 <= Math.min(searchBlockIndex, this._blocks.length - 1); ++_bi4) {\n                                var _block5 = this._blocks[_bi4];\n                                var _blockInputPos5 = _block5.nearestInputPos(0, DIRECTION.NONE);\n                                var blockAlignedPos = this._blockStartPos(_bi4) + _blockInputPos5;\n                                if (blockAlignedPos > cursorPos) break;\n                                if (_blockInputPos5 !== _block5.value.length) return blockAlignedPos;\n                            }\n                        }\n                        if (firstFilledInputBlockIndex >= 0) {\n                            return this._blockStartPos(firstFilledInputBlockIndex) + this._blocks[firstFilledInputBlockIndex].value.length;\n                        }\n                        if (direction === DIRECTION.FORCE_LEFT || this.lazy && !this.extractInput() && !isInput(this._blocks[searchBlockIndex])) {\n                            return 0;\n                        }\n                        if (firstEmptyInputBlockIndex != null) {\n                            return this._blockStartPos(firstEmptyInputBlockIndex);\n                        }\n                        for (var _bi5 = searchBlockIndex; _bi5 < this._blocks.length; ++_bi5) {\n                            var _block6 = this._blocks[_bi5];\n                            var _blockInputPos6 = _block6.nearestInputPos(0, DIRECTION.NONE);\n                            if (!_block6.value.length || _blockInputPos6 !== _block6.value.length) {\n                                return this._blockStartPos(_bi5) + _blockInputPos6;\n                            }\n                        }\n                        return 0;\n                    }\n                    if (direction === DIRECTION.RIGHT || direction === DIRECTION.FORCE_RIGHT) {\n                        var firstInputBlockAlignedIndex;\n                        var firstInputBlockAlignedPos;\n                        for (var _bi6 = searchBlockIndex; _bi6 < this._blocks.length; ++_bi6) {\n                            var _block7 = this._blocks[_bi6];\n                            var _blockInputPos7 = _block7.nearestInputPos(0, DIRECTION.NONE);\n                            if (_blockInputPos7 !== _block7.value.length) {\n                                firstInputBlockAlignedPos = this._blockStartPos(_bi6) + _blockInputPos7;\n                                firstInputBlockAlignedIndex = _bi6;\n                                break;\n                            }\n                        }\n                        if (firstInputBlockAlignedIndex != null && firstInputBlockAlignedPos != null) {\n                            for (var _bi7 = firstInputBlockAlignedIndex; _bi7 < this._blocks.length; ++_bi7) {\n                                var _block8 = this._blocks[_bi7];\n                                var _blockInputPos8 = _block8.nearestInputPos(0, DIRECTION.FORCE_RIGHT);\n                                if (_blockInputPos8 !== _block8.value.length) {\n                                    return this._blockStartPos(_bi7) + _blockInputPos8;\n                                }\n                            }\n                            return direction === DIRECTION.FORCE_RIGHT ? this.value.length : firstInputBlockAlignedPos;\n                        }\n                        for (var _bi8 = Math.min(searchBlockIndex, this._blocks.length - 1); _bi8 >= 0; --_bi8) {\n                            var _block9 = this._blocks[_bi8];\n                            var _blockInputPos9 = _block9.nearestInputPos(_block9.value.length, DIRECTION.LEFT);\n                            if (_blockInputPos9 !== 0) {\n                                var alignedPos = this._blockStartPos(_bi8) + _blockInputPos9;\n                                if (alignedPos >= cursorPos) return alignedPos;\n                                break;\n                            }\n                        }\n                    }\n                    return cursorPos;\n                }\n            }, {\n                key: \"maskedBlock\",\n                value: function maskedBlock(name) {\n                    return this.maskedBlocks(name)[0];\n                }\n            }, {\n                key: \"maskedBlocks\",\n                value: function maskedBlocks(name) {\n                    var _this4 = this;\n                    var indices = this._maskedBlocks[name];\n                    if (!indices) return [];\n                    return indices.map(function(gi) {\n                        return _this4._blocks[gi];\n                    });\n                }\n            }, {\n                key: \"state\",\n                get: function get() {\n                    return Object.assign({}, _get(_getPrototypeOf(MaskedPattern.prototype), \"state\", this), {\n                        _blocks: this._blocks.map(function(b) {\n                            return b.state;\n                        })\n                    });\n                },\n                set: function set(state) {\n                    var _blocks = state._blocks,\n                        maskedState = _objectWithoutProperties(state, [\"_blocks\"]);\n                    this._blocks.forEach(function(b, bi) {\n                        return b.state = _blocks[bi];\n                    });\n                    _set(_getPrototypeOf(MaskedPattern.prototype), \"state\", maskedState, this, true);\n                }\n            }, {\n                key: \"isComplete\",\n                get: function get() {\n                    return this._blocks.every(function(b) {\n                        return b.isComplete;\n                    });\n                }\n            }, {\n                key: \"unmaskedValue\",\n                get: function get() {\n                    return this._blocks.reduce(function(str, b) {\n                        return str += b.unmaskedValue;\n                    }, '');\n                },\n                set: function set(unmaskedValue) {\n                    _set(_getPrototypeOf(MaskedPattern.prototype), \"unmaskedValue\", unmaskedValue, this, true);\n                }\n            }, {\n                key: \"value\",\n                get: function get() {\n                    return this._blocks.reduce(function(str, b) {\n                        return str += b.value;\n                    }, '');\n                },\n                set: function set(value) {\n                    _set(_getPrototypeOf(MaskedPattern.prototype), \"value\", value, this, true);\n                }\n            }]);\n            return MaskedPattern;\n        }(Masked);\n    MaskedPattern.DEFAULTS = {\n        lazy: true,\n        placeholderChar: '_'\n    };\n    MaskedPattern.STOP_CHAR = '`';\n    MaskedPattern.ESCAPE_CHAR = '\\\\';\n    MaskedPattern.InputDefinition = PatternInputDefinition;\n    MaskedPattern.FixedDefinition = PatternFixedDefinition;\n\n    function isInput(block) {\n        if (!block) return false;\n        var value = block.value;\n        return !value || block.nearestInputPos(0, DIRECTION.NONE) !== value.length;\n    }\n    IMask.MaskedPattern = MaskedPattern;\n\n    var MaskedRange =\n        function(_MaskedPattern) {\n            _inherits(MaskedRange, _MaskedPattern);\n\n            function MaskedRange() {\n                _classCallCheck(this, MaskedRange);\n                return _possibleConstructorReturn(this, _getPrototypeOf(MaskedRange).apply(this, arguments));\n            }\n            _createClass(MaskedRange, [{\n                key: \"_update\",\n                value: function _update(opts) {\n                    opts = Object.assign({\n                        to: this.to || 0,\n                        from: this.from || 0\n                    }, opts);\n                    var maxLength = String(opts.to).length;\n                    if (opts.maxLength != null) maxLength = Math.max(maxLength, opts.maxLength);\n                    opts.maxLength = maxLength;\n                    var fromStr = String(opts.from).padStart(maxLength, '0');\n                    var toStr = String(opts.to).padStart(maxLength, '0');\n                    var sameCharsCount = 0;\n                    while (sameCharsCount < toStr.length && toStr[sameCharsCount] === fromStr[sameCharsCount]) {\n                        ++sameCharsCount;\n                    }\n                    opts.mask = toStr.slice(0, sameCharsCount).replace(/0/g, '\\\\0') + '0'.repeat(maxLength - sameCharsCount);\n                    _get(_getPrototypeOf(MaskedRange.prototype), \"_update\", this).call(this, opts);\n                }\n            }, {\n                key: \"boundaries\",\n                value: function boundaries(str) {\n                    var minstr = '';\n                    var maxstr = '';\n                    var _ref = str.match(/^(\\D*)(\\d*)(\\D*)/) || [],\n                        _ref2 = _slicedToArray(_ref, 3),\n                        placeholder = _ref2[1],\n                        num = _ref2[2];\n                    if (num) {\n                        minstr = '0'.repeat(placeholder.length) + num;\n                        maxstr = '9'.repeat(placeholder.length) + num;\n                    }\n                    minstr = minstr.padEnd(this.maxLength, '0');\n                    maxstr = maxstr.padEnd(this.maxLength, '9');\n                    return [minstr, maxstr];\n                }\n            }, {\n                key: \"doPrepare\",\n                value: function doPrepare(str) {\n                    var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                    str = _get(_getPrototypeOf(MaskedRange.prototype), \"doPrepare\", this).call(this, str, flags).replace(/\\D/g, '');\n                    if (!this.autofix) return str;\n                    var fromStr = String(this.from).padStart(this.maxLength, '0');\n                    var toStr = String(this.to).padStart(this.maxLength, '0');\n                    var val = this.value;\n                    var prepStr = '';\n                    for (var ci = 0; ci < str.length; ++ci) {\n                        var nextVal = val + prepStr + str[ci];\n                        var _this$boundaries = this.boundaries(nextVal),\n                            _this$boundaries2 = _slicedToArray(_this$boundaries, 2),\n                            minstr = _this$boundaries2[0],\n                            maxstr = _this$boundaries2[1];\n                        if (Number(maxstr) < this.from) prepStr += fromStr[nextVal.length - 1];\n                        else if (Number(minstr) > this.to) prepStr += toStr[nextVal.length - 1];\n                        else prepStr += str[ci];\n                    }\n                    return prepStr;\n                }\n            }, {\n                key: \"doValidate\",\n                value: function doValidate() {\n                    var _get2;\n                    var str = this.value;\n                    var firstNonZero = str.search(/[^0]/);\n                    if (firstNonZero === -1 && str.length <= this._matchFrom) return true;\n                    var _this$boundaries3 = this.boundaries(str),\n                        _this$boundaries4 = _slicedToArray(_this$boundaries3, 2),\n                        minstr = _this$boundaries4[0],\n                        maxstr = _this$boundaries4[1];\n                    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                        args[_key] = arguments[_key];\n                    }\n                    return this.from <= Number(maxstr) && Number(minstr) <= this.to && (_get2 = _get(_getPrototypeOf(MaskedRange.prototype), \"doValidate\", this)).call.apply(_get2, [this].concat(args));\n                }\n            }, {\n                key: \"_matchFrom\",\n                get: function get() {\n                    return this.maxLength - String(this.from).length;\n                }\n            }, {\n                key: \"isComplete\",\n                get: function get() {\n                    return _get(_getPrototypeOf(MaskedRange.prototype), \"isComplete\", this) && Boolean(this.value);\n                }\n            }]);\n            return MaskedRange;\n        }(MaskedPattern);\n    IMask.MaskedRange = MaskedRange;\n\n    var MaskedDate =\n        function(_MaskedPattern) {\n            _inherits(MaskedDate, _MaskedPattern);\n\n            function MaskedDate(opts) {\n                _classCallCheck(this, MaskedDate);\n                return _possibleConstructorReturn(this, _getPrototypeOf(MaskedDate).call(this, Object.assign({}, MaskedDate.DEFAULTS, {}, opts)));\n            }\n            _createClass(MaskedDate, [{\n                key: \"_update\",\n                value: function _update(opts) {\n                    if (opts.mask === Date) delete opts.mask;\n                    if (opts.pattern) opts.mask = opts.pattern;\n                    var blocks = opts.blocks;\n                    opts.blocks = Object.assign({}, MaskedDate.GET_DEFAULT_BLOCKS());\n                    if (opts.min) opts.blocks.Y.from = opts.min.getFullYear();\n                    if (opts.max) opts.blocks.Y.to = opts.max.getFullYear();\n                    if (opts.min && opts.max && opts.blocks.Y.from === opts.blocks.Y.to) {\n                        opts.blocks.m.from = opts.min.getMonth() + 1;\n                        opts.blocks.m.to = opts.max.getMonth() + 1;\n                        if (opts.blocks.m.from === opts.blocks.m.to) {\n                            opts.blocks.d.from = opts.min.getDate();\n                            opts.blocks.d.to = opts.max.getDate();\n                        }\n                    }\n                    Object.assign(opts.blocks, blocks);\n                    Object.keys(opts.blocks).forEach(function(bk) {\n                        var b = opts.blocks[bk];\n                        if (!('autofix' in b)) b.autofix = opts.autofix;\n                    });\n                    _get(_getPrototypeOf(MaskedDate.prototype), \"_update\", this).call(this, opts);\n                }\n            }, {\n                key: \"doValidate\",\n                value: function doValidate() {\n                    var _get2;\n                    var date = this.date;\n                    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                        args[_key] = arguments[_key];\n                    }\n                    return (_get2 = _get(_getPrototypeOf(MaskedDate.prototype), \"doValidate\", this)).call.apply(_get2, [this].concat(args)) && (!this.isComplete || this.isDateExist(this.value) && date != null && (this.min == null || this.min <= date) && (this.max == null || date <= this.max));\n                }\n            }, {\n                key: \"isDateExist\",\n                value: function isDateExist(str) {\n                    return this.format(this.parse(str, this), this).indexOf(str) >= 0;\n                }\n            }, {\n                key: \"date\",\n                get: function get() {\n                    return this.typedValue;\n                },\n                set: function set(date) {\n                    this.typedValue = date;\n                }\n            }, {\n                key: \"typedValue\",\n                get: function get() {\n                    return this.isComplete ? _get(_getPrototypeOf(MaskedDate.prototype), \"typedValue\", this) : null;\n                },\n                set: function set(value) {\n                    _set(_getPrototypeOf(MaskedDate.prototype), \"typedValue\", value, this, true);\n                }\n            }]);\n            return MaskedDate;\n        }(MaskedPattern);\n    MaskedDate.DEFAULTS = {\n        pattern: 'd{.}`m{.}`Y',\n        format: function format(date) {\n            var day = String(date.getDate()).padStart(2, '0');\n            var month = String(date.getMonth() + 1).padStart(2, '0');\n            var year = date.getFullYear();\n            return [day, month, year].join('.');\n        },\n        parse: function parse(str) {\n            var _str$split = str.split('.'),\n                _str$split2 = _slicedToArray(_str$split, 3),\n                day = _str$split2[0],\n                month = _str$split2[1],\n                year = _str$split2[2];\n            return new Date(year, month - 1, day);\n        }\n    };\n    MaskedDate.GET_DEFAULT_BLOCKS = function() {\n        return {\n            d: {\n                mask: MaskedRange,\n                from: 1,\n                to: 31,\n                maxLength: 2\n            },\n            m: {\n                mask: MaskedRange,\n                from: 1,\n                to: 12,\n                maxLength: 2\n            },\n            Y: {\n                mask: MaskedRange,\n                from: 1900,\n                to: 9999\n            }\n        };\n    };\n    IMask.MaskedDate = MaskedDate;\n\n    var MaskElement =\n        function() {\n            function MaskElement() {\n                _classCallCheck(this, MaskElement);\n            }\n            _createClass(MaskElement, [{\n                key: \"select\",\n                value: function select(start, end) {\n                    if (start == null || end == null || start === this.selectionStart && end === this.selectionEnd) return;\n                    try {\n                        this._unsafeSelect(start, end);\n                    } catch (e) {}\n                }\n            }, {\n                key: \"_unsafeSelect\",\n                value: function _unsafeSelect(start, end) {}\n            }, {\n                key: \"bindEvents\",\n                value: function bindEvents(handlers) {}\n            }, {\n                key: \"unbindEvents\",\n                value: function unbindEvents() {}\n            }, {\n                key: \"selectionStart\",\n                get: function get() {\n                    var start;\n                    try {\n                        start = this._unsafeSelectionStart;\n                    } catch (e) {}\n                    return start != null ? start : this.value.length;\n                }\n            }, {\n                key: \"selectionEnd\",\n                get: function get() {\n                    var end;\n                    try {\n                        end = this._unsafeSelectionEnd;\n                    } catch (e) {}\n                    return end != null ? end : this.value.length;\n                }\n            }, {\n                key: \"isActive\",\n                get: function get() {\n                    return false;\n                }\n            }]);\n            return MaskElement;\n        }();\n    IMask.MaskElement = MaskElement;\n\n    var HTMLMaskElement =\n        function(_MaskElement) {\n            _inherits(HTMLMaskElement, _MaskElement);\n\n            function HTMLMaskElement(input) {\n                var _this;\n                _classCallCheck(this, HTMLMaskElement);\n                _this = _possibleConstructorReturn(this, _getPrototypeOf(HTMLMaskElement).call(this));\n                _this.input = input;\n                _this._handlers = {};\n                return _this;\n            }\n            _createClass(HTMLMaskElement, [{\n                key: \"_unsafeSelect\",\n                value: function _unsafeSelect(start, end) {\n                    this.input.setSelectionRange(start, end);\n                }\n            }, {\n                key: \"bindEvents\",\n                value: function bindEvents(handlers) {\n                    var _this2 = this;\n                    Object.keys(handlers).forEach(function(event) {\n                        return _this2._toggleEventHandler(HTMLMaskElement.EVENTS_MAP[event], handlers[event]);\n                    });\n                }\n            }, {\n                key: \"unbindEvents\",\n                value: function unbindEvents() {\n                    var _this3 = this;\n                    Object.keys(this._handlers).forEach(function(event) {\n                        return _this3._toggleEventHandler(event);\n                    });\n                }\n            }, {\n                key: \"_toggleEventHandler\",\n                value: function _toggleEventHandler(event, handler) {\n                    if (this._handlers[event]) {\n                        this.input.removeEventListener(event, this._handlers[event]);\n                        delete this._handlers[event];\n                    }\n                    if (handler) {\n                        this.input.addEventListener(event, handler);\n                        this._handlers[event] = handler;\n                    }\n                }\n            }, {\n                key: \"rootElement\",\n                get: function get() {\n                    return this.input.getRootNode ? this.input.getRootNode() : document;\n                }\n            }, {\n                key: \"isActive\",\n                get: function get() {\n                    return this.input === this.rootElement.activeElement;\n                }\n            }, {\n                key: \"_unsafeSelectionStart\",\n                get: function get() {\n                    return this.input.selectionStart;\n                }\n            }, {\n                key: \"_unsafeSelectionEnd\",\n                get: function get() {\n                    return this.input.selectionEnd;\n                }\n            }, {\n                key: \"value\",\n                get: function get() {\n                    return this.input.value;\n                },\n                set: function set(value) {\n                    this.input.value = value;\n                }\n            }]);\n            return HTMLMaskElement;\n        }(MaskElement);\n    HTMLMaskElement.EVENTS_MAP = {\n        selectionChange: 'keydown',\n        input: 'input',\n        drop: 'drop',\n        click: 'click',\n        focus: 'focus',\n        commit: 'blur'\n    };\n    IMask.HTMLMaskElement = HTMLMaskElement;\n\n    var HTMLContenteditableMaskElement =\n        function(_HTMLMaskElement) {\n            _inherits(HTMLContenteditableMaskElement, _HTMLMaskElement);\n\n            function HTMLContenteditableMaskElement() {\n                _classCallCheck(this, HTMLContenteditableMaskElement);\n                return _possibleConstructorReturn(this, _getPrototypeOf(HTMLContenteditableMaskElement).apply(this, arguments));\n            }\n            _createClass(HTMLContenteditableMaskElement, [{\n                key: \"_unsafeSelect\",\n                value: function _unsafeSelect(start, end) {\n                    if (!this.rootElement.createRange) return;\n                    var range = this.rootElement.createRange();\n                    range.setStart(this.input.firstChild || this.input, start);\n                    range.setEnd(this.input.lastChild || this.input, end);\n                    var root = this.rootElement;\n                    var selection = root.getSelection && root.getSelection();\n                    if (selection) {\n                        selection.removeAllRanges();\n                        selection.addRange(range);\n                    }\n                }\n            }, {\n                key: \"_unsafeSelectionStart\",\n                get: function get() {\n                    var root = this.rootElement;\n                    var selection = root.getSelection && root.getSelection();\n                    return selection && selection.anchorOffset;\n                }\n            }, {\n                key: \"_unsafeSelectionEnd\",\n                get: function get() {\n                    var root = this.rootElement;\n                    var selection = root.getSelection && root.getSelection();\n                    return selection && this._unsafeSelectionStart + String(selection).length;\n                }\n            }, {\n                key: \"value\",\n                get: function get() {\n                    return this.input.textContent;\n                },\n                set: function set(value) {\n                    this.input.textContent = value;\n                }\n            }]);\n            return HTMLContenteditableMaskElement;\n        }(HTMLMaskElement);\n    IMask.HTMLContenteditableMaskElement = HTMLContenteditableMaskElement;\n\n    var InputMask =\n        function() {\n            function InputMask(el, opts) {\n                _classCallCheck(this, InputMask);\n                this.el = el instanceof MaskElement ? el : el.isContentEditable && el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA' ? new HTMLContenteditableMaskElement(el) : new HTMLMaskElement(el);\n                this.masked = createMask(opts);\n                this._listeners = {};\n                this._value = '';\n                this._unmaskedValue = '';\n                this._saveSelection = this._saveSelection.bind(this);\n                this._onInput = this._onInput.bind(this);\n                this._onChange = this._onChange.bind(this);\n                this._onDrop = this._onDrop.bind(this);\n                this._onFocus = this._onFocus.bind(this);\n                this._onClick = this._onClick.bind(this);\n                this.alignCursor = this.alignCursor.bind(this);\n                this.alignCursorFriendly = this.alignCursorFriendly.bind(this);\n                this._bindEvents();\n                this.updateValue();\n                this._onChange();\n            }\n            _createClass(InputMask, [{\n                key: \"maskEquals\",\n                value: function maskEquals(mask) {\n                    return mask == null || mask === this.masked.mask || mask === Date && this.masked instanceof MaskedDate;\n                }\n            }, {\n                key: \"_bindEvents\",\n                value: function _bindEvents() {\n                    this.el.bindEvents({\n                        selectionChange: this._saveSelection,\n                        input: this._onInput,\n                        drop: this._onDrop,\n                        click: this._onClick,\n                        focus: this._onFocus,\n                        commit: this._onChange\n                    });\n                }\n            }, {\n                key: \"_unbindEvents\",\n                value: function _unbindEvents() {\n                    if (this.el) this.el.unbindEvents();\n                }\n            }, {\n                key: \"_fireEvent\",\n                value: function _fireEvent(ev) {\n                    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                        args[_key - 1] = arguments[_key];\n                    }\n                    var listeners = this._listeners[ev];\n                    if (!listeners) return;\n                    listeners.forEach(function(l) {\n                        return l.apply(void 0, args);\n                    });\n                }\n            }, {\n                key: \"_saveSelection\",\n                value: function _saveSelection() {\n                    if (this.value !== this.el.value) {\n                        console.warn('Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly.');\n                    }\n                    this._selection = {\n                        start: this.selectionStart,\n                        end: this.cursorPos\n                    };\n                }\n            }, {\n                key: \"updateValue\",\n                value: function updateValue() {\n                    this.masked.value = this.el.value;\n                    this._value = this.masked.value;\n                }\n            }, {\n                key: \"updateControl\",\n                value: function updateControl() {\n                    var newUnmaskedValue = this.masked.unmaskedValue;\n                    var newValue = this.masked.value;\n                    var isChanged = this.unmaskedValue !== newUnmaskedValue || this.value !== newValue;\n                    this._unmaskedValue = newUnmaskedValue;\n                    this._value = newValue;\n                    if (this.el.value !== newValue) this.el.value = newValue;\n                    if (isChanged) this._fireChangeEvents();\n                }\n            }, {\n                key: \"updateOptions\",\n                value: function updateOptions(opts) {\n                    var mask = opts.mask,\n                        restOpts = _objectWithoutProperties(opts, [\"mask\"]);\n                    var updateMask = !this.maskEquals(mask);\n                    var updateOpts = !objectIncludes(this.masked, restOpts);\n                    if (updateMask) this.mask = mask;\n                    if (updateOpts) this.masked.updateOptions(restOpts);\n                    if (updateMask || updateOpts) this.updateControl();\n                }\n            }, {\n                key: \"updateCursor\",\n                value: function updateCursor(cursorPos) {\n                    if (cursorPos == null) return;\n                    this.cursorPos = cursorPos;\n                    this._delayUpdateCursor(cursorPos);\n                }\n            }, {\n                key: \"_delayUpdateCursor\",\n                value: function _delayUpdateCursor(cursorPos) {\n                    var _this = this;\n                    this._abortUpdateCursor();\n                    this._changingCursorPos = cursorPos;\n                    this._cursorChanging = setTimeout(function() {\n                        if (!_this.el) return;\n                        _this.cursorPos = _this._changingCursorPos;\n                        _this._abortUpdateCursor();\n                    }, 10);\n                }\n            }, {\n                key: \"_fireChangeEvents\",\n                value: function _fireChangeEvents() {\n                    this._fireEvent('accept', this._inputEvent);\n                    if (this.masked.isComplete) this._fireEvent('complete', this._inputEvent);\n                }\n            }, {\n                key: \"_abortUpdateCursor\",\n                value: function _abortUpdateCursor() {\n                    if (this._cursorChanging) {\n                        clearTimeout(this._cursorChanging);\n                        delete this._cursorChanging;\n                    }\n                }\n            }, {\n                key: \"alignCursor\",\n                value: function alignCursor() {\n                    this.cursorPos = this.masked.nearestInputPos(this.cursorPos, DIRECTION.LEFT);\n                }\n            }, {\n                key: \"alignCursorFriendly\",\n                value: function alignCursorFriendly() {\n                    if (this.selectionStart !== this.cursorPos) return;\n                    this.alignCursor();\n                }\n            }, {\n                key: \"on\",\n                value: function on(ev, handler) {\n                    if (!this._listeners[ev]) this._listeners[ev] = [];\n                    this._listeners[ev].push(handler);\n                    return this;\n                }\n            }, {\n                key: \"off\",\n                value: function off(ev, handler) {\n                    if (!this._listeners[ev]) return this;\n                    if (!handler) {\n                        delete this._listeners[ev];\n                        return this;\n                    }\n                    var hIndex = this._listeners[ev].indexOf(handler);\n                    if (hIndex >= 0) this._listeners[ev].splice(hIndex, 1);\n                    return this;\n                }\n            }, {\n                key: \"_onInput\",\n                value: function _onInput(e) {\n                    this._inputEvent = e;\n                    this._abortUpdateCursor();\n                    if (!this._selection) return this.updateValue();\n                    var details = new ActionDetails(\n                        this.el.value, this.cursorPos,\n                        this.value, this._selection);\n                    var oldRawValue = this.masked.rawInputValue;\n                    var offset = this.masked.splice(details.startChangePos, details.removed.length, details.inserted, details.removeDirection).offset;\n                    var removeDirection = oldRawValue === this.masked.rawInputValue ? details.removeDirection : DIRECTION.NONE;\n                    var cursorPos = this.masked.nearestInputPos(details.startChangePos + offset, removeDirection);\n                    this.updateControl();\n                    this.updateCursor(cursorPos);\n                    delete this._inputEvent;\n                }\n            }, {\n                key: \"_onChange\",\n                value: function _onChange() {\n                    if (this.value !== this.el.value) {\n                        this.updateValue();\n                    }\n                    this.masked.doCommit();\n                    this.updateControl();\n                    this._saveSelection();\n                }\n            }, {\n                key: \"_onDrop\",\n                value: function _onDrop(ev) {\n                    ev.preventDefault();\n                    ev.stopPropagation();\n                }\n            }, {\n                key: \"_onFocus\",\n                value: function _onFocus(ev) {\n                    this.alignCursorFriendly();\n                }\n            }, {\n                key: \"_onClick\",\n                value: function _onClick(ev) {\n                    this.alignCursorFriendly();\n                }\n            }, {\n                key: \"destroy\",\n                value: function destroy() {\n                    this._unbindEvents();\n                    this._listeners.length = 0;\n                    delete this.el;\n                }\n            }, {\n                key: \"mask\",\n                get: function get() {\n                    return this.masked.mask;\n                },\n                set: function set(mask) {\n                    if (this.maskEquals(mask)) return;\n                    if (!(mask instanceof IMask.Masked) && this.masked.constructor === maskedClass(mask)) {\n                        this.masked.updateOptions({\n                            mask: mask\n                        });\n                        return;\n                    }\n                    var masked = createMask({\n                        mask: mask\n                    });\n                    masked.unmaskedValue = this.masked.unmaskedValue;\n                    this.masked = masked;\n                }\n            }, {\n                key: \"value\",\n                get: function get() {\n                    return this._value;\n                },\n                set: function set(str) {\n                    this.masked.value = str;\n                    this.updateControl();\n                    this.alignCursor();\n                }\n            }, {\n                key: \"unmaskedValue\",\n                get: function get() {\n                    return this._unmaskedValue;\n                },\n                set: function set(str) {\n                    this.masked.unmaskedValue = str;\n                    this.updateControl();\n                    this.alignCursor();\n                }\n            }, {\n                key: \"typedValue\",\n                get: function get() {\n                    return this.masked.typedValue;\n                },\n                set: function set(val) {\n                    this.masked.typedValue = val;\n                    this.updateControl();\n                    this.alignCursor();\n                }\n            }, {\n                key: \"selectionStart\",\n                get: function get() {\n                    return this._cursorChanging ? this._changingCursorPos : this.el.selectionStart;\n                }\n            }, {\n                key: \"cursorPos\",\n                get: function get() {\n                    return this._cursorChanging ? this._changingCursorPos : this.el.selectionEnd;\n                },\n                set: function set(pos) {\n                    if (!this.el || !this.el.isActive) return;\n                    this.el.select(pos, pos);\n                    this._saveSelection();\n                }\n            }]);\n            return InputMask;\n        }();\n    IMask.InputMask = InputMask;\n\n    var MaskedEnum =\n        function(_MaskedPattern) {\n            _inherits(MaskedEnum, _MaskedPattern);\n\n            function MaskedEnum() {\n                _classCallCheck(this, MaskedEnum);\n                return _possibleConstructorReturn(this, _getPrototypeOf(MaskedEnum).apply(this, arguments));\n            }\n            _createClass(MaskedEnum, [{\n                key: \"_update\",\n                value: function _update(opts) {\n                    if (opts.enum) opts.mask = '*'.repeat(opts.enum[0].length);\n                    _get(_getPrototypeOf(MaskedEnum.prototype), \"_update\", this).call(this, opts);\n                }\n            }, {\n                key: \"doValidate\",\n                value: function doValidate() {\n                    var _this = this,\n                        _get2;\n                    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                        args[_key] = arguments[_key];\n                    }\n                    return this.enum.some(function(e) {\n                        return e.indexOf(_this.unmaskedValue) >= 0;\n                    }) && (_get2 = _get(_getPrototypeOf(MaskedEnum.prototype), \"doValidate\", this)).call.apply(_get2, [this].concat(args));\n                }\n            }]);\n            return MaskedEnum;\n        }(MaskedPattern);\n    IMask.MaskedEnum = MaskedEnum;\n\n    var MaskedNumber =\n        function(_Masked) {\n            _inherits(MaskedNumber, _Masked);\n\n            function MaskedNumber(opts) {\n                _classCallCheck(this, MaskedNumber);\n                return _possibleConstructorReturn(this, _getPrototypeOf(MaskedNumber).call(this, Object.assign({}, MaskedNumber.DEFAULTS, {}, opts)));\n            }\n            _createClass(MaskedNumber, [{\n                key: \"_update\",\n                value: function _update(opts) {\n                    _get(_getPrototypeOf(MaskedNumber.prototype), \"_update\", this).call(this, opts);\n                    this._updateRegExps();\n                }\n            }, {\n                key: \"_updateRegExps\",\n                value: function _updateRegExps() {\n                    var start = '^' + (this.allowNegative ? '[+|\\\\-]?' : '');\n                    var midInput = '(0|([1-9]+\\\\d*))?';\n                    var mid = '\\\\d*';\n                    var end = (this.scale ? '(' + escapeRegExp(this.radix) + '\\\\d{0,' + this.scale + '})?' : '') + '$';\n                    this._numberRegExpInput = new RegExp(start + midInput + end);\n                    this._numberRegExp = new RegExp(start + mid + end);\n                    this._mapToRadixRegExp = new RegExp('[' + this.mapToRadix.map(escapeRegExp).join('') + ']', 'g');\n                    this._thousandsSeparatorRegExp = new RegExp(escapeRegExp(this.thousandsSeparator), 'g');\n                }\n            }, {\n                key: \"_removeThousandsSeparators\",\n                value: function _removeThousandsSeparators(value) {\n                    return value.replace(this._thousandsSeparatorRegExp, '');\n                }\n            }, {\n                key: \"_insertThousandsSeparators\",\n                value: function _insertThousandsSeparators(value) {\n                    var parts = value.split(this.radix);\n                    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, this.thousandsSeparator);\n                    return parts.join(this.radix);\n                }\n            }, {\n                key: \"doPrepare\",\n                value: function doPrepare(str) {\n                    var _get2;\n                    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                        args[_key - 1] = arguments[_key];\n                    }\n                    return (_get2 = _get(_getPrototypeOf(MaskedNumber.prototype), \"doPrepare\", this)).call.apply(_get2, [this, this._removeThousandsSeparators(str.replace(this._mapToRadixRegExp, this.radix))].concat(args));\n                }\n            }, {\n                key: \"_separatorsCount\",\n                value: function _separatorsCount(to) {\n                    var extendOnSeparators = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n                    var count = 0;\n                    for (var pos = 0; pos < to; ++pos) {\n                        if (this._value.indexOf(this.thousandsSeparator, pos) === pos) {\n                            ++count;\n                            if (extendOnSeparators) to += this.thousandsSeparator.length;\n                        }\n                    }\n                    return count;\n                }\n            }, {\n                key: \"_separatorsCountFromSlice\",\n                value: function _separatorsCountFromSlice() {\n                    var slice = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._value;\n                    return this._separatorsCount(this._removeThousandsSeparators(slice).length, true);\n                }\n            }, {\n                key: \"extractInput\",\n                value: function extractInput() {\n                    var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n                    var flags = arguments.length > 2 ? arguments[2] : undefined;\n                    var _this$_adjustRangeWit = this._adjustRangeWithSeparators(fromPos, toPos);\n                    var _this$_adjustRangeWit2 = _slicedToArray(_this$_adjustRangeWit, 2);\n                    fromPos = _this$_adjustRangeWit2[0];\n                    toPos = _this$_adjustRangeWit2[1];\n                    return this._removeThousandsSeparators(_get(_getPrototypeOf(MaskedNumber.prototype), \"extractInput\", this).call(this, fromPos, toPos, flags));\n                }\n            }, {\n                key: \"_appendCharRaw\",\n                value: function _appendCharRaw(ch) {\n                    var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                    if (!this.thousandsSeparator) return _get(_getPrototypeOf(MaskedNumber.prototype), \"_appendCharRaw\", this).call(this, ch, flags);\n                    var prevBeforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n                    var prevBeforeTailSeparatorsCount = this._separatorsCountFromSlice(prevBeforeTailValue);\n                    this._value = this._removeThousandsSeparators(this.value);\n                    var appendDetails = _get(_getPrototypeOf(MaskedNumber.prototype), \"_appendCharRaw\", this).call(this, ch, flags);\n                    this._value = this._insertThousandsSeparators(this._value);\n                    var beforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n                    var beforeTailSeparatorsCount = this._separatorsCountFromSlice(beforeTailValue);\n                    appendDetails.tailShift += (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length;\n                    appendDetails.skip = !appendDetails.rawInserted && ch === this.thousandsSeparator;\n                    return appendDetails;\n                }\n            }, {\n                key: \"_findSeparatorAround\",\n                value: function _findSeparatorAround(pos) {\n                    if (this.thousandsSeparator) {\n                        var searchFrom = pos - this.thousandsSeparator.length + 1;\n                        var separatorPos = this.value.indexOf(this.thousandsSeparator, searchFrom);\n                        if (separatorPos <= pos) return separatorPos;\n                    }\n                    return -1;\n                }\n            }, {\n                key: \"_adjustRangeWithSeparators\",\n                value: function _adjustRangeWithSeparators(from, to) {\n                    var separatorAroundFromPos = this._findSeparatorAround(from);\n                    if (separatorAroundFromPos >= 0) from = separatorAroundFromPos;\n                    var separatorAroundToPos = this._findSeparatorAround(to);\n                    if (separatorAroundToPos >= 0) to = separatorAroundToPos + this.thousandsSeparator.length;\n                    return [from, to];\n                }\n            }, {\n                key: \"remove\",\n                value: function remove() {\n                    var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                    var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n                    var _this$_adjustRangeWit3 = this._adjustRangeWithSeparators(fromPos, toPos);\n                    var _this$_adjustRangeWit4 = _slicedToArray(_this$_adjustRangeWit3, 2);\n                    fromPos = _this$_adjustRangeWit4[0];\n                    toPos = _this$_adjustRangeWit4[1];\n                    var valueBeforePos = this.value.slice(0, fromPos);\n                    var valueAfterPos = this.value.slice(toPos);\n                    var prevBeforeTailSeparatorsCount = this._separatorsCount(valueBeforePos.length);\n                    this._value = this._insertThousandsSeparators(this._removeThousandsSeparators(valueBeforePos + valueAfterPos));\n                    var beforeTailSeparatorsCount = this._separatorsCountFromSlice(valueBeforePos);\n                    return new ChangeDetails({\n                        tailShift: (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length\n                    });\n                }\n            }, {\n                key: \"nearestInputPos\",\n                value: function nearestInputPos(cursorPos, direction) {\n                    if (!this.thousandsSeparator) return cursorPos;\n                    switch (direction) {\n                        case DIRECTION.NONE:\n                        case DIRECTION.LEFT:\n                        case DIRECTION.FORCE_LEFT:\n                            {\n                                var separatorAtLeftPos = this._findSeparatorAround(cursorPos - 1);\n                                if (separatorAtLeftPos >= 0) {\n                                    var separatorAtLeftEndPos = separatorAtLeftPos + this.thousandsSeparator.length;\n                                    if (cursorPos < separatorAtLeftEndPos || this.value.length <= separatorAtLeftEndPos || direction === DIRECTION.FORCE_LEFT) {\n                                        return separatorAtLeftPos;\n                                    }\n                                }\n                                break;\n                            }\n                        case DIRECTION.RIGHT:\n                        case DIRECTION.FORCE_RIGHT:\n                            {\n                                var separatorAtRightPos = this._findSeparatorAround(cursorPos);\n                                if (separatorAtRightPos >= 0) {\n                                    return separatorAtRightPos + this.thousandsSeparator.length;\n                                }\n                            }\n                    }\n                    return cursorPos;\n                }\n            }, {\n                key: \"doValidate\",\n                value: function doValidate(flags) {\n                    var regexp = flags.input ? this._numberRegExpInput : this._numberRegExp;\n                    var valid = regexp.test(this._removeThousandsSeparators(this.value));\n                    if (valid) {\n                        var number = this.number;\n                        valid = valid && !isNaN(number) && (\n                            this.min == null || this.min >= 0 || this.min <= this.number) && (\n                            this.max == null || this.max <= 0 || this.number <= this.max);\n                    }\n                    return valid && _get(_getPrototypeOf(MaskedNumber.prototype), \"doValidate\", this).call(this, flags);\n                }\n            }, {\n                key: \"doCommit\",\n                value: function doCommit() {\n                    if (this.value) {\n                        var number = this.number;\n                        var validnum = number;\n                        if (this.min != null) validnum = Math.max(validnum, this.min);\n                        if (this.max != null) validnum = Math.min(validnum, this.max);\n                        if (validnum !== number) this.unmaskedValue = String(validnum);\n                        var formatted = this.value;\n                        if (this.normalizeZeros) formatted = this._normalizeZeros(formatted);\n                        if (this.padFractionalZeros) formatted = this._padFractionalZeros(formatted);\n                        this._value = formatted;\n                    }\n                    _get(_getPrototypeOf(MaskedNumber.prototype), \"doCommit\", this).call(this);\n                }\n            }, {\n                key: \"_normalizeZeros\",\n                value: function _normalizeZeros(value) {\n                    var parts = this._removeThousandsSeparators(value).split(this.radix);\n                    parts[0] = parts[0].replace(/^(\\D*)(0*)(\\d*)/, function(match, sign, zeros, num) {\n                        return sign + num;\n                    });\n                    if (value.length && !/\\d$/.test(parts[0])) parts[0] = parts[0] + '0';\n                    if (parts.length > 1) {\n                        parts[1] = parts[1].replace(/0*$/, '');\n                        if (!parts[1].length) parts.length = 1;\n                    }\n                    return this._insertThousandsSeparators(parts.join(this.radix));\n                }\n            }, {\n                key: \"_padFractionalZeros\",\n                value: function _padFractionalZeros(value) {\n                    if (!value) return value;\n                    var parts = value.split(this.radix);\n                    if (parts.length < 2) parts.push('');\n                    parts[1] = parts[1].padEnd(this.scale, '0');\n                    return parts.join(this.radix);\n                }\n            }, {\n                key: \"unmaskedValue\",\n                get: function get() {\n                    return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix, '.');\n                },\n                set: function set(unmaskedValue) {\n                    _set(_getPrototypeOf(MaskedNumber.prototype), \"unmaskedValue\", unmaskedValue.replace('.', this.radix), this, true);\n                }\n            }, {\n                key: \"typedValue\",\n                get: function get() {\n                    return Number(this.unmaskedValue);\n                },\n                set: function set(n) {\n                    _set(_getPrototypeOf(MaskedNumber.prototype), \"unmaskedValue\", String(n), this, true);\n                }\n            }, {\n                key: \"number\",\n                get: function get() {\n                    return this.typedValue;\n                },\n                set: function set(number) {\n                    this.typedValue = number;\n                }\n            }, {\n                key: \"allowNegative\",\n                get: function get() {\n                    return this.signed || this.min != null && this.min < 0 || this.max != null && this.max < 0;\n                }\n            }]);\n            return MaskedNumber;\n        }(Masked);\n    MaskedNumber.DEFAULTS = {\n        radix: ',',\n        thousandsSeparator: '',\n        mapToRadix: ['.'],\n        scale: 2,\n        signed: false,\n        normalizeZeros: true,\n        padFractionalZeros: false\n    };\n    IMask.MaskedNumber = MaskedNumber;\n\n    var MaskedFunction =\n        function(_Masked) {\n            _inherits(MaskedFunction, _Masked);\n\n            function MaskedFunction() {\n                _classCallCheck(this, MaskedFunction);\n                return _possibleConstructorReturn(this, _getPrototypeOf(MaskedFunction).apply(this, arguments));\n            }\n            _createClass(MaskedFunction, [{\n                key: \"_update\",\n                value: function _update(opts) {\n                    if (opts.mask) opts.validate = opts.mask;\n                    _get(_getPrototypeOf(MaskedFunction.prototype), \"_update\", this).call(this, opts);\n                }\n            }]);\n            return MaskedFunction;\n        }(Masked);\n    IMask.MaskedFunction = MaskedFunction;\n\n    var MaskedDynamic =\n        function(_Masked) {\n            _inherits(MaskedDynamic, _Masked);\n\n            function MaskedDynamic(opts) {\n                var _this;\n                _classCallCheck(this, MaskedDynamic);\n                _this = _possibleConstructorReturn(this, _getPrototypeOf(MaskedDynamic).call(this, Object.assign({}, MaskedDynamic.DEFAULTS, {}, opts)));\n                _this.currentMask = null;\n                return _this;\n            }\n            _createClass(MaskedDynamic, [{\n                key: \"_update\",\n                value: function _update(opts) {\n                    _get(_getPrototypeOf(MaskedDynamic.prototype), \"_update\", this).call(this, opts);\n                    if ('mask' in opts) {\n                        this.compiledMasks = Array.isArray(opts.mask) ? opts.mask.map(function(m) {\n                            return createMask(m);\n                        }) : [];\n                    }\n                }\n            }, {\n                key: \"_appendCharRaw\",\n                value: function _appendCharRaw() {\n                    var details = this._applyDispatch.apply(this, arguments);\n                    if (this.currentMask) {\n                        var _this$currentMask;\n                        details.aggregate((_this$currentMask = this.currentMask)._appendChar.apply(_this$currentMask, arguments));\n                    }\n                    return details;\n                }\n            }, {\n                key: \"_applyDispatch\",\n                value: function _applyDispatch() {\n                    var appended = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n                    var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                    var prevValueBeforeTail = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._value : this.value;\n                    var inputValue = this.rawInputValue;\n                    var insertValue = flags.tail && flags._beforeTailState != null ?\n                        flags._beforeTailState._rawInputValue : inputValue;\n                    var tailValue = inputValue.slice(insertValue.length);\n                    var prevMask = this.currentMask;\n                    var details = new ChangeDetails();\n                    var prevMaskState = prevMask && prevMask.state;\n                    this.currentMask = this.doDispatch(appended, Object.assign({}, flags));\n                    if (this.currentMask) {\n                        if (this.currentMask !== prevMask) {\n                            this.currentMask.reset();\n                            var d = this.currentMask.append(insertValue, {\n                                raw: true\n                            });\n                            details.tailShift = d.inserted.length - prevValueBeforeTail.length;\n                            if (tailValue) {\n                                details.tailShift += this.currentMask.append(tailValue, {\n                                    raw: true,\n                                    tail: true\n                                }).tailShift;\n                            }\n                        } else {\n                            this.currentMask.state = prevMaskState;\n                        }\n                    }\n                    return details;\n                }\n            }, {\n                key: \"_appendPlaceholder\",\n                value: function _appendPlaceholder() {\n                    var details = this._applyDispatch.apply(this, arguments);\n                    if (this.currentMask) {\n                        details.aggregate(this.currentMask._appendPlaceholder());\n                    }\n                    return details;\n                }\n            }, {\n                key: \"doDispatch\",\n                value: function doDispatch(appended) {\n                    var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                    return this.dispatch(appended, this, flags);\n                }\n            }, {\n                key: \"doValidate\",\n                value: function doValidate() {\n                    var _get2, _this$currentMask2;\n                    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                        args[_key] = arguments[_key];\n                    }\n                    return (_get2 = _get(_getPrototypeOf(MaskedDynamic.prototype), \"doValidate\", this)).call.apply(_get2, [this].concat(args)) && (!this.currentMask || (_this$currentMask2 = this.currentMask).doValidate.apply(_this$currentMask2, args));\n                }\n            }, {\n                key: \"reset\",\n                value: function reset() {\n                    if (this.currentMask) this.currentMask.reset();\n                    this.compiledMasks.forEach(function(m) {\n                        return m.reset();\n                    });\n                }\n            }, {\n                key: \"remove\",\n                value: function remove() {\n                    var details = new ChangeDetails();\n                    if (this.currentMask) {\n                        var _this$currentMask3;\n                        details.aggregate((_this$currentMask3 = this.currentMask).remove.apply(_this$currentMask3, arguments))\n                            .aggregate(this._applyDispatch());\n                    }\n                    return details;\n                }\n            }, {\n                key: \"extractInput\",\n                value: function extractInput() {\n                    var _this$currentMask4;\n                    return this.currentMask ? (_this$currentMask4 = this.currentMask).extractInput.apply(_this$currentMask4, arguments) : '';\n                }\n            }, {\n                key: \"extractTail\",\n                value: function extractTail() {\n                    var _this$currentMask5, _get3;\n                    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                        args[_key2] = arguments[_key2];\n                    }\n                    return this.currentMask ? (_this$currentMask5 = this.currentMask).extractTail.apply(_this$currentMask5, args) : (_get3 = _get(_getPrototypeOf(MaskedDynamic.prototype), \"extractTail\", this)).call.apply(_get3, [this].concat(args));\n                }\n            }, {\n                key: \"doCommit\",\n                value: function doCommit() {\n                    if (this.currentMask) this.currentMask.doCommit();\n                    _get(_getPrototypeOf(MaskedDynamic.prototype), \"doCommit\", this).call(this);\n                }\n            }, {\n                key: \"nearestInputPos\",\n                value: function nearestInputPos() {\n                    var _this$currentMask6, _get4;\n                    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                        args[_key3] = arguments[_key3];\n                    }\n                    return this.currentMask ? (_this$currentMask6 = this.currentMask).nearestInputPos.apply(_this$currentMask6, args) : (_get4 = _get(_getPrototypeOf(MaskedDynamic.prototype), \"nearestInputPos\", this)).call.apply(_get4, [this].concat(args));\n                }\n            }, {\n                key: \"value\",\n                get: function get() {\n                    return this.currentMask ? this.currentMask.value : '';\n                },\n                set: function set(value) {\n                    _set(_getPrototypeOf(MaskedDynamic.prototype), \"value\", value, this, true);\n                }\n            }, {\n                key: \"unmaskedValue\",\n                get: function get() {\n                    return this.currentMask ? this.currentMask.unmaskedValue : '';\n                },\n                set: function set(unmaskedValue) {\n                    _set(_getPrototypeOf(MaskedDynamic.prototype), \"unmaskedValue\", unmaskedValue, this, true);\n                }\n            }, {\n                key: \"typedValue\",\n                get: function get() {\n                    return this.currentMask ? this.currentMask.typedValue : '';\n                },\n                set: function set(value) {\n                    var unmaskedValue = String(value);\n                    if (this.currentMask) {\n                        this.currentMask.typedValue = value;\n                        unmaskedValue = this.currentMask.unmaskedValue;\n                    }\n                    this.unmaskedValue = unmaskedValue;\n                }\n            }, {\n                key: \"isComplete\",\n                get: function get() {\n                    return !!this.currentMask && this.currentMask.isComplete;\n                }\n            }, {\n                key: \"state\",\n                get: function get() {\n                    return Object.assign({}, _get(_getPrototypeOf(MaskedDynamic.prototype), \"state\", this), {\n                        _rawInputValue: this.rawInputValue,\n                        compiledMasks: this.compiledMasks.map(function(m) {\n                            return m.state;\n                        }),\n                        currentMaskRef: this.currentMask,\n                        currentMask: this.currentMask && this.currentMask.state\n                    });\n                },\n                set: function set(state) {\n                    var compiledMasks = state.compiledMasks,\n                        currentMaskRef = state.currentMaskRef,\n                        currentMask = state.currentMask,\n                        maskedState = _objectWithoutProperties(state, [\"compiledMasks\", \"currentMaskRef\", \"currentMask\"]);\n                    this.compiledMasks.forEach(function(m, mi) {\n                        return m.state = compiledMasks[mi];\n                    });\n                    if (currentMaskRef != null) {\n                        this.currentMask = currentMaskRef;\n                        this.currentMask.state = currentMask;\n                    }\n                    _set(_getPrototypeOf(MaskedDynamic.prototype), \"state\", maskedState, this, true);\n                }\n            }, {\n                key: \"overwrite\",\n                get: function get() {\n                    return this.currentMask ? this.currentMask.overwrite : _get(_getPrototypeOf(MaskedDynamic.prototype), \"overwrite\", this);\n                },\n                set: function set(overwrite) {\n                    console.warn('\"overwrite\" option is not available in dynamic mask, use this option in siblings');\n                }\n            }]);\n            return MaskedDynamic;\n        }(Masked);\n    MaskedDynamic.DEFAULTS = {\n        dispatch: function dispatch(appended, masked, flags) {\n            if (!masked.compiledMasks.length) return;\n            var inputValue = masked.rawInputValue;\n            var inputs = masked.compiledMasks.map(function(m, index) {\n                m.reset();\n                m.append(inputValue, {\n                    raw: true\n                });\n                m.append(appended, flags);\n                var weight = m.rawInputValue.length;\n                return {\n                    weight: weight,\n                    index: index\n                };\n            });\n            inputs.sort(function(i1, i2) {\n                return i2.weight - i1.weight;\n            });\n            return masked.compiledMasks[inputs[0].index];\n        }\n    };\n    IMask.MaskedDynamic = MaskedDynamic;\n\n    var PIPE_TYPE = {\n        MASKED: 'value',\n        UNMASKED: 'unmaskedValue',\n        TYPED: 'typedValue'\n    };\n\n    function createPipe(mask) {\n        var from = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : PIPE_TYPE.MASKED;\n        var to = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : PIPE_TYPE.MASKED;\n        var masked = createMask(mask);\n        return function(value) {\n            return masked.runIsolated(function(m) {\n                m[from] = value;\n                return m[to];\n            });\n        };\n    }\n\n    function pipe(value) {\n        for (var _len = arguments.length, pipeArgs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            pipeArgs[_key - 1] = arguments[_key];\n        }\n        return createPipe.apply(void 0, pipeArgs)(value);\n    }\n    IMask.PIPE_TYPE = PIPE_TYPE;\n    IMask.createPipe = createPipe;\n    IMask.pipe = pipe;\n\n    try {\n        globalThis.IMask = IMask;\n    } catch (e) {}\n\n    var maskElementList = [].slice.call(document.querySelectorAll('[data-mask]'));\n    maskElementList.map(function(maskEl) {\n        return new IMask(maskEl, {\n            mask: maskEl.dataset.mask,\n            lazy: maskEl.dataset['mask-visible'] === 'true'\n        });\n    });\n\n    var selectors = '.dropdown, .dropup, .dropend, .dropstart',\n        dropdowns = document.querySelectorAll(selectors);\n    var currentTarget = undefined;\n    dropdowns.forEach(function(dropdown) {\n        dropdown.addEventListener('mousedown', function(e) {\n            e.stopPropagation();\n            if (e.target.dataset.bsToggle && e.target.dataset.bsToggle === 'dropdown') {\n                currentTarget = e.currentTarget;\n            }\n        });\n        dropdown.addEventListener('hide.bs.dropdown', function(e) {\n            e.stopPropagation();\n            var parent = currentTarget ? currentTarget.parentElement.closest(selectors) : undefined;\n            if (parent && parent === dropdown) {\n                e.preventDefault();\n            }\n            currentTarget = undefined;\n        });\n    });\n\n    (function() {\n        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"tooltip\"]'));\n        tooltipTriggerList.map(function(tooltipTriggerEl) {\n            var _tooltipTriggerEl$get;\n            var options = {\n                delay: {\n                    show: 50,\n                    hide: 50\n                },\n                html: true,\n                placement: (_tooltipTriggerEl$get = tooltipTriggerEl.getAttribute('data-bs-placement')) !== null && _tooltipTriggerEl$get !== void 0 ? _tooltipTriggerEl$get : 'auto'\n            };\n            return new bootstrap.Tooltip(tooltipTriggerEl, options);\n        });\n        var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"popover\"]'));\n        popoverTriggerList.map(function(popoverTriggerEl) {\n            var _popoverTriggerEl$get, _popoverTriggerEl$get2;\n            var options = {\n                delay: {\n                    show: 50,\n                    hide: 50\n                },\n                html: (_popoverTriggerEl$get = popoverTriggerEl.getAttribute('data-bs-html')) !== null && _popoverTriggerEl$get !== void 0 ? _popoverTriggerEl$get : false,\n                placement: (_popoverTriggerEl$get2 = popoverTriggerEl.getAttribute('data-bs-placement')) !== null && _popoverTriggerEl$get2 !== void 0 ? _popoverTriggerEl$get2 : 'auto'\n            };\n            return new bootstrap.Popover(popoverTriggerEl, options);\n        });\n        var dropdownTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"dropdown\"]'));\n        dropdownTriggerList.map(function(dropdownTriggerEl) {\n            return new bootstrap.Dropdown(dropdownTriggerEl);\n        });\n        var switchesTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"switch-icon\"]'));\n        switchesTriggerList.map(function(switchTriggerEl) {\n            switchTriggerEl.addEventListener('click', function(e) {\n                e.stopPropagation();\n                switchTriggerEl.classList.toggle('active');\n            });\n        });\n    })();\n\n})));"],"names":["factory","define","amd","module","autosize","exports","map","Map","keys","values","has","key","indexOf","get","set","value","push","delete","_delete","index","splice","createEvent","name","Event","bubbles","e","evt","document","initEvent","assign","ta","nodeName","heightOffset","clientWidth","cachedHeight","init","style","window","getComputedStyle","resize","boxSizing","parseFloat","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","isNaN","update","changeOverflow","width","offsetWidth","overflowY","getParentOverflows","el","arr","parentNode","Element","scrollTop","node","scrollHeight","overflows","docTop","documentElement","height","forEach","styleHeight","Math","round","computed","actualHeight","offsetHeight","dispatchEvent","err","pageResize","destroy","removeEventListener","Object","bind","overflowX","wordWrap","addEventListener","methods","options","Array","prototype","call","length","x","default","fn","elements","querySelectorAll","_typeof","obj","Symbol","iterator","constructor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_objectWithoutProperties","source","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_superPropBase","object","property","hasOwnProperty","_get","receiver","Reflect","base","desc","getOwnPropertyDescriptor","_set","isStrict","Error","_slicedToArray","isArray","_arrayWithHoles","toString","_arr","_n","_d","_e","undefined","_s","_i","next","done","_iterableToArrayLimit","_nonIterableRest","isString","str","String","element","DIRECTION","escapeRegExp","replace","ActionDetails","min","this","cursorPos","oldSelection","start","startChangePos","substr","insertedCount","max","end","oldValue","removedCount","substring","slice","ChangeDetails","details","rawInserted","skip","inserted","tailShift","ContinuousTailDetails","tail","masked","append","aggregate","_appendPlaceholder","pos","from","shiftChar","stop","state","arguments","IMask","opts","InputMask","Masked","withValueRefresh","_update","_value","reset","input","doCommit","fromPos","toPos","extractInput","appendTo","ch","flags","doPrepare","consistentTail","beforeTailState","tailDetails","appended","checkTail","consistentState","_appendCharRaw","doValidate","overwrite","shiftBefore","appendTail","_beforeTailState","ci","_appendChar","_refreshing","isInitialized","rawInput","rawInputValue","ret","_isolated","prepare","validate","parent","commit","format","parse","deleteCount","removeDirection","tailPos","extractTail","nearestInputPos","remove","resolve","doParse","doFormat","raw","DEFAULTS","maskedClass","mask","RegExp","MaskedRegExp","MaskedPattern","Date","MaskedDate","Number","MaskedNumber","MaskedDynamic","Function","MaskedFunction","console","warn","createMask","MaskedClass","v","DEFAULT_INPUT_DEFINITIONS","0","a","*","PatternInputDefinition","_isFilled","isOptional","lazy","placeholderChar","Boolean","_this$masked","apply","_this$masked2","_this$masked3","direction","maxPos","boundPos","isComplete","_this$masked4","_this$parent","unmaskedValue","blockOpts","PatternFixedDefinition","_isRawInput","isResolved","char","isUnmasking","ChunksTailDetails","chunks","join","tailChunk","firstTailChunk","lastChunk","extendLast","extend","shift","blockIndex","remainChars","chunk","lastBlockIter","_mapPosToBlock","chunkBlock","_stops","_blocks","chunkShiftPos","c","cstate","search","definitions","_rebuildMask","_this","defs","_maskedBlocks","pattern","unmaskingBlock","optionalBlock","blocks","bNames","filter","bName","sort","b","maskedBlock","_isInput","STOP_CHAR","ESCAPE_CHAR","def","blockIter","bi","_block","blockDetails","_this2","chunkTail","_forEachBlocksInRange","bFromPos","bToPos","blockChunk","_findStopBefore","_blockStartPos","_","stopBefore","si","toBlockIndex","_this3","startBlockIter","startBlockIndex","endBlockIndex","args","bDetails","accVal","_block2","blockStartPos","offset","reduce","fromBlockIter","toBlockIter","isSameBlock","fromBlockStartPos","fromBlockEndPos","removeDetails","beginBlockData","beginBlockOffset","beginBlockIndex","beginBlock","beginBlockCursorPos","forceDirection","cursorAtRight","searchBlockIndex","blockIndexAtLeft","blockAtLeft","blockInputPos","blockAtRight","_blockInputPos","_bi","_block3","_blockInputPos2","firstFilledBlockIndexAtRight","_bi2","filledBlock","_blockInputPos3","firstEmptyInputBlockIndex","firstFilledInputBlockIndex","_bi3","_block4","_blockInputPos4","_bi4","_block5","_blockInputPos5","blockAlignedPos","block","isInput","_bi5","_block6","_blockInputPos6","firstInputBlockAlignedIndex","firstInputBlockAlignedPos","_bi6","_block7","_blockInputPos7","_bi7","_block8","_blockInputPos8","_bi8","_block9","_blockInputPos9","alignedPos","maskedBlocks","_this4","indices","gi","maskedState","every","InputDefinition","FixedDefinition","MaskedRange","to","maxLength","fromStr","padStart","toStr","sameCharsCount","repeat","minstr","maxstr","_ref2","match","placeholder","num","padEnd","autofix","val","prepStr","nextVal","_this$boundaries2","boundaries","_get2","_matchFrom","_this$boundaries4","_len","_key","concat","GET_DEFAULT_BLOCKS","Y","getFullYear","m","getMonth","d","getDate","bk","date","isDateExist","typedValue","_str$split2","split","day","month","year","MaskElement","selectionStart","selectionEnd","_unsafeSelect","_unsafeSelectionStart","_unsafeSelectionEnd","HTMLMaskElement","setSelectionRange","handlers","event","_toggleEventHandler","EVENTS_MAP","_handlers","handler","getRootNode","rootElement","activeElement","selectionChange","drop","click","focus","HTMLContenteditableMaskElement","range","root","selection","createRange","setStart","firstChild","setEnd","lastChild","getSelection","removeAllRanges","addRange","anchorOffset","textContent","bindEvents","_saveSelection","_onInput","_onDrop","_onClick","_onFocus","_onChange","unbindEvents","ev","listeners","_listeners","l","_selection","newUnmaskedValue","newValue","isChanged","_unmaskedValue","_fireChangeEvents","restOpts","updateMask","maskEquals","updateOpts","objectIncludes","arrA","arrB","dateA","dateB","getTime","regexpA","regexpB","updateOptions","updateControl","_delayUpdateCursor","_abortUpdateCursor","_changingCursorPos","_cursorChanging","setTimeout","_fireEvent","_inputEvent","clearTimeout","alignCursor","hIndex","updateValue","oldRawValue","removed","updateCursor","preventDefault","stopPropagation","alignCursorFriendly","_unbindEvents","isActive","select","isContentEditable","tagName","_bindEvents","MaskedEnum","enum","some","_updateRegExps","allowNegative","scale","radix","_numberRegExpInput","_numberRegExp","_mapToRadixRegExp","mapToRadix","_thousandsSeparatorRegExp","thousandsSeparator","parts","_removeThousandsSeparators","extendOnSeparators","count","_separatorsCount","_this$_adjustRangeWit2","_adjustRangeWithSeparators","prevBeforeTailValue","prevBeforeTailSeparatorsCount","_separatorsCountFromSlice","appendDetails","_insertThousandsSeparators","beforeTailValue","beforeTailSeparatorsCount","searchFrom","separatorPos","separatorAroundFromPos","_findSeparatorAround","separatorAroundToPos","_this$_adjustRangeWit4","valueBeforePos","valueAfterPos","separatorAtLeftPos","separatorAtLeftEndPos","separatorAtRightPos","number","valid","test","validnum","formatted","normalizeZeros","_normalizeZeros","padFractionalZeros","_padFractionalZeros","sign","zeros","n","signed","compiledMasks","_this$currentMask","_applyDispatch","currentMask","prevValueBeforeTail","inputValue","insertValue","_rawInputValue","tailValue","prevMask","prevMaskState","doDispatch","dispatch","_this$currentMask2","_this$currentMask3","_this$currentMask4","_this$currentMask5","_get3","_len2","_key2","_this$currentMask6","_get4","_len3","_key3","currentMaskRef","mi","inputs","weight","i1","i2","PIPE_TYPE","MASKED","UNMASKED","TYPED","createPipe","runIsolated","pipe","pipeArgs","globalThis","maskEl","dataset","selectors","dropdowns","currentTarget","dropdown","bsToggle","parentElement","closest","tooltipTriggerEl","_tooltipTriggerEl$get","delay","show","hide","html","placement","getAttribute","bootstrap","Tooltip","popoverTriggerEl","_popoverTriggerEl$get","_popoverTriggerEl$get2","Popover","dropdownTriggerEl","Dropdown","switchTriggerEl","classList","toggle"],"mappings":"CAQC,SAASA,GACY,mBAAXC,QAAyBA,OAAOC,IAAMD,OAAOD,GAChDA,IAFR,CAGE,wBAeE,IATQG,EASJC,GAAgC,SAASD,EAAQE,IAK9B,SAASF,EAAQE,GAChC,IAAIC,SAAaC,MAAQ,WAAa,IAAIA,IAAQ,WAC9C,IAAIC,EAAO,GACX,IAAIC,EAAS,GACb,MAAO,CACHC,IAAK,SAASA,EAAIC,GACd,OAAOH,EAAKI,QAAQD,IAAQ,GAEhCE,IAAK,SAASA,EAAIF,GACd,OAAOF,EAAOD,EAAKI,QAAQD,KAE/BG,IAAK,SAASA,EAAIH,EAAKI,GACnB,GAAIP,EAAKI,QAAQD,MAAU,EAAG,CAC1BH,EAAKQ,KAAKL,GACVF,EAAOO,KAAKD,KAGpBE,OAAQ,SAASC,EAAQP,GACrB,IAAIQ,EAAQX,EAAKI,QAAQD,GACzB,GAAIQ,GAAS,EAAG,CACZX,EAAKY,OAAOD,EAAO,GACnBV,EAAOW,OAAOD,EAAO,MApBa,GAyB9CE,EAAc,SAASA,EAAYC,GACnC,OAAO,IAAIC,MAAMD,EAAM,CAAEE,QAAS,QAEtC,IACI,IAAID,MAAM,QACZ,MAAOE,GACLJ,EAAc,SAASA,EAAYC,GAC/B,IAAII,EAAMC,SAASN,YAAY,SAC/BK,EAAIE,UAAUN,EAAM,KAAM,OAC1B,OAAOI,GAIf,SAASG,EAAOC,GACZ,IAAKA,IAAOA,EAAGC,UAAYD,EAAGC,WAAa,YAAczB,EAAII,IAAIoB,GAAK,OACtE,IAAIE,EAAe,KACnB,IAAIC,EAAc,KAClB,IAAIC,EAAe,KAEnB,SAASC,IACL,IAAIC,EAAQC,OAAOC,iBAAiBR,EAAI,MACxC,GAAIM,EAAMG,SAAW,WAAY,CAC7BT,EAAGM,MAAMG,OAAS,YACf,GAAIH,EAAMG,SAAW,OAAQ,CAChCT,EAAGM,MAAMG,OAAS,aAEtB,GAAIH,EAAMI,YAAc,cAAe,CACnCR,IAAiBS,WAAWL,EAAMM,YAAcD,WAAWL,EAAMO,oBAC9D,CACHX,EAAeS,WAAWL,EAAMQ,gBAAkBH,WAAWL,EAAMS,mBAEvE,GAAIC,MAAMd,GAAe,CACrBA,EAAe,EAEnBe,IAGJ,SAASC,EAAejC,GACpB,CACI,IAAIkC,EAAQnB,EAAGM,MAAMa,MACrBnB,EAAGM,MAAMa,MAAQ,MACjBnB,EAAGoB,YACHpB,EAAGM,MAAMa,MAAQA,EAErBnB,EAAGM,MAAMe,UAAYpC,EAGzB,SAASqC,EAAmBC,GACxB,IAAIC,EAAM,GACV,MAAOD,GAAMA,EAAGE,YAAcF,EAAGE,sBAAsBC,QAAS,CAC5D,GAAIH,EAAGE,WAAWE,UAAW,CACzBH,EAAItC,KAAK,CACL0C,KAAML,EAAGE,WACTE,UAAWJ,EAAGE,WAAWE,YAGjCJ,EAAKA,EAAGE,WAEZ,OAAOD,EAGX,SAASf,IACL,GAAIT,EAAG6B,eAAiB,EAAG,CACvB,OAEJ,IAAIC,EAAYR,EAAmBtB,GACnC,IAAI+B,EAASlC,SAASmC,iBAAmBnC,SAASmC,gBAAgBL,UAClE3B,EAAGM,MAAM2B,OAAS,GAClBjC,EAAGM,MAAM2B,OAASjC,EAAG6B,aAAe3B,EAAe,KACnDC,EAAcH,EAAGG,YACjB2B,EAAUI,QAAQ,SAASX,GACvBA,EAAGK,KAAKD,UAAYJ,EAAGI,YAE3B,GAAII,EAAQ,CACRlC,SAASmC,gBAAgBL,UAAYI,GAI7C,SAASd,IACLR,IACA,IAAI0B,EAAcC,KAAKC,MAAM1B,WAAWX,EAAGM,MAAM2B,SACjD,IAAIK,EAAW/B,OAAOC,iBAAiBR,EAAI,MAC3C,IAAIuC,EAAeD,EAAS5B,YAAc,cAAgB0B,KAAKC,MAAM1B,WAAW2B,EAASL,SAAWjC,EAAGwC,aACvG,GAAID,EAAeJ,EAAa,CAC5B,GAAIG,EAASjB,YAAc,SAAU,CACjCH,EAAe,UACfT,IACA8B,EAAeD,EAAS5B,YAAc,cAAgB0B,KAAKC,MAAM1B,WAAWJ,OAAOC,iBAAiBR,EAAI,MAAMiC,SAAWjC,EAAGwC,kBAE7H,CACH,GAAIF,EAASjB,YAAc,SAAU,CACjCH,EAAe,UACfT,IACA8B,EAAeD,EAAS5B,YAAc,cAAgB0B,KAAKC,MAAM1B,WAAWJ,OAAOC,iBAAiBR,EAAI,MAAMiC,SAAWjC,EAAGwC,cAGpI,GAAIpC,IAAiBmC,EAAc,CAC/BnC,EAAemC,EACf,IAAI3C,EAAML,EAAY,oBACtB,IACIS,EAAGyC,cAAc7C,GACnB,MAAO8C,MAGjB,IAAIC,EAAa,SAASA,IACtB,GAAI3C,EAAGG,cAAgBA,EAAa,CAChCc,MAGR,IAAI2B,EAAU,SAAStC,GACnBC,OAAOsC,oBAAoB,SAAUF,EAAY,OACjD3C,EAAG6C,oBAAoB,QAAS5B,EAAQ,OACxCjB,EAAG6C,oBAAoB,QAAS5B,EAAQ,OACxCjB,EAAG6C,oBAAoB,mBAAoBD,EAAS,OACpD5C,EAAG6C,oBAAoB,kBAAmB5B,EAAQ,OAClD6B,OAAOpE,KAAK4B,GAAO4B,QAAQ,SAASrD,GAChCmB,EAAGM,MAAMzB,GAAOyB,EAAMzB,KAE1BL,EAAIW,OAAOa,IACb+C,KAAK/C,EAAI,CACPiC,OAAQjC,EAAGM,MAAM2B,OACjBxB,OAAQT,EAAGM,MAAMG,OACjBY,UAAWrB,EAAGM,MAAMe,UACpB2B,UAAWhD,EAAGM,MAAM0C,UACpBC,SAAUjD,EAAGM,MAAM2C,WAEvBjD,EAAGkD,iBAAiB,mBAAoBN,EAAS,OACjD,GAAI,qBAAsB5C,GAAM,YAAaA,EAAI,CAC7CA,EAAGkD,iBAAiB,QAASjC,EAAQ,OAEzCV,OAAO2C,iBAAiB,SAAUP,EAAY,OAC9C3C,EAAGkD,iBAAiB,QAASjC,EAAQ,OACrCjB,EAAGkD,iBAAiB,kBAAmBjC,EAAQ,OAC/CjB,EAAGM,MAAM0C,UAAY,SACrBhD,EAAGM,MAAM2C,SAAW,aACpBzE,EAAIQ,IAAIgB,EAAI,CACR4C,QAASA,EACT3B,OAAQA,IAEZZ,IAGJ,SAASuC,EAAQ5C,GACb,IAAImD,EAAU3E,EAAIO,IAAIiB,GACtB,GAAImD,EAAS,CACTA,EAAQP,WAIhB,SAAS3B,EAAOjB,GACZ,IAAImD,EAAU3E,EAAIO,IAAIiB,GACtB,GAAImD,EAAS,CACTA,EAAQlC,UAGhB,IAAI3C,EAAW,KACf,UAAWiC,SAAW,oBAAsBA,OAAOC,mBAAqB,WAAY,CAChFlC,EAAW,SAASA,EAASiD,GACzB,OAAOA,GAEXjD,EAASsE,QAAU,SAASrB,GACxB,OAAOA,GAEXjD,EAAS2C,OAAS,SAASM,GACvB,OAAOA,OAER,CACHjD,EAAW,SAASA,EAASiD,EAAI6B,GAC7B,GAAI7B,EAAI,CACJ8B,MAAMC,UAAUpB,QAAQqB,KAAKhC,EAAGiC,OAASjC,EAAK,CAACA,GAAK,SAASkC,GACzD,OAAO1D,EAAO0D,KAGtB,OAAOlC,GAEXjD,EAASsE,QAAU,SAASrB,GACxB,GAAIA,EAAI,CACJ8B,MAAMC,UAAUpB,QAAQqB,KAAKhC,EAAGiC,OAASjC,EAAK,CAACA,GAAKqB,GAExD,OAAOrB,GAEXjD,EAAS2C,OAAS,SAASM,GACvB,GAAIA,EAAI,CACJ8B,MAAMC,UAAUpB,QAAQqB,KAAKhC,EAAGiC,OAASjC,EAAK,CAACA,GAAKN,GAExD,OAAOM,GAGfhD,EAAQmF,QAAUpF,EAClBD,EAAOE,QAAUA,EAAQ,WAzNrBL,CAAQG,EAAQE,GAXjBoF,CADHtF,EAAS,CAAEE,QAAS,IACNF,EAAOE,SAAUF,EAAOE,SAwO1CqF,EAAW/D,SAASgE,iBAAiB,+BAOzC,SAASC,EAAQC,GAWb,OARID,EADkB,mBAAXE,QAAoD,iBAApBA,OAAOC,SACpC,SAASF,GACf,cAAcA,GAGR,SAASA,GACf,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOV,UAAY,gBAAkBS,IAGlHA,GAGnB,SAASI,EAAgBC,EAAUC,GAC/B,KAAMD,aAAoBC,GACtB,MAAM,IAAIC,UAAU,qCAI5B,SAASC,EAAkBC,EAAQC,GAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAMjB,OAAQkB,IAAK,CACnC,IAAIC,EAAaF,EAAMC,GACvBC,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDhC,OAAOiC,eAAeP,EAAQG,EAAW9F,IAAK8F,IAItD,SAASK,EAAaX,EAAaY,EAAYC,GAG3C,OAFID,GAAYV,EAAkBF,EAAYf,UAAW2B,GACrDC,GAAaX,EAAkBF,EAAaa,GACzCb,EAiBX,SAASc,EAAUC,EAAUC,GACzB,GAA0B,mBAAfA,GAA4C,OAAfA,EACpC,MAAM,IAAIf,UAAU,sDAExBc,EAAS9B,UAAYR,OAAOwC,OAAOD,GAAcA,EAAW/B,UAAW,CACnEY,YAAa,CACTjF,MAAOmG,EACPN,UAAU,EACVD,cAAc,KAGlBQ,GAAYE,EAAgBH,EAAUC,GAG9C,SAASG,EAAgBC,GAIrB,OAHAD,EAAkB1C,OAAO4C,eAAiB5C,OAAO6C,eAAiB,SAAyBF,GACvF,OAAOA,EAAEG,WAAa9C,OAAO6C,eAAeF,KAEzBA,GAG3B,SAASF,EAAgBE,EAAGI,GAKxB,OAJAN,EAAkBzC,OAAO4C,gBAAkB,SAAyBD,EAAGI,GAEnE,OADAJ,EAAEG,UAAYC,EACPJ,IAEYA,EAAGI,GAgB9B,SAASC,EAAyBC,EAAQC,GACtC,GAAc,MAAVD,EAAgB,MAAO,GAC3B,IACIlH,EADA2F,EAfR,SAAuCuB,EAAQC,GAC3C,GAAc,MAAVD,EAAgB,MAAO,GAI3B,IAHA,IAEIlH,EAFA2F,EAAS,GACTyB,EAAanD,OAAOpE,KAAKqH,GAExBrB,EAAI,EAAGA,EAAIuB,EAAWzC,OAAQkB,IAC/B7F,EAAMoH,EAAWvB,GACY,GAAzBsB,EAASlH,QAAQD,KACrB2F,EAAO3F,GAAOkH,EAAOlH,IAEzB,OAAO2F,EAKM0B,CAA8BH,EAAQC,GAEnD,GAAIlD,OAAOqD,sBAEP,IADA,IAAIC,EAAmBtD,OAAOqD,sBAAsBJ,GAC/CrB,EAAI,EAAGA,EAAI0B,EAAiB5C,OAAQkB,IACrC7F,EAAMuH,EAAiB1B,GACM,GAAzBsB,EAASlH,QAAQD,IAChBiE,OAAOQ,UAAU+C,qBAAqB9C,KAAKwC,EAAQlH,KACxD2F,EAAO3F,GAAOkH,EAAOlH,IAG7B,OAAO2F,EAUX,SAAS8B,EAA2BC,EAAMhD,GACtC,OAAIA,GAAyB,iBAATA,GAAqC,mBAATA,EARpD,SAAgCgD,GAC5B,QAAa,IAATA,EACA,MAAM,IAAIC,eAAe,6DAE7B,OAAOD,EAOAE,CAAuBF,GAFnBhD,EAKf,SAASmD,EAAeC,EAAQC,GAC5B,MAAQ9D,OAAOQ,UAAUuD,eAAetD,KAAKoD,EAAQC,IAElC,QADfD,EAASnB,EAAgBmB,MAG7B,OAAOA,EAGX,SAASG,EAAKtC,EAAQoC,EAAUG,GAc5B,OAZID,EADmB,oBAAZE,SAA2BA,QAAQjI,IACnCiI,QAAQjI,IAER,SAAcyF,EAAQoC,EAAUG,GACnC,IAAIE,EAAOP,EAAelC,EAAQoC,GAClC,GAAKK,EAAL,CACA,IAAIC,EAAOpE,OAAOqE,yBAAyBF,EAAML,GACjD,OAAIM,EAAKnI,IACEmI,EAAKnI,IAAIwE,KAAKwD,GAElBG,EAAKjI,SAGRuF,EAAQoC,EAAUG,GAAYvC,GAG9C,SAASxF,EAAIwF,EAAQoC,EAAU3H,EAAO8H,GA6BlC,OA3BI/H,EADmB,oBAAZgI,SAA2BA,QAAQhI,IACpCgI,QAAQhI,IAER,SAAawF,EAAQoC,EAAU3H,EAAO8H,GACxC,IACIG,EArHSnD,EAAKlF,EAAKI,EAoHnBgI,EAAOP,EAAelC,EAAQoC,GAElC,GAAIK,EAAM,CAEN,IADAC,EAAOpE,OAAOqE,yBAAyBF,EAAML,IACpC5H,IAEL,OADAkI,EAAKlI,IAAIuE,KAAKwD,EAAU9H,IACjB,EACJ,IAAKiI,EAAKpC,SACb,OAAO,EAIf,GADAoC,EAAOpE,OAAOqE,yBAAyBJ,EAAUH,GACvC,CACN,IAAKM,EAAKpC,SACN,OAAO,EAEXoC,EAAKjI,MAAQA,EACb6D,OAAOiC,eAAegC,EAAUH,EAAUM,QArIvBjI,EAuIiBA,GAvItBJ,EAuIY+H,KAvIjB7C,EAuIOgD,GArIxBjE,OAAOiC,eAAehB,EAAKlF,EAAK,CAC5BI,MAAOA,EACP2F,YAAY,EACZC,cAAc,EACdC,UAAU,IAGdf,EAAIlF,GAAOI,EAgIP,OAAO,IAGJuF,EAAQoC,EAAU3H,EAAO8H,GAGxC,SAASK,EAAK5C,EAAQoC,EAAU3H,EAAO8H,EAAUM,GAE7C,IADQrI,EAAIwF,EAAQoC,EAAU3H,EAAO8H,GAAYvC,IACvC6C,EACN,MAAM,IAAIC,MAAM,0BAEpB,OAAOrI,EAGX,SAASsI,EAAe/F,EAAKkD,GACzB,OAGJ,SAAyBlD,GACrB,GAAI6B,MAAMmE,QAAQhG,GAAM,OAAOA,EAJxBiG,CAAgBjG,IAO3B,SAA+BA,EAAKkD,GAChC,KAAMV,OAAOC,YAAYnB,OAAOtB,IAAgD,uBAAxCsB,OAAOQ,UAAUoE,SAASnE,KAAK/B,IACnE,OAEJ,IAAImG,EAAO,GACPC,GAAK,EACLC,GAAK,EACLC,OAAKC,EACT,IACI,IAAK,IAAiCC,EAA7BC,EAAKzG,EAAIwC,OAAOC,cAAmB2D,GAAMI,EAAKC,EAAGC,QAAQC,QAC9DR,EAAKzI,KAAK8I,EAAG/I,QACTyF,GAAKiD,EAAKnE,SAAWkB,GAF4CkD,GAAK,IAIhF,MAAOlF,GACLmF,GAAK,EACLC,EAAKpF,EACP,QACE,IACSkF,GAAsB,MAAhBK,EAAW,QAAWA,EAAW,SAC9C,QACE,GAAIJ,EAAI,MAAMC,GAGtB,OAAOH,EA9BwBS,CAAsB5G,EAAKkD,IAiC9D,WACI,MAAM,IAAIJ,UAAU,wDAlC4C+D,GAqCpE,SAASC,EAASC,GACd,MAAsB,iBAARA,GAAoBA,aAAeC,OAxOjD5E,EAASJ,QACTI,EAAS1B,QAAQ,SAASuG,GACtBnK,EAASmK,KAwOjB,IAAIC,EACM,OADNA,EAEM,OAFNA,EAGY,aAHZA,EAIO,QAJPA,EAKa,cAcjB,SAASC,EAAaJ,GAClB,OAAOA,EAAIK,QAAQ,4BAA6B,QAuCpD,IAAIC,GAYI7D,EAAa6D,EAAe,CAAC,CACzBhK,IAAK,iBACLE,IAAK,WACD,OAAOqD,KAAK0G,IAAIC,KAAKC,UAAWD,KAAKE,aAAaC,SAEvD,CACCrK,IAAK,gBACLE,IAAK,WACD,OAAOgK,KAAKC,UAAYD,KAAKI,iBAElC,CACCtK,IAAK,WACLE,IAAK,WACD,OAAOgK,KAAK9J,MAAMmK,OAAOL,KAAKI,eAAgBJ,KAAKM,iBAExD,CACCxK,IAAK,eACLE,IAAK,WACD,OAAOqD,KAAKkH,IAAIP,KAAKE,aAAaM,IAAMR,KAAKI,gBACzCJ,KAAKS,SAAShG,OAASuF,KAAK9J,MAAMuE,OAAQ,KAEnD,CACC3E,IAAK,UACLE,IAAK,WACD,OAAOgK,KAAKS,SAASJ,OAAOL,KAAKI,eAAgBJ,KAAKU,gBAE3D,CACC5K,IAAK,OACLE,IAAK,WACD,OAAOgK,KAAK9J,MAAMyK,UAAU,EAAGX,KAAKI,kBAEzC,CACCtK,IAAK,OACLE,IAAK,WACD,OAAOgK,KAAK9J,MAAMyK,UAAUX,KAAKI,eAAiBJ,KAAKM,iBAE5D,CACCxK,IAAK,kBACLE,IAAK,WACD,OAAKgK,KAAKU,cAAgBV,KAAKM,cAAsBX,EAC9CK,KAAKE,aAAaM,MAAQR,KAAKC,WAAaD,KAAKE,aAAaC,QAAUH,KAAKC,UAAYN,EAAkBA,MAGnHG,GArDP,SAASA,EAAc5J,EAAO+J,EAAWQ,EAAUP,GAM/C,IALA9E,EAAgB4E,KAAMF,GACtBE,KAAK9J,MAAQA,EACb8J,KAAKC,UAAYA,EACjBD,KAAKS,SAAWA,EAChBT,KAAKE,aAAeA,EACbF,KAAK9J,MAAM0K,MAAM,EAAGZ,KAAKI,kBAAoBJ,KAAKS,SAASG,MAAM,EAAGZ,KAAKI,mBAC1EJ,KAAKE,aAAaC,MAiDpC,IAAIU,GAWI5E,EAAa4E,EAAe,CAAC,CACzB/K,IAAK,YACLI,MAAO,SAAmB4K,GAKtB,OAJAd,KAAKe,aAAeD,EAAQC,YAC5Bf,KAAKgB,KAAOhB,KAAKgB,MAAQF,EAAQE,KACjChB,KAAKiB,UAAYH,EAAQG,SACzBjB,KAAKkB,WAAaJ,EAAQI,UACnBlB,OAEZ,CACClK,IAAK,SACLE,IAAK,WACD,OAAOgK,KAAKkB,UAAYlB,KAAKiB,SAASxG,WAGvCoG,GAxBP,SAASA,EAAcC,GACnB1F,EAAgB4E,KAAMa,GACtB9G,OAAO/C,OAAOgJ,KAAM,CAChBiB,SAAU,GACVF,YAAa,GACbC,MAAM,EACNE,UAAW,GACZJ,GAoBf,IAAIK,GAWIlF,EAAakF,EAAuB,CAAC,CACjCrL,IAAK,WACLI,MAAO,WACH,OAAO8J,KAAK9J,QAEjB,CACCJ,IAAK,SACLI,MAAO,SAAgBkL,GACnBpB,KAAK9J,OAASuJ,OAAO2B,KAE1B,CACCtL,IAAK,WACLI,MAAO,SAAkBmL,GACrB,OAAOA,EAAOC,OAAOtB,KAAKrB,WAAY,CAClCyC,MAAM,IACPG,UAAUF,EAAOG,wBAEzB,CACC1L,IAAK,cACLI,MAAO,SAAqBuL,GACxB,GAAIzB,KAAK0B,MAAQD,IAAQzB,KAAK9J,MAAMuE,OAAQ,MAAO,GACnD,IAAIkH,EAAY3B,KAAK9J,MAAM,GAE3B,OADA8J,KAAK9J,MAAQ8J,KAAK9J,MAAM0K,MAAM,GACvBe,IAEZ,CACC7L,IAAK,QACLE,IAAK,WACD,MAAO,CACHE,MAAO8J,KAAK9J,MACZwL,KAAM1B,KAAK0B,KACXE,KAAM5B,KAAK4B,OAGnB3L,IAAK,SAAa4L,GACd9H,OAAO/C,OAAOgJ,KAAM6B,OAGrBV,GA/CP,SAASA,IACL,IAAIjL,EAA2B,EAAnB4L,UAAUrH,aAA+BuE,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,GAC5EJ,EAA0B,EAAnBI,UAAUrH,aAA+BuE,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,EAC3EF,EAA0B,EAAnBE,UAAUrH,OAAaqH,UAAU,QAAK9C,EACjD5D,EAAgB4E,KAAMmB,GACtBnB,KAAK9J,MAAQA,EACb8J,KAAK0B,KAAOA,EACZ1B,KAAK4B,KAAOA,EA2CxB,SAASG,EAAMvJ,GACX,IAAIwJ,EAA0B,EAAnBF,UAAUrH,aAA+BuE,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,GAC/E,OAAO,IAAIC,EAAME,UAAUzJ,EAAIwJ,GAGnC,IAAIE,GAQIjG,EAAaiG,EAAQ,CAAC,CAClBpM,IAAK,gBACLI,MAAO,SAAuB8L,GACrBjI,OAAOpE,KAAKqM,GAAMvH,QACvBuF,KAAKmC,iBAAiBnC,KAAKoC,QAAQpI,KAAKgG,KAAMgC,MAEnD,CACClM,IAAK,UACLI,MAAO,SAAiB8L,GACpBjI,OAAO/C,OAAOgJ,KAAMgC,KAEzB,CACClM,IAAK,QACLI,MAAO,WACH8J,KAAKqC,OAAS,KAEnB,CACCvM,IAAK,UACLI,MAAO,SAAiBA,GAMpB,OALA8J,KAAKsC,QACLtC,KAAKsB,OAAOpL,EAAO,CACfqM,OAAO,GACR,IACHvC,KAAKwC,WACExC,KAAK9J,QAEjB,CACCJ,IAAK,kBACLI,MAAO,SAAyB+J,GAC5B,OAAOA,IAEZ,CACCnK,IAAK,eACLI,MAAO,SAAA,EAAA,GACH,IAAIuM,EAA6B,EAAnBX,UAAUrH,aAA+BuE,IADpD,EAAA,EAC+E,EAC9E0D,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IAFlD,EAAA,EAE6EgB,KAAK9J,MAAMuE,OAC3F,OAAOuF,KAAK9J,MAAM0K,MAAM6B,EAASC,KAEtC,CACC5M,IAAK,cACLI,MAAO,SAAA,EAAA,GACH,IAAIuM,EAA6B,EAAnBX,UAAUrH,aAA+BuE,IADpD,EAAA,EAC+E,EAC9E0D,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IAFlD,EAAA,EAE6EgB,KAAK9J,MAAMuE,OAC3F,OAAO,IAAI0G,EAAsBnB,KAAK2C,aAAaF,EAASC,GAAQD,KAEzE,CACC3M,IAAK,aACLI,MAAO,SAAoBkL,GAEvB,OADI7B,EAAS6B,KAAOA,EAAO,IAAID,EAAsB1B,OAAO2B,KACrDA,EAAKwB,SAAS5C,QAE1B,CACClK,IAAK,iBACLI,MAAO,SAAwB2M,EAAxB,GACH,IAAIC,EAA2B,EAAnBhB,UAAUrH,aAA+BuE,IADlD,EAAA,EAC6E,GAEhF,OADA6D,EAAK7C,KAAK+C,UAAUF,EAAIC,KAExB9C,KAAKqC,QAAUQ,EACR,IAAIhC,EAAc,CACrBI,SAAU4B,EACV9B,YAAa8B,KAJD,IAAIhC,IAOzB,CACC/K,IAAK,cACLI,MAAO,SAAqB2M,EAArB,EAAA,GACH,IAKQG,EAGIC,EAKAC,EACJC,EAdJL,EAA2B,EAAnBhB,UAAUrH,aAA+BuE,IADlD,EAAA,EAC6E,GAC5EoE,EAA+B,EAAnBtB,UAAUrH,OAFvB,OAEmDuE,EAClDqE,EAAkBrD,KAAK6B,MACvBf,EAAUd,KAAKsD,eAAeT,EAAIC,GAoBtC,OAnBIhC,EAAQG,YAEJkC,GAAsC,IAA3BnD,KAAKuD,WAAWT,KACF,MAAbM,IACRH,EAAkBjD,KAAK6B,MACvB7B,KAAKwD,YACLR,EAAiBI,EAAUvB,MAC3BuB,EAAUK,YAAYzD,KAAK9J,MAAMuE,UAGrC0I,GADID,EAAclD,KAAK0D,WAAWN,IACXrC,cAAgBqC,EAAUzE,aACjCuE,EAAYjC,WAAUjB,KAAK6B,MAAQoB,IAElDE,IACDrC,EAAU,IAAID,EACdb,KAAK6B,MAAQwB,EACTD,GAAaJ,IAAgBI,EAAUvB,MAAQmB,KAGpDlC,IAEZ,CACChL,IAAK,qBACLI,MAAO,WACH,OAAO,IAAI2K,IAEhB,CACC/K,IAAK,SACLI,MAAO,SAAgBsJ,EAAKsD,EAAO1B,GAC/B,IAAK7B,EAASC,GAAM,MAAM,IAAIjB,MAAM,0BACpC,IAAIuC,EAAU,IAAID,EACduC,EAAY7D,EAAS6B,GAAQ,IAAID,EAAsB1B,OAAO2B,IAASA,EACvE0B,EAAM1B,OAAM0B,EAAMa,iBAAmB3D,KAAK6B,OAC9C,IAAK,IAAI+B,EAAK,EAAGA,EAAKpE,EAAI/E,SAAUmJ,EAChC9C,EAAQS,UAAUvB,KAAK6D,YAAYrE,EAAIoE,GAAKd,EAAOM,IAKvD,OAHiB,MAAbA,IACAtC,EAAQI,WAAalB,KAAK0D,WAAWN,GAAWlC,WAE7CJ,IAEZ,CACChL,IAAK,SACLI,MAAO,SAAA,EAAA,GACH,IAAIuM,EAA6B,EAAnBX,UAAUrH,aAA+BuE,IADpD,EAAA,EAC+E,EAC9E0D,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IAFlD,EAAA,EAE6EgB,KAAK9J,MAAMuE,OAE3F,OADAuF,KAAKqC,OAASrC,KAAK9J,MAAM0K,MAAM,EAAG6B,GAAWzC,KAAK9J,MAAM0K,MAAM8B,GACvD,IAAI7B,IAEhB,CACC/K,IAAK,mBACLI,MAAO,SAA0B0E,GAC7B,GAAIoF,KAAK8D,cAAgB9D,KAAK+D,cAAe,OAAOnJ,IACpDoF,KAAK8D,aAAc,EACnB,IAAIE,EAAWhE,KAAKiE,cAChB/N,EAAQ8J,KAAK9J,MACbgO,EAAMtJ,IAMV,OALAoF,KAAKiE,cAAgBD,EACjBhE,KAAK9J,QAAUA,GAAuC,IAA9BA,EAAMH,QAAQiK,KAAK9J,QAC3C8J,KAAKsB,OAAOpL,EAAM0K,MAAMZ,KAAK9J,MAAMuE,QAAS,GAAI,WAE7CuF,KAAK8D,YACLI,IAEZ,CACCpO,IAAK,cACLI,MAAO,SAAqB0E,GACxB,GAAIoF,KAAKmE,YAAcnE,KAAK+D,cAAe,OAAOnJ,EAAGoF,MACrDA,KAAKmE,WAAY,EACjB,IAAItC,EAAQ7B,KAAK6B,MACbqC,EAAMtJ,EAAGoF,MAGb,OAFAA,KAAK6B,MAAQA,SACN7B,KAAKmE,UACLD,IAEZ,CACCpO,IAAK,YACLI,MAAO,SAAmBsJ,EAAnB,GACH,IAAIsD,EAA2B,EAAnBhB,UAAUrH,aAA+BuE,IADlD,EAAA,EAC6E,GAChF,OAAOgB,KAAKoE,QAAUpE,KAAKoE,QAAQ5E,EAAKQ,KAAM8C,GAAStD,IAE5D,CACC1J,IAAK,aACLI,MAAO,SAAoB4M,GACvB,QAAS9C,KAAKqE,UAAYrE,KAAKqE,SAASrE,KAAK9J,MAAO8J,KAAM8C,OAAa9C,KAAKsE,QAAUtE,KAAKsE,OAAOf,WAAWT,MAElH,CACChN,IAAK,WACLI,MAAO,WACC8J,KAAKuE,QAAQvE,KAAKuE,OAAOvE,KAAK9J,MAAO8J,QAE9C,CACClK,IAAK,WACLI,MAAO,SAAkBA,GACrB,OAAO8J,KAAKwE,OAASxE,KAAKwE,OAAOtO,EAAO8J,MAAQ9J,IAErD,CACCJ,IAAK,UACLI,MAAO,SAAiBsJ,GACpB,OAAOQ,KAAKyE,MAAQzE,KAAKyE,MAAMjF,EAAKQ,MAAQR,IAEjD,CACC1J,IAAK,SACLI,MAAO,SAAgBiK,EAAOuE,EAAazD,EAAU0D,GACjD,IAAIC,EAAUzE,EAAQuE,EAClBtD,EAAOpB,KAAK6E,YAAYD,GACxBxE,EAAiBJ,KAAK8E,gBAAgB3E,EAAOwE,GAMjD,OALoB,IAAI9D,EAAc,CAClCK,UAAWd,EAAiBD,IAC7BoB,UAAUvB,KAAK+E,OAAO3E,IAAiBmB,UAAUvB,KAAKsB,OAAOL,EAAU,CACtEsB,OAAO,GACRnB,MAGR,CACCtL,IAAK,QACLE,IAAK,WACD,MAAO,CACHqM,OAAQrC,KAAK9J,QAGrBD,IAAK,SAAa4L,GACd7B,KAAKqC,OAASR,EAAMQ,SAEzB,CACCvM,IAAK,QACLE,IAAK,WACD,OAAOgK,KAAKqC,QAEhBpM,IAAK,SAAaC,GACd8J,KAAKgF,QAAQ9O,KAElB,CACCJ,IAAK,gBACLE,IAAK,WACD,OAAOgK,KAAK9J,OAEhBD,IAAK,SAAaC,GACd8J,KAAKsC,QACLtC,KAAKsB,OAAOpL,EAAO,GAAI,IACvB8J,KAAKwC,aAEV,CACC1M,IAAK,aACLE,IAAK,WACD,OAAOgK,KAAKiF,QAAQjF,KAAK9J,QAE7BD,IAAK,SAAaC,GACd8J,KAAK9J,MAAQ8J,KAAKkF,SAAShP,KAEhC,CACCJ,IAAK,gBACLE,IAAK,WACD,OAAOgK,KAAK2C,aAAa,EAAG3C,KAAK9J,MAAMuE,OAAQ,CAC3C0K,KAAK,KAGblP,IAAK,SAAaC,GACd8J,KAAKsC,QACLtC,KAAKsB,OAAOpL,EAAO,CACfiP,KAAK,GACN,IACHnF,KAAKwC,aAEV,CACC1M,IAAK,aACLE,IAAK,WACD,OAAO,MAGRkM,GAtPP,SAASA,EAAOF,GACZ5G,EAAgB4E,KAAMkC,GACtBlC,KAAKqC,OAAS,GACdrC,KAAKoC,QAAQrI,OAAO/C,OAAO,GAAIkL,EAAOkD,SAAU,GAAIpD,IACpDhC,KAAK+D,eAAgB,EA8PjC,SAASsB,EAAYC,GACjB,GAAY,MAARA,EACA,MAAM,IAAI/G,MAAM,mCAEpB,OAAI+G,aAAgBC,OAAexD,EAAMyD,aACrCjG,EAAS+F,GAAcvD,EAAM0D,cAC7BH,aAAgBI,MAAQJ,IAASI,KAAa3D,EAAM4D,WACpDL,aAAgBM,QAA0B,iBAATN,GAAqBA,IAASM,OAAe7D,EAAM8D,aACpFvL,MAAMmE,QAAQ6G,IAASA,IAAShL,MAAcyH,EAAM+D,cACpD/D,EAAMG,QAAUoD,EAAK/K,qBAAqBwH,EAAMG,OAAeoD,EAC/DA,aAAgBS,SAAiBhE,EAAMiE,eACvCV,aAAgBvD,EAAMG,OAAeoD,EAAKnK,aAC9C8K,QAAQC,KAAK,0BAA2BZ,GACjCvD,EAAMG,QAGjB,SAASiE,EAAWnE,GAChB,GAAID,EAAMG,QAAUF,aAAgBD,EAAMG,OAAQ,OAAOF,EAEzD,IAAIsD,GADJtD,EAAOjI,OAAO/C,OAAO,GAAIgL,IACTsD,KAChB,GAAIvD,EAAMG,QAAUoD,aAAgBvD,EAAMG,OAAQ,OAAOoD,EACzD,IAAIc,EAAcf,EAAYC,GAC9B,IAAKc,EAAa,MAAM,IAAI7H,MAAM,qHAClC,OAAO,IAAI6H,EAAYpE,GAjC3BE,EAAOkD,SAAW,CACdZ,OAAQ,SAAgB6B,GACpB,OAAOA,GAEX5B,MAAO,SAAe4B,GAClB,OAAOA,IAGftE,EAAMG,OAASA,EA2BfH,EAAMoE,WAAaA,EAEnB,IAAIG,EAA4B,CAC5BC,EAAK,KACLC,EAAK,snIACLC,IAAK,KAELC,GAWIzK,EAAayK,EAAwB,CAAC,CAClC5Q,IAAK,QACLI,MAAO,WACH8J,KAAK2G,WAAY,EACjB3G,KAAKqB,OAAOiB,UAEjB,CACCxM,IAAK,SACLI,MAAO,SAAA,EAAA,GACH,IAAIuM,EAA6B,EAAnBX,UAAUrH,aAA+BuE,IADpD,EAAA,EAC+E,EAC9E0D,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IAFlD,EAAA,EAE6EgB,KAAK9J,MAAMuE,OAC3F,OAAgB,IAAZgI,GAA0B,GAATC,GACjB1C,KAAK2G,WAAY,EACV3G,KAAKqB,OAAO0D,OAAOtC,EAASC,IAEhC,IAAI7B,IAEhB,CACC/K,IAAK,cACLI,MAAO,SAAqBsJ,EAArB,GACH,IAAIsD,EAA2B,EAAnBhB,UAAUrH,aAA+BuE,IADlD,EAAA,EAC6E,GAChF,GAAIgB,KAAK2G,UAAW,OAAO,IAAI9F,EAC/B,IAAIgB,EAAQ7B,KAAKqB,OAAOQ,MACpBf,EAAUd,KAAKqB,OAAOwC,YAAYrE,EAAKsD,GAU3C,OATIhC,EAAQG,WAAuC,IAA3BjB,KAAKuD,WAAWT,KACpChC,EAAQG,SAAWH,EAAQC,YAAc,GACzCf,KAAKqB,OAAOQ,MAAQA,GAEnBf,EAAQG,UAAajB,KAAK4G,YAAe5G,KAAK6G,MAAS/D,EAAMP,QAC9DzB,EAAQG,SAAWjB,KAAK8G,iBAE5BhG,EAAQE,MAAQF,EAAQG,WAAajB,KAAK4G,WAC1C5G,KAAK2G,UAAYI,QAAQjG,EAAQG,UAC1BH,IAEZ,CACChL,IAAK,SACLI,MAAO,WACH,IAAI8Q,EACJ,OAAQA,EAAehH,KAAKqB,QAAQC,OAAO2F,MAAMD,EAAclF,aAEpE,CACChM,IAAK,qBACLI,MAAO,WACH,IAAI4K,EAAU,IAAID,EAClB,OAAIb,KAAK2G,WAAa3G,KAAK4G,aAC3B5G,KAAK2G,WAAY,EACjB7F,EAAQG,SAAWjB,KAAK8G,iBAFsBhG,IAKnD,CACChL,IAAK,cACLI,MAAO,WACH,IAAIgR,EACJ,OAAQA,EAAgBlH,KAAKqB,QAAQwD,YAAYoC,MAAMC,EAAepF,aAE3E,CACChM,IAAK,aACLI,MAAO,WACH,IAAIiR,EACJ,OAAQA,EAAgBnH,KAAKqB,QAAQqC,WAAWuD,MAAME,EAAerF,aAE1E,CACChM,IAAK,eACLI,MAAO,SAAA,EAAA,EAAA,GACH,IAAIuM,EAA6B,EAAnBX,UAAUrH,aAA+BuE,IADpD,EAAA,EAC+E,EAC9E0D,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IAFlD,EAAA,EAE6EgB,KAAK9J,MAAMuE,OACvFqI,EAA2B,EAAnBhB,UAAUrH,OAHnB,OAG+CuE,EAClD,OAAOgB,KAAKqB,OAAOsB,aAAaF,EAASC,EAAOI,KAErD,CACChN,IAAK,kBACLI,MAAO,SAAyB+J,EAAzB,GACH,IAAImH,EAA+B,EAAnBtF,UAAUrH,aAA+BuE,IADtD,EAAA,EACiFW,EAEhF0H,EAASrH,KAAK9J,MAAMuE,OACpB6M,EAAWjO,KAAK0G,IAAI1G,KAAKkH,IAAIN,EAFpB,GAEwCoH,GACrD,OAAQD,GACJ,KAAKzH,EACL,KAAKA,EACD,OAAOK,KAAKuH,WAAaD,EANpB,EAOT,KAAK3H,EACL,KAAKA,EACD,OAAOK,KAAKuH,WAAaD,EAAWD,EACxC,KAAK1H,EACL,QACI,OAAO2H,KAGpB,CACCxR,IAAK,aACLI,MAAO,WACH,IAAIsR,EAAeC,EACnB,OAAQD,EAAgBxH,KAAKqB,QAAQkC,WAAW0D,MAAMO,EAAe1F,cAAgB9B,KAAKsE,SAAWmD,EAAezH,KAAKsE,QAAQf,WAAW0D,MAAMQ,EAAc3F,cAErK,CACChM,IAAK,WACLI,MAAO,WACH8J,KAAKqB,OAAOmB,aAEjB,CACC1M,IAAK,QACLE,IAAK,WACD,OAAOgK,KAAKqB,OAAOnL,QAAU8J,KAAK2G,YAAc3G,KAAK4G,WAAa5G,KAAK8G,gBAAkB,MAE9F,CACChR,IAAK,gBACLE,IAAK,WACD,OAAOgK,KAAKqB,OAAOqG,gBAExB,CACC5R,IAAK,aACLE,IAAK,WACD,OAAO+Q,QAAQ/G,KAAKqB,OAAOnL,QAAU8J,KAAK4G,aAE/C,CACC9Q,IAAK,QACLE,IAAK,WACD,MAAO,CACHqL,OAAQrB,KAAKqB,OAAOQ,MACpB8E,UAAW3G,KAAK2G,YAGxB1Q,IAAK,SAAa4L,GACd7B,KAAKqB,OAAOQ,MAAQA,EAAMR,OAC1BrB,KAAK2G,UAAY9E,EAAM8E,cAGxBD,GAzIP,SAASA,EAAuB1E,GAC5B5G,EAAgB4E,KAAM0G,GACtB,IAAIpB,EAAOtD,EAAKsD,KACZqC,EAAY5K,EAAyBiF,EAAM,CAAC,SAChDhC,KAAKqB,OAAS8E,EAAW,CACrBb,KAAMA,IAEVvL,OAAO/C,OAAOgJ,KAAM2H,GAqIhC,IAAIC,GAOI3L,EAAa2L,EAAwB,CAAC,CAClC9R,IAAK,QACLI,MAAO,WACH8J,KAAK6H,aAAc,EACnB7H,KAAKqC,OAAS,KAEnB,CACCvM,IAAK,SACLI,MAAO,SAAA,EAAA,GACH,IAAIuM,EAA6B,EAAnBX,UAAUrH,aAA+BuE,IADpD,EAAA,EAC+E,EAC9E0D,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IAFlD,EAAA,EAE6EgB,KAAKqC,OAAO5H,OAG5F,OAFAuF,KAAKqC,OAASrC,KAAKqC,OAAOzB,MAAM,EAAG6B,GAAWzC,KAAKqC,OAAOzB,MAAM8B,GAC3D1C,KAAKqC,SAAQrC,KAAK6H,aAAc,GAC9B,IAAIhH,IAEhB,CACC/K,IAAK,kBACLI,MAAO,SAAyB+J,EAAzB,GACH,IAAImH,EAA+B,EAAnBtF,UAAUrH,aAA+BuE,IADtD,EAAA,EACiFW,EAEhF0H,EAASrH,KAAKqC,OAAO5H,OACzB,OAAQ2M,GACJ,KAAKzH,EACL,KAAKA,EACD,OALK,EAMT,KAAKA,EACL,KAAKA,EACL,KAAKA,EACL,QACI,OAAO0H,KAGpB,CACCvR,IAAK,eACLI,MAAO,SAAA,EAAA,EAAA,GACH,IAAIuM,EAA6B,EAAnBX,UAAUrH,aAA+BuE,IADpD,EAAA,EAC+E,EAC9E0D,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IAFlD,EAAA,EAE6EgB,KAAKqC,OAAO5H,OAE5F,OAD+B,EAAnBqH,UAAUrH,aAA+BuE,IAHlD,EAAA,EAG6E,IACnEmG,KAAOnF,KAAK6H,aAAe7H,KAAKqC,OAAOzB,MAAM6B,EAASC,IAAU,KAElF,CACC5M,IAAK,cACLI,MAAO,SAAqBsJ,EAArB,GACH,IAAIsD,EAA2B,EAAnBhB,UAAUrH,aAA+BuE,IADlD,EAAA,EAC6E,GAC5E8B,EAAU,IAAID,EAClB,GAAIb,KAAKqC,OAAQ,OAAOvB,EACxB,IACIgH,EADW9H,KAAK+H,OAASvI,EAAI,KACHQ,KAAKgI,aAAelF,EAAMP,OAASO,EAAMqC,OAASrC,EAAM1B,KAItF,OAHI0G,IAAYhH,EAAQC,YAAcf,KAAK+H,MAC3C/H,KAAKqC,OAASvB,EAAQG,SAAWjB,KAAK+H,KACtC/H,KAAK6H,YAAcC,IAAehF,EAAMqC,KAAOrC,EAAMP,OAC9CzB,IAEZ,CACChL,IAAK,qBACLI,MAAO,WACH,IAAI4K,EAAU,IAAID,EAClB,OAAIb,KAAKqC,SACTrC,KAAKqC,OAASvB,EAAQG,SAAWjB,KAAK+H,MADdjH,IAI7B,CACChL,IAAK,cACLI,MAAO,SAAA,EAAA,GAEH,OAD+B,EAAnB4L,UAAUrH,aAA+BuE,IADlD,GAC6EgB,KAAK9J,MAAMuE,OACpF,IAAI0G,EAAsB,MAEtC,CACCrL,IAAK,aACLI,MAAO,SAAoBkL,GAEvB,OADI7B,EAAS6B,KAAOA,EAAO,IAAID,EAAsB1B,OAAO2B,KACrDA,EAAKwB,SAAS5C,QAE1B,CACClK,IAAK,SACLI,MAAO,SAAgBsJ,EAAKsD,EAAO1B,GAC/B,IAAIN,EAAUd,KAAK6D,YAAYrE,EAAKsD,GAIpC,OAHY,MAAR1B,IACAN,EAAQI,WAAalB,KAAK0D,WAAWtC,GAAMF,WAExCJ,IAEZ,CACChL,IAAK,WACLI,MAAO,cACR,CACCJ,IAAK,QACLE,IAAK,WACD,OAAOgK,KAAKqC,SAEjB,CACCvM,IAAK,gBACLE,IAAK,WACD,OAAOgK,KAAKgI,YAAchI,KAAK9J,MAAQ,KAE5C,CACCJ,IAAK,aACLE,IAAK,WACD,OAAO,IAEZ,CACCF,IAAK,QACLE,IAAK,WACD,MAAO,CACHqM,OAAQrC,KAAKqC,OACbwF,YAAa7H,KAAK6H,cAG1B5R,IAAK,SAAa4L,GACd9H,OAAO/C,OAAOgJ,KAAM6B,OAGrB+F,GArHP,SAASA,EAAuB5F,GAC5B5G,EAAgB4E,KAAM4H,GACtB7N,OAAO/C,OAAOgJ,KAAMgC,GACpBhC,KAAKqC,OAAS,GAqH1B,IAAI4F,GASIhM,EAAagM,EAAmB,CAAC,CAC7BnS,IAAK,WACLI,MAAO,WACH,OAAO8J,KAAKkI,OAAOzS,IAAIgK,QAAQ0I,KAAK,MAEzC,CACCrS,IAAK,SACLI,MAAO,SAAgBkS,GACnB,GAAK3I,OAAO2I,GAAZ,CACI7I,EAAS6I,KAAYA,EAAY,IAAIjH,EAAsB1B,OAAO2I,KACtE,IAYYC,EAZRC,EAAYtI,KAAKkI,OAAOlI,KAAKkI,OAAOzN,OAAS,GAC7C8N,EAAaD,IACTA,EAAU1G,OAASwG,EAAUxG,MAA0B,MAAlBwG,EAAUxG,OACnDwG,EAAU1G,OAAS4G,EAAU5G,KAAO4G,EAAU3J,WAAWlE,OAC7D,GAAI2N,aAAqBjH,EACjBoH,EACAD,EAAUE,OAAOJ,EAAUzJ,YAE3BqB,KAAKkI,OAAO/R,KAAKiS,QAElB,GAAIA,aAAqBH,EAAmB,CAC/C,GAAsB,MAAlBG,EAAUxG,KAEV,KAAOwG,EAAUF,OAAOzN,QAAsC,MAA5B2N,EAAUF,OAAO,GAAGtG,OAClDyG,EAAiBD,EAAUF,OAAOO,SACnB/G,MAAQ0G,EAAU1G,KACjC1B,KAAKwI,OAAOH,GAGhBD,EAAUzJ,aACVyJ,EAAUxG,KAAOwG,EAAUM,WAC3B1I,KAAKkI,OAAO/R,KAAKiS,QAI9B,CACCtS,IAAK,WACLI,MAAO,SAAkBmL,GACrB,KAAMA,aAAkBU,EAAM0D,eAE1B,OADW,IAAItE,EAAsBnB,KAAKrB,YAC9BiE,SAASvB,GAGzB,IADA,IAAIP,EAAU,IAAID,EACT+C,EAAK,EAAGA,EAAK5D,KAAKkI,OAAOzN,SAAWqG,EAAQE,OAAQ4C,EAAI,CAC7D,IAYQV,EAIAyF,EAhBJC,EAAQ5I,KAAKkI,OAAOtE,GACpBiF,EAAgBxH,EAAOyH,eAAezH,EAAOnL,MAAMuE,QACnDmH,EAAOgH,EAAMhH,KACbmH,OAAa,EACL,MAARnH,KAAkBiH,GAAiBA,EAAcvS,OAASsL,MACtDgH,aAAiBX,GACc,GAA/B5G,EAAO2H,OAAOjT,QAAQ6L,KACtBd,EAAQS,UAAUF,EAAOG,mBAAmBI,IAEhDmH,EAAaH,aAAiBX,GAAqB5G,EAAO4H,QAAQrH,IAElEmH,IACI7F,EAAc6F,EAAWrF,WAAWkF,IAC5B5H,MAAO,EACnBF,EAAQS,UAAU2B,GAClB7B,EAAOgB,QAAUa,EAAYjC,UACzB0H,EAAcC,EAAMjK,WAAWiC,MAAMsC,EAAYnC,YAAYtG,UAChDqG,EAAQS,UAAUF,EAAOC,OAAOqH,EAAa,CAC1DvH,MAAM,MAGVN,EAAQS,UAAUF,EAAOC,OAAOsH,EAAMjK,WAAY,CAC9CyC,MAAM,KAIlB,OAAON,IAEZ,CACChL,IAAK,cACLI,MAAO,SAAqBuL,GACxB,GAAIzB,KAAK0B,MAAQD,IAAQzB,KAAKkI,OAAOzN,OAAQ,MAAO,GAGpD,IAFA,IAAIyO,EAAgBzH,EAAMzB,KAAK0B,KAC3BkC,EAAK,EACFA,EAAK5D,KAAKkI,OAAOzN,QAAQ,CAC5B,IAAImO,EAAQ5I,KAAKkI,OAAOtE,GACpBjC,EAAYiH,EAAMnF,YAAYyF,GAClC,GAAIN,EAAMjK,WAAY,CAClB,IAAKgD,EAAW,QACdiC,OAEF5D,KAAKkI,OAAO3R,OAAOqN,EAAI,GAE3B,GAAIjC,EAAW,OAAOA,EAE1B,MAAO,KAEZ,CACC7L,IAAK,QACLE,IAAK,WACD,MAAO,CACHkS,OAAQlI,KAAKkI,OAAOzS,IAAI,SAAS0T,GAC7B,OAAOA,EAAEtH,QAEbH,KAAM1B,KAAK0B,KACXE,KAAM5B,KAAK4B,KACX8G,WAAY1I,KAAK0I,aAGzBzS,IAAK,SAAa4L,GACd,IAAIqG,EAASrG,EAAMqG,OACfxM,EAAQqB,EAAyB8E,EAAO,CAAC,WAC7C9H,OAAO/C,OAAOgJ,KAAMtE,GACpBsE,KAAKkI,OAASA,EAAOzS,IAAI,SAAS2T,GAC9B,IAAIR,EAA6B,IAArB,WAAYQ,EAAanB,EAA0B9G,GAE/D,OADAyH,EAAM/G,MAAQuH,EACPR,QAIZX,GAzHP,SAASA,IACL,IAAIC,EAA4B,EAAnBpG,UAAUrH,aAA+BuE,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,GAC7EJ,EAA0B,EAAnBI,UAAUrH,aAA+BuE,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,EAC/E1G,EAAgB4E,KAAMiI,GACtBjI,KAAKkI,OAASA,EACdlI,KAAK0B,KAAOA,EAuHxB,IAAI8D,GAEIpJ,EAAUoJ,EAgBZtD,GAVEjG,EAAauJ,EAAc,CAAC,CACxB1P,IAAK,UACLI,MAAO,SAAiB8L,GAChBA,EAAKsD,OAAMtD,EAAKqC,SAAW,SAASnO,GACpC,OAAkC,GAA3BA,EAAMmT,OAAOrH,EAAKsD,QAE7BvH,EAAKtB,EAAgB+I,EAAajL,WAAY,UAAWyF,MAAMxF,KAAKwF,KAAMgC,OAG3EwD,GAbP,SAASA,IAEL,OADApK,EAAgB4E,KAAMwF,GACfjI,EAA2ByC,KAAMvD,EAAgB+I,GAAcyB,MAAMjH,KAAM8B,YAa9FC,EAAMyD,aAAeA,EAErB,IAAIC,GAEIrJ,EAAUqJ,EA0bZvD,GAlbEjG,EAAawJ,EAAe,CAAC,CACzB3P,IAAK,UACLI,MAAO,SAAA,GACH,IAAI8L,EAA0B,EAAnBF,UAAUrH,aAA+BuE,IADjD,EAAA,EAC4E,GAC/EgD,EAAKsH,YAAcvP,OAAO/C,OAAO,GAAIgJ,KAAKsJ,YAAatH,EAAKsH,aAC5DvL,EAAKtB,EAAgBgJ,EAAclL,WAAY,UAAWyF,MAAMxF,KAAKwF,KAAMgC,GAC3EhC,KAAKuJ,iBAEV,CACCzT,IAAK,eACLI,MAAO,WACH,IAAIsT,EAAQxJ,KACRyJ,EAAOzJ,KAAKsJ,YAChBtJ,KAAKiJ,QAAU,GACfjJ,KAAKgJ,OAAS,GACdhJ,KAAK0J,cAAgB,GACrB,IAAIC,EAAU3J,KAAKsF,KACnB,GAAKqE,GAAYF,EAGjB,IAFA,IAAIG,GAAiB,EACjBC,GAAgB,EACXlO,EAAI,EAAGA,EAAIgO,EAAQlP,SAAUkB,EAClC,IAAIqE,KAAK8J,QA0BQ,aAzBF,WACP,IAAIhN,EAAI6M,EAAQ/I,MAAMjF,GAClBoO,EAAShQ,OAAOpE,KAAK6T,EAAMM,QAAQE,OAAO,SAASC,GACnD,OAA4B,IAArBnN,EAAE/G,QAAQkU,KAErBF,EAAOG,KAAK,SAAS1D,EAAG2D,GACpB,OAAOA,EAAE1P,OAAS+L,EAAE/L,SAExB,IAAIwP,EAAQF,EAAO,GACnB,GAAIE,EAAO,CACP,IAAIG,EAAcjE,EAAWpM,OAAO/C,OAAO,CACvCsN,OAAQkF,EACR3C,KAAM2C,EAAM3C,KACZC,gBAAiB0C,EAAM1C,gBACvBtD,UAAWgG,EAAMhG,WAClBgG,EAAMM,OAAOG,KAOhB,OANIG,IACAZ,EAAMP,QAAQ9S,KAAKiU,GACdZ,EAAME,cAAcO,KAAQT,EAAME,cAAcO,GAAS,IAC9DT,EAAME,cAAcO,GAAO9T,KAAKqT,EAAMP,QAAQxO,OAAS,IAE3DkB,GAAKsO,EAAMxP,OAAS,EACb,YAtBJ,GADf,CA4BA,IAAIsN,EAAO4B,EAAQhO,GACf0O,EAAWtC,KAAQ0B,EACvB,GAAI1B,IAAStC,EAAc6E,UAI3B,GAAa,MAATvC,GAAyB,MAATA,EAIpB,GAAa,MAATA,GAAyB,MAATA,EAApB,CAIA,GAAIA,IAAStC,EAAc8E,YAAa,CAGpC,KADAxC,EAAO4B,IADLhO,IAES,MACX0O,GAAW,EAEf,IAAIG,EAAMH,EAAW,IAAI3D,EAAuB,CAC5CpC,OAAQtE,KACR6G,KAAM7G,KAAK6G,KACXC,gBAAiB9G,KAAK8G,gBACtBxB,KAAMmE,EAAK1B,GACXnB,WAAYiD,IACX,IAAIjC,EAAuB,CAC5BG,KAAMA,EACNC,YAAa4B,IAEjB5J,KAAKiJ,QAAQ9S,KAAKqU,QAnBdX,GAAiBA,OAJjBD,GAAkBA,OAJlB5J,KAAKgJ,OAAO7S,KAAK6J,KAAKiJ,QAAQxO,WA8B3C,CACC3E,IAAK,QACLI,MAAO,WACH6H,EAAKtB,EAAgBgJ,EAAclL,WAAY,QAASyF,MAAMxF,KAAKwF,MACnEA,KAAKiJ,QAAQ9P,QAAQ,SAASgR,GAC1B,OAAOA,EAAE7H,YAGlB,CACCxM,IAAK,WACLI,MAAO,WACH8J,KAAKiJ,QAAQ9P,QAAQ,SAASgR,GAC1B,OAAOA,EAAE3H,aAEbzE,EAAKtB,EAAgBgJ,EAAclL,WAAY,WAAYyF,MAAMxF,KAAKwF,QAE3E,CACClK,IAAK,aACLI,MAAO,SAAoBkL,GACvB,OAAOrD,EAAKtB,EAAgBgJ,EAAclL,WAAY,aAAcyF,MAAMxF,KAAKwF,KAAMoB,GAAMG,UAAUvB,KAAKwB,wBAE/G,CACC1L,IAAK,iBACLI,MAAO,SAAwB2M,EAAxB,GACH,IAAIC,EAA2B,EAAnBhB,UAAUrH,aAA+BuE,IADlD,EAAA,EAC6E,GAChF6D,EAAK7C,KAAK+C,UAAUF,EAAIC,GACxB,IAAI2H,EAAYzK,KAAK8I,eAAe9I,KAAK9J,MAAMuE,QAC3CqG,EAAU,IAAID,EAClB,IAAK4J,EAAW,OAAO3J,EACvB,IAAK,IAAI4J,EAAKD,EAAUnU,SAAUoU,EAAI,CAClC,IAAIC,EAAS3K,KAAKiJ,QAAQyB,GAC1B,IAAKC,EAAQ,MACb,IAAIC,EAAeD,EAAO9G,YAAYhB,EAAIC,GACtC9B,EAAO4J,EAAa5J,KAExB,GADAF,EAAQS,UAAUqJ,GACd5J,GAAQ4J,EAAa7J,YAAa,MAE1C,OAAOD,IAEZ,CACChL,IAAK,cACLI,MAAO,SAAA,EAAA,GACH,IAAI2U,EAAS7K,KACTyC,EAA6B,EAAnBX,UAAUrH,aAA+BuE,IAFpD,EAAA,EAE+E,EAC9E0D,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IAHlD,EAAA,EAG6EgB,KAAK9J,MAAMuE,OACvFqQ,EAAY,IAAI7C,EACpB,OAAIxF,IAAYC,GAChB1C,KAAK+K,sBAAsBtI,EAASC,EAAO,SAASyH,EAAGO,EAAIM,EAAUC,GACjE,IAAIC,EAAaf,EAAEtF,YAAYmG,EAAUC,GACzCC,EAAWtJ,KAAOiJ,EAAOM,gBAAgBT,GACzCQ,EAAWxJ,KAAOmJ,EAAOO,eAAeV,GACpCQ,aAAsBjD,IAAmBiD,EAAWxC,WAAagC,GACrEI,EAAUtC,OAAO0C,KANSJ,IAUnC,CACChV,IAAK,eACLI,MAAO,SAAA,EAAA,EAAA,GACH,IAAIuM,EAA6B,EAAnBX,UAAUrH,aAA+BuE,IADpD,EAAA,EAC+E,EAC9E0D,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IAFlD,EAAA,EAE6EgB,KAAK9J,MAAMuE,OACvFqI,EAA2B,EAAnBhB,UAAUrH,aAA+BuE,IAHlD,EAAA,EAG6E,GAChF,GAAIyD,IAAYC,EAAO,MAAO,GAC9B,IAAIH,EAAQ,GAIZ,OAHAvC,KAAK+K,sBAAsBtI,EAASC,EAAO,SAASyH,EAAGkB,EAAG5I,EAASC,GAC/DH,GAAS4H,EAAExH,aAAaF,EAASC,EAAOI,KAErCP,IAEZ,CACCzM,IAAK,kBACLI,MAAO,SAAyBwS,GAE5B,IADA,IAAI4C,EACKC,EAAK,EAAGA,EAAKvL,KAAKgJ,OAAOvO,SAAU8Q,EAAI,CAC5C,IAAI3J,EAAO5B,KAAKgJ,OAAOuC,GACvB,KAAI3J,GAAQ8G,GACP,MADmB4C,EAAa1J,EAGzC,OAAO0J,IAEZ,CACCxV,IAAK,qBACLI,MAAO,SAA4BsV,GAC/B,IAAIC,EAASzL,KACTc,EAAU,IAAID,EAClB,GAAIb,KAAK6G,MAAwB,MAAhB2E,EAAsB,OAAO1K,EAC9C,IAAI4K,EAAiB1L,KAAK8I,eAAe9I,KAAK9J,MAAMuE,QACpD,IAAKiR,EAAgB,OAAO5K,EAC5B,IAAI6K,EAAkBD,EAAepV,MACjCsV,EAAgC,MAAhBJ,EAAuBA,EAAexL,KAAKiJ,QAAQxO,OASvE,OARAuF,KAAKiJ,QAAQrI,MAAM+K,EAAiBC,GAAezS,QAAQ,SAASgR,GAChE,IACQ0B,EACAC,EAFH3B,EAAEtD,MAAwB,MAAhB2E,IACPK,EAAoB,MAAb1B,EAAElB,QAAkB,CAACkB,EAAElB,QAAQxO,QAAU,GAChDqR,EAAW3B,EAAE3I,mBAAmByF,MAAMkD,EAAG0B,GAC7CJ,EAAOpJ,QAAUyJ,EAAS7K,SAC1BH,EAAQS,UAAUuK,MAGnBhL,IAEZ,CACChL,IAAK,iBACLI,MAAO,SAAwBuL,GAE3B,IADA,IAAIsK,EAAS,GACJrB,EAAK,EAAGA,EAAK1K,KAAKiJ,QAAQxO,SAAUiQ,EAAI,CAC7C,IAAIsB,EAAUhM,KAAKiJ,QAAQyB,GACvBuB,EAAgBF,EAAOtR,OAE3B,GAAIgH,IADJsK,GAAUC,EAAQ9V,OACAuE,OACd,MAAO,CACHnE,MAAOoU,EACPwB,OAAQzK,EAAMwK,MAK/B,CACCnW,IAAK,iBACLI,MAAO,SAAwBwS,GAC3B,OAAO1I,KAAKiJ,QAAQrI,MAAM,EAAG8H,GAAYyD,OAAO,SAAS1K,EAAK0I,GAC1D,OAAO1I,EAAO0I,EAAEjU,MAAMuE,QACvB,KAER,CACC3E,IAAK,wBACLI,MAAO,SAA+BuM,EAA/B,EAAA,GACH,IAAIC,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IADlD,EAAA,EAC6EgB,KAAK9J,MAAMuE,OACvFG,EAAwB,EAAnBkH,UAAUrH,OAFhB,OAE4CuE,EAC3CoN,EAAgBpM,KAAK8I,eAAerG,GACxC,GAAI2J,EAAe,CACf,IAAIC,EAAcrM,KAAK8I,eAAepG,GAClC4J,EAAcD,GAAeD,EAAc9V,QAAU+V,EAAY/V,MACjEiW,EAAoBH,EAAcF,OAClCM,EAAkBH,GAAeC,EAAcD,EAAYH,OAASlM,KAAKiJ,QAAQmD,EAAc9V,OAAOJ,MAAMuE,OAEhH,GADAG,EAAGoF,KAAKiJ,QAAQmD,EAAc9V,OAAQ8V,EAAc9V,MAAOiW,EAAmBC,GAC1EH,IAAgBC,EAAa,CAC7B,IAAK,IAAI5B,EAAK0B,EAAc9V,MAAQ,EAAGoU,EAAK2B,EAAY/V,QAASoU,EAC7D9P,EAAGoF,KAAKiJ,QAAQyB,GAAKA,EAAI,EAAG1K,KAAKiJ,QAAQyB,GAAIxU,MAAMuE,QAEvDG,EAAGoF,KAAKiJ,QAAQoD,EAAY/V,OAAQ+V,EAAY/V,MAAO,EAAG+V,EAAYH,YAInF,CACCpW,IAAK,SACLI,MAAO,SAAA,EAAA,GACH,IAAIuM,EAA6B,EAAnBX,UAAUrH,aAA+BuE,IADpD,EAAA,EAC+E,EAC9E0D,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IAFlD,EAAA,EAE6EgB,KAAK9J,MAAMuE,OACvFgS,EAAgB1O,EAAKtB,EAAgBgJ,EAAclL,WAAY,SAAUyF,MAAMxF,KAAKwF,KAAMyC,EAASC,GAIvG,OAHA1C,KAAK+K,sBAAsBtI,EAASC,EAAO,SAASyH,EAAGkB,EAAGL,EAAUC,GAChEwB,EAAclL,UAAU4I,EAAEpF,OAAOiG,EAAUC,MAExCwB,IAEZ,CACC3W,IAAK,kBACLI,MAAO,SAAyB+J,EAAzB,GACH,IAAImH,EAA+B,EAAnBtF,UAAUrH,aAA+BuE,IADtD,EAAA,EACiFW,EAChF+M,EAAiB1M,KAAK8I,eAAe7I,IAAc,CACnD3J,MAAO,EACP4V,OAAQ,GAERS,EAAmBD,EAAeR,OAClCU,EAAkBF,EAAepW,MACjCuW,EAAa7M,KAAKiJ,QAAQ2D,GAC9B,IAAKC,EAAY,OAAO5M,EACxB,IAAI6M,EAAsBH,EACE,IAAxBG,GAA6BA,EAAsBD,EAAW3W,MAAMuE,SACpEqS,EAAsBD,EAAW/H,gBAAgB6H,EAtoCrE,SAAwBvF,GACpB,OAAQA,GACJ,KAAKzH,EACD,OAAOA,EACX,KAAKA,EACD,OAAOA,EACX,QACI,OAAOyH,GA+nCoE2F,CAAe3F,KAEtF,IAAI4F,EAAgBF,IAAwBD,EAAW3W,MAAMuE,OAE7D,GAD2C,IAAxBqS,IACGE,EAAe,OAAOhN,KAAKoL,eAAewB,GAAmBE,EACnF,IAAIG,EAAmBD,EAAgBJ,EAAkB,EAAIA,EAC7D,GAAIxF,IAAczH,EAAgB,CAC9B,GAAuB,EAAnBsN,EAAsB,CACtB,IAAIC,EAAmBD,EAAmB,EACtCE,EAAcnN,KAAKiJ,QAAQiE,GAC3BE,EAAgBD,EAAYrI,gBAAgB,EAAGnF,GACnD,IAAKwN,EAAYjX,MAAMuE,QAAU2S,IAAkBD,EAAYjX,MAAMuE,OACjE,OAAOuF,KAAKoL,eAAe6B,GAInC,IADA,IACSvC,EADeuC,EACSvC,EAAK1K,KAAKiJ,QAAQxO,SAAUiQ,EAAI,CAC7D,IAAI2C,EAAerN,KAAKiJ,QAAQyB,GAC5B4C,EAAiBD,EAAavI,gBAAgB,EAAGnF,GACrD,IAAK0N,EAAanX,MAAMuE,QAAU6S,IAAmBD,EAAanX,MAAMuE,OACpE,OAAOuF,KAAKoL,eAAeV,GAAM4C,EAGzC,IAAK,IAAIC,EAAMN,EAAmB,EAAU,GAAPM,IAAYA,EAAK,CAClD,IAAIC,EAAUxN,KAAKiJ,QAAQsE,GACvBE,EAAkBD,EAAQ1I,gBAAgB,EAAGnF,GACjD,IAAK6N,EAAQtX,MAAMuE,QAAUgT,IAAoBD,EAAQtX,MAAMuE,OAC3D,OAAOuF,KAAKoL,eAAemC,GAAOC,EAAQtX,MAAMuE,OAGxD,OAAOwF,EAEX,GAAImH,IAAczH,GAAkByH,IAAczH,EAAsB,CAEpE,IADA,IAAI+N,EACKC,EAAOV,EAAkBU,EAAO3N,KAAKiJ,QAAQxO,SAAUkT,EAC5D,GAAI3N,KAAKiJ,QAAQ0E,GAAMzX,MAAO,CAC1BwX,EAA+BC,EAC/B,MAGR,GAAoC,MAAhCD,EAAsC,CACtC,IAAIE,EAAc5N,KAAKiJ,QAAQyE,GAC3BG,EAAkBD,EAAY9I,gBAAgB,EAAGnF,GACrD,GAAwB,IAApBkO,GAAyBD,EAAYlG,cAAcjN,OACnD,OAAOuF,KAAKoL,eAAesC,GAAgCG,EAKnE,IAFA,IACIC,EADAC,GAA8B,EAEzBC,EAAOf,EAAmB,EAAW,GAARe,IAAaA,EAAM,CACrD,IAAIC,EAAUjO,KAAKiJ,QAAQ+E,GACvBE,EAAkBD,EAAQnJ,gBAAgBmJ,EAAQ/X,MAAMuE,OAAQkF,GAEpE,GADKsO,EAAQ/X,OAA6B,IAApBgY,IAAuBJ,EAA4BE,GACjD,IAApBE,EAAuB,CACvB,GAAIA,IAAoBD,EAAQ/X,MAAMuE,OAClC,OAAOuF,KAAKoL,eAAe4C,GAAQE,EAEnCH,EAA6BC,EAC7B,OAIZ,GAAI5G,IAAczH,EACd,IAAK,IAAIwO,EAAOJ,EAA6B,EAAGI,GAAQ9U,KAAK0G,IAAIkN,EAAkBjN,KAAKiJ,QAAQxO,OAAS,KAAM0T,EAAM,CACjH,IAAIC,EAAUpO,KAAKiJ,QAAQkF,GACvBE,EAAkBD,EAAQtJ,gBAAgB,EAAGnF,GAC7C2O,EAAkBtO,KAAKoL,eAAe+C,GAAQE,EAClD,GAAsBpO,EAAlBqO,EAA6B,MACjC,GAAID,IAAoBD,EAAQlY,MAAMuE,OAAQ,OAAO6T,EAG7D,GAAkC,GAA9BP,EACA,OAAO/N,KAAKoL,eAAe2C,GAA8B/N,KAAKiJ,QAAQ8E,GAA4B7X,MAAMuE,OAE5G,GAAI2M,IAAczH,GAAwBK,KAAK6G,OAAS7G,KAAK2C,iBAwHjF,SAAiB4L,GACb,GAAKA,EAAL,CACA,IAAIrY,EAAQqY,EAAMrY,MAClB,OAAQA,GAASqY,EAAMzJ,gBAAgB,EAAGnF,KAAoBzJ,EAAMuE,QA3H4B+T,CAAQxO,KAAKiJ,QAAQgE,IACjG,OAAO,EAEX,GAAiC,MAA7Ba,EACA,OAAO9N,KAAKoL,eAAe0C,GAE/B,IAAK,IAAIW,EAAOxB,EAAkBwB,EAAOzO,KAAKiJ,QAAQxO,SAAUgU,EAAM,CAClE,IAAIC,EAAU1O,KAAKiJ,QAAQwF,GACvBE,EAAkBD,EAAQ5J,gBAAgB,EAAGnF,GACjD,IAAK+O,EAAQxY,MAAMuE,QAAUkU,IAAoBD,EAAQxY,MAAMuE,OAC3D,OAAOuF,KAAKoL,eAAeqD,GAAQE,EAG3C,OAAO,EAEX,GAAIvH,IAAczH,GAAmByH,IAAczH,EAAuB,CAGtE,IAFA,IAAIiP,EACAC,EACKC,EAAO7B,EAAkB6B,EAAO9O,KAAKiJ,QAAQxO,SAAUqU,EAAM,CAClE,IAAIC,EAAU/O,KAAKiJ,QAAQ6F,GACvBE,EAAkBD,EAAQjK,gBAAgB,EAAGnF,GACjD,GAAIqP,IAAoBD,EAAQ7Y,MAAMuE,OAAQ,CAC1CoU,EAA4B7O,KAAKoL,eAAe0D,GAAQE,EACxDJ,EAA8BE,EAC9B,OAGR,GAAmC,MAA/BF,GAAoE,MAA7BC,EAAmC,CAC1E,IAAK,IAAII,EAAOL,EAA6BK,EAAOjP,KAAKiJ,QAAQxO,SAAUwU,EAAM,CAC7E,IAAIC,EAAUlP,KAAKiJ,QAAQgG,GACvBE,EAAkBD,EAAQpK,gBAAgB,EAAGnF,GACjD,GAAIwP,IAAoBD,EAAQhZ,MAAMuE,OAClC,OAAOuF,KAAKoL,eAAe6D,GAAQE,EAG3C,OAAO/H,IAAczH,EAAwBK,KAAK9J,MAAMuE,OAASoU,EAErE,IAAK,IAAIO,EAAO/V,KAAK0G,IAAIkN,EAAkBjN,KAAKiJ,QAAQxO,OAAS,GAAY,GAAR2U,IAAaA,EAAM,CACpF,IAAIC,EAAUrP,KAAKiJ,QAAQmG,GACvBE,EAAkBD,EAAQvK,gBAAgBuK,EAAQnZ,MAAMuE,OAAQkF,GACpE,GAAwB,IAApB2P,EAAuB,CACvB,IAAIC,EAAavP,KAAKoL,eAAegE,GAAQE,EAC7C,GAAkBrP,GAAdsP,EAAyB,OAAOA,EACpC,QAIZ,OAAOtP,IAEZ,CACCnK,IAAK,cACLI,MAAO,SAAqBO,GACxB,OAAOuJ,KAAKwP,aAAa/Y,GAAM,KAEpC,CACCX,IAAK,eACLI,MAAO,SAAsBO,GACzB,IAAIgZ,EAASzP,KACT0P,EAAU1P,KAAK0J,cAAcjT,GACjC,OAAKiZ,EACEA,EAAQja,IAAI,SAASka,GACxB,OAAOF,EAAOxG,QAAQ0G,KAFL,KAK1B,CACC7Z,IAAK,QACLE,IAAK,WACD,OAAO+D,OAAO/C,OAAO,GAAI+G,EAAKtB,EAAgBgJ,EAAclL,WAAY,QAASyF,MAAO,CACpFiJ,QAASjJ,KAAKiJ,QAAQxT,IAAI,SAAS0U,GAC/B,OAAOA,EAAEtI,WAIrB5L,IAAK,SAAa4L,GACd,IAAIoH,EAAUpH,EAAMoH,QAChB2G,EAAc7S,EAAyB8E,EAAO,CAAC,YACnD7B,KAAKiJ,QAAQ9P,QAAQ,SAASgR,EAAGO,GAC7B,OAAOP,EAAEtI,MAAQoH,EAAQyB,KAE7BrM,EAAK5B,EAAgBgJ,EAAclL,WAAY,QAASqV,EAAa5P,MAAM,KAEhF,CACClK,IAAK,aACLE,IAAK,WACD,OAAOgK,KAAKiJ,QAAQ4G,MAAM,SAAS1F,GAC/B,OAAOA,EAAE5C,eAGlB,CACCzR,IAAK,gBACLE,IAAK,WACD,OAAOgK,KAAKiJ,QAAQkD,OAAO,SAAS3M,EAAK2K,GACrC,OAAO3K,EAAO2K,EAAEzC,eACjB,KAEPzR,IAAK,SAAayR,GACdrJ,EAAK5B,EAAgBgJ,EAAclL,WAAY,gBAAiBmN,EAAe1H,MAAM,KAE1F,CACClK,IAAK,QACLE,IAAK,WACD,OAAOgK,KAAKiJ,QAAQkD,OAAO,SAAS3M,EAAK2K,GACrC,OAAO3K,EAAO2K,EAAEjU,OACjB,KAEPD,IAAK,SAAaC,GACdmI,EAAK5B,EAAgBgJ,EAAclL,WAAY,QAASrE,EAAO8J,MAAM,OAGtEyF,GAvbP,SAASA,IACL,IAAIzD,EAA0B,EAAnBF,UAAUrH,aAA+BuE,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,GAG/E,OAFA1G,EAAgB4E,KAAMyF,GACtBzD,EAAKsH,YAAcvP,OAAO/C,OAAO,GAAIsP,EAA2BtE,EAAKsH,aAC9D/L,EAA2ByC,KAAMvD,EAAgBgJ,GAAejL,KAAKwF,KAAMjG,OAAO/C,OAAO,GAAIyO,EAAcL,SAAU,GAAIpD,KAqb5IyD,EAAcL,SAAW,CACrByB,MAAM,EACNC,gBAAiB,KAErBrB,EAAc6E,UAAY,IAC1B7E,EAAc8E,YAAc,KAC5B9E,EAAcqK,gBAAkBpJ,EAChCjB,EAAcsK,gBAAkBnI,EAShC,IAAIoI,GAEI5T,EAAU4T,EAJlBjO,EAAM0D,cAAgBA,GAUdxJ,EAAa+T,EAAa,CAAC,CACvBla,IAAK,UACLI,MAAO,SAAiB8L,GACpBA,EAAOjI,OAAO/C,OAAO,CACjBiZ,GAAIjQ,KAAKiQ,IAAM,EACfvO,KAAM1B,KAAK0B,MAAQ,GACpBM,GACH,IAAIkO,EAAYzQ,OAAOuC,EAAKiO,IAAIxV,OACV,MAAlBuH,EAAKkO,YAAmBA,EAAY7W,KAAKkH,IAAI2P,EAAWlO,EAAKkO,YACjElO,EAAKkO,UAAYA,EAIjB,IAHA,IAAIC,EAAU1Q,OAAOuC,EAAKN,MAAM0O,SAASF,EAAW,KAChDG,EAAQ5Q,OAAOuC,EAAKiO,IAAIG,SAASF,EAAW,KAC5CI,EAAiB,EACdA,EAAiBD,EAAM5V,QAAU4V,EAAMC,KAAoBH,EAAQG,MACpEA,EAENtO,EAAKsD,KAAO+K,EAAMzP,MAAM,EAAG0P,GAAgBzQ,QAAQ,KAAM,OAAS,IAAI0Q,OAAOL,EAAYI,GACzFvS,EAAKtB,EAAgBuT,EAAYzV,WAAY,UAAWyF,MAAMxF,KAAKwF,KAAMgC,KAE9E,CACClM,IAAK,aACLI,MAAO,SAAoBsJ,GACvB,IAAIgR,EAAS,GACTC,EAAS,GAETC,EAAQlS,EADDgB,EAAImR,MAAM,qBAAuB,GACX,GAC7BC,EAAcF,EAAM,GACpBG,EAAMH,EAAM,GAOhB,OANIG,IACAL,EAAS,IAAID,OAAOK,EAAYnW,QAAUoW,EAC1CJ,EAAS,IAAIF,OAAOK,EAAYnW,QAAUoW,GAIvC,CAFPL,EAASA,EAAOM,OAAO9Q,KAAKkQ,UAAW,KACvCO,EAASA,EAAOK,OAAO9Q,KAAKkQ,UAAW,QAG5C,CACCpa,IAAK,YACLI,MAAO,SAAmBsJ,EAAnB,GACH,IAAIsD,EAA2B,EAAnBhB,UAAUrH,aAA+BuE,IADlD,EAAA,EAC6E,GAEhF,GADAQ,EAAMzB,EAAKtB,EAAgBuT,EAAYzV,WAAY,YAAayF,MAAMxF,KAAKwF,KAAMR,EAAKsD,GAAOjD,QAAQ,MAAO,KACvGG,KAAK+Q,QAAS,OAAOvR,EAK1B,IAJA,IAAI2Q,EAAU1Q,OAAOO,KAAK0B,MAAM0O,SAASpQ,KAAKkQ,UAAW,KACrDG,EAAQ5Q,OAAOO,KAAKiQ,IAAIG,SAASpQ,KAAKkQ,UAAW,KACjDc,EAAMhR,KAAK9J,MACX+a,EAAU,GACLrN,EAAK,EAAGA,EAAKpE,EAAI/E,SAAUmJ,EAAI,CACpC,IAAIsN,EAAUF,EAAMC,EAAUzR,EAAIoE,GAE9BuN,EAAoB3S,EADDwB,KAAKoR,WAAWF,GACkB,GACrDV,EAASW,EAAkB,GAC3BV,EAASU,EAAkB,GAC3BvL,OAAO6K,GAAUzQ,KAAK0B,KAAMuP,GAAWd,EAAQe,EAAQzW,OAAS,GAC3DmL,OAAO4K,GAAUxQ,KAAKiQ,GAAIgB,GAAWZ,EAAMa,EAAQzW,OAAS,GAChEwW,GAAWzR,EAAIoE,GAExB,OAAOqN,IAEZ,CACCnb,IAAK,aACLI,MAAO,WACH,IAAImb,EACA7R,EAAMQ,KAAK9J,MAEf,IAAsB,IADHsJ,EAAI6J,OAAO,SACH7J,EAAI/E,QAAUuF,KAAKsR,WAAY,OAAO,EAKjE,IAJA,IACIC,EAAoB/S,EADAwB,KAAKoR,WAAW5R,GACkB,GACtDgR,EAASe,EAAkB,GAC3Bd,EAASc,EAAkB,GACtBC,EAAO1P,UAAUrH,OAAQoR,EAAO,IAAIvR,MAAMkX,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC7E5F,EAAK4F,GAAQ3P,UAAU2P,GAE3B,OAAOzR,KAAK0B,MAAQkE,OAAO6K,IAAW7K,OAAO4K,IAAWxQ,KAAKiQ,KAAOoB,EAAQtT,EAAKtB,EAAgBuT,EAAYzV,WAAY,aAAcyF,OAAOxF,KAAKyM,MAAMoK,EAAO,CAACrR,MAAM0R,OAAO7F,MAEnL,CACC/V,IAAK,aACLE,IAAK,WACD,OAAOgK,KAAKkQ,UAAYzQ,OAAOO,KAAK0B,MAAMjH,SAE/C,CACC3E,IAAK,aACLE,IAAK,WACD,OAAO+H,EAAKtB,EAAgBuT,EAAYzV,WAAY,aAAcyF,OAAS+G,QAAQ/G,KAAK9J,WAGzF8Z,GAzFP,SAASA,IAEL,OADA5U,EAAgB4E,KAAMgQ,GACfzS,EAA2ByC,KAAMvD,EAAgBuT,GAAa/I,MAAMjH,KAAM8B,YAyF7FC,EAAMiO,YAAcA,EAEpB,IAAIrK,GAEIvJ,EAAUuJ,EA+DZF,GAzDExJ,EAAa0J,EAAY,CAAC,CACtB7P,IAAK,UACLI,MAAO,SAAiB8L,GAChBA,EAAKsD,OAASI,aAAa1D,EAAKsD,KAChCtD,EAAK2H,UAAS3H,EAAKsD,KAAOtD,EAAK2H,SACnC,IAAIG,EAAS9H,EAAK8H,OAClB9H,EAAK8H,OAAS/P,OAAO/C,OAAO,GAAI2O,EAAWgM,sBACvC3P,EAAKjC,MAAKiC,EAAK8H,OAAO8H,EAAElQ,KAAOM,EAAKjC,IAAI8R,eACxC7P,EAAKzB,MAAKyB,EAAK8H,OAAO8H,EAAE3B,GAAKjO,EAAKzB,IAAIsR,eACtC7P,EAAKjC,KAAOiC,EAAKzB,KAAOyB,EAAK8H,OAAO8H,EAAElQ,OAASM,EAAK8H,OAAO8H,EAAE3B,KAC7DjO,EAAK8H,OAAOgI,EAAEpQ,KAAOM,EAAKjC,IAAIgS,WAAa,EAC3C/P,EAAK8H,OAAOgI,EAAE7B,GAAKjO,EAAKzB,IAAIwR,WAAa,EACrC/P,EAAK8H,OAAOgI,EAAEpQ,OAASM,EAAK8H,OAAOgI,EAAE7B,KACrCjO,EAAK8H,OAAOkI,EAAEtQ,KAAOM,EAAKjC,IAAIkS,UAC9BjQ,EAAK8H,OAAOkI,EAAE/B,GAAKjO,EAAKzB,IAAI0R,YAGpClY,OAAO/C,OAAOgL,EAAK8H,OAAQA,GAC3B/P,OAAOpE,KAAKqM,EAAK8H,QAAQ3Q,QAAQ,SAAS+Y,GACtC,IAAI/H,EAAInI,EAAK8H,OAAOoI,GACd,YAAa/H,IAAIA,EAAE4G,QAAU/O,EAAK+O,WAE5ChT,EAAKtB,EAAgBkJ,EAAWpL,WAAY,UAAWyF,MAAMxF,KAAKwF,KAAMgC,KAE7E,CACClM,IAAK,aACLI,MAAO,WAGH,IAFA,IAAImb,EACAc,EAAOnS,KAAKmS,KACPX,EAAO1P,UAAUrH,OAAQoR,EAAO,IAAIvR,MAAMkX,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC7E5F,EAAK4F,GAAQ3P,UAAU2P,GAE3B,OAAQJ,EAAQtT,EAAKtB,EAAgBkJ,EAAWpL,WAAY,aAAcyF,OAAOxF,KAAKyM,MAAMoK,EAAO,CAACrR,MAAM0R,OAAO7F,OAAY7L,KAAKuH,YAAcvH,KAAKoS,YAAYpS,KAAK9J,QAAkB,MAARic,IAA6B,MAAZnS,KAAKD,KAAeC,KAAKD,KAAOoS,KAAsB,MAAZnS,KAAKO,KAAe4R,GAAQnS,KAAKO,QAEjR,CACCzK,IAAK,cACLI,MAAO,SAAqBsJ,GACxB,OAAgE,GAAzDQ,KAAKwE,OAAOxE,KAAKyE,MAAMjF,EAAKQ,MAAOA,MAAMjK,QAAQyJ,KAE7D,CACC1J,IAAK,OACLE,IAAK,WACD,OAAOgK,KAAKqS,YAEhBpc,IAAK,SAAakc,GACdnS,KAAKqS,WAAaF,IAEvB,CACCrc,IAAK,aACLE,IAAK,WACD,OAAOgK,KAAKuH,WAAaxJ,EAAKtB,EAAgBkJ,EAAWpL,WAAY,aAAcyF,MAAQ,MAE/F/J,IAAK,SAAaC,GACdmI,EAAK5B,EAAgBkJ,EAAWpL,WAAY,aAAcrE,EAAO8J,MAAM,OAGxE2F,GA5DP,SAASA,EAAW3D,GAEhB,OADA5G,EAAgB4E,KAAM2F,GACfpI,EAA2ByC,KAAMvD,EAAgBkJ,GAAYnL,KAAKwF,KAAMjG,OAAO/C,OAAO,GAAI2O,EAAWP,SAAU,GAAIpD,KA4DtI2D,EAAWP,SAAW,CAClBuE,QAAS,cACTnF,OAAQ,SAAgB2N,GAIpB,MAAO,CAHG1S,OAAO0S,EAAKF,WAAW7B,SAAS,EAAG,KACjC3Q,OAAO0S,EAAKJ,WAAa,GAAG3B,SAAS,EAAG,KACzC+B,EAAKN,eACU1J,KAAK,MAEnC1D,MAAO,SAAejF,GAClB,IACI8S,EAAc9T,EADDgB,EAAI+S,MAAM,KACkB,GACzCC,EAAMF,EAAY,GAClBG,EAAQH,EAAY,GACpBI,EAAOJ,EAAY,GACvB,OAAO,IAAI5M,KAAKgN,EAAMD,EAAQ,EAAGD,KAGzC7M,EAAWgM,mBAAqB,WAC5B,MAAO,CACHK,EAAG,CACC1M,KAAM0K,EACNtO,KAAM,EACNuO,GAAI,GACJC,UAAW,GAEf4B,EAAG,CACCxM,KAAM0K,EACNtO,KAAM,EACNuO,GAAI,GACJC,UAAW,GAEf0B,EAAG,CACCtM,KAAM0K,EACNtO,KAAM,KACNuO,GAAI,QAIhBlO,EAAM4D,WAAaA,EAEnB,IAAIgN,GAKI1W,EAAa0W,EAAa,CAAC,CACvB7c,IAAK,SACLI,MAAO,SAAgBiK,EAAOK,GAC1B,GAAa,MAATL,GAAwB,MAAPK,IAAeL,IAAUH,KAAK4S,gBAAkBpS,IAAQR,KAAK6S,cAClF,IACI7S,KAAK8S,cAAc3S,EAAOK,GAC5B,MAAO5J,OAEd,CACCd,IAAK,gBACLI,MAAO,cACR,CACCJ,IAAK,aACLI,MAAO,cACR,CACCJ,IAAK,eACLI,MAAO,cACR,CACCJ,IAAK,iBACLE,IAAK,WACD,IAAImK,EACJ,IACIA,EAAQH,KAAK+S,sBACf,MAAOnc,IACT,OAAgB,MAATuJ,EAAgBA,EAAQH,KAAK9J,MAAMuE,SAE/C,CACC3E,IAAK,eACLE,IAAK,WACD,IAAIwK,EACJ,IACIA,EAAMR,KAAKgT,oBACb,MAAOpc,IACT,OAAc,MAAP4J,EAAcA,EAAMR,KAAK9J,MAAMuE,SAE3C,CACC3E,IAAK,WACLE,IAAK,WACD,OAAO,MAGR2c,GA5CP,SAASA,IACLvX,EAAgB4E,KAAM2S,GA+ClC,IAAIM,GAEI7W,EAAU6W,EAJlBlR,EAAM4Q,YAAcA,GAcZ1W,EAAagX,EAAiB,CAAC,CAC3Bnd,IAAK,gBACLI,MAAO,SAAuBiK,EAAOK,GACjCR,KAAKuC,MAAM2Q,kBAAkB/S,EAAOK,KAEzC,CACC1K,IAAK,aACLI,MAAO,SAAoBid,GACvB,IAAItI,EAAS7K,KACbjG,OAAOpE,KAAKwd,GAAUha,QAAQ,SAASia,GACnC,OAAOvI,EAAOwI,oBAAoBJ,EAAgBK,WAAWF,GAAQD,EAASC,QAGvF,CACCtd,IAAK,eACLI,MAAO,WACH,IAAIuV,EAASzL,KACbjG,OAAOpE,KAAKqK,KAAKuT,WAAWpa,QAAQ,SAASia,GACzC,OAAO3H,EAAO4H,oBAAoBD,OAG3C,CACCtd,IAAK,sBACLI,MAAO,SAA6Bkd,EAAOI,GACnCxT,KAAKuT,UAAUH,KACfpT,KAAKuC,MAAMzI,oBAAoBsZ,EAAOpT,KAAKuT,UAAUH,WAC9CpT,KAAKuT,UAAUH,IAEtBI,IACAxT,KAAKuC,MAAMpI,iBAAiBiZ,EAAOI,GACnCxT,KAAKuT,UAAUH,GAASI,KAGjC,CACC1d,IAAK,cACLE,IAAK,WACD,OAAOgK,KAAKuC,MAAMkR,YAAczT,KAAKuC,MAAMkR,cAAgB3c,WAEhE,CACChB,IAAK,WACLE,IAAK,WACD,OAAOgK,KAAKuC,QAAUvC,KAAK0T,YAAYC,gBAE5C,CACC7d,IAAK,wBACLE,IAAK,WACD,OAAOgK,KAAKuC,MAAMqQ,iBAEvB,CACC9c,IAAK,sBACLE,IAAK,WACD,OAAOgK,KAAKuC,MAAMsQ,eAEvB,CACC/c,IAAK,QACLE,IAAK,WACD,OAAOgK,KAAKuC,MAAMrM,OAEtBD,IAAK,SAAaC,GACd8J,KAAKuC,MAAMrM,MAAQA,MAGpB+c,GAtEP,SAASA,EAAgB1Q,GACrB,IAAIiH,EAKJ,OAJApO,EAAgB4E,KAAMiT,IACtBzJ,EAAQjM,EAA2ByC,KAAMvD,EAAgBwW,GAAiBzY,KAAKwF,QACzEuC,MAAQA,EACdiH,EAAM+J,UAAY,GACX/J,EAkEnByJ,EAAgBK,WAAa,CACzBM,gBAAiB,UACjBrR,MAAO,QACPsR,KAAM,OACNC,MAAO,QACPC,MAAO,QACPxP,OAAQ,QAIZ,IAAIyP,IAEI5X,EAAU4X,GAJlBjS,EAAMkR,gBAAkBA,GAUhBhX,EAAa+X,GAAgC,CAAC,CAC1Cle,IAAK,gBACLI,MAAO,SAAuBiK,EAAOK,GACjC,IACIyT,EAGAC,EACAC,EALCnU,KAAK0T,YAAYU,eAClBH,EAAQjU,KAAK0T,YAAYU,eACvBC,SAASrU,KAAKuC,MAAM+R,YAActU,KAAKuC,MAAOpC,GACpD8T,EAAMM,OAAOvU,KAAKuC,MAAMiS,WAAaxU,KAAKuC,MAAO/B,IAE7C2T,GADAD,EAAOlU,KAAK0T,aACKe,cAAgBP,EAAKO,kBAEtCN,EAAUO,kBACVP,EAAUQ,SAASV,OAG5B,CACCne,IAAK,wBACLE,IAAK,WACD,IAAIke,EAAOlU,KAAK0T,YACZS,EAAYD,EAAKO,cAAgBP,EAAKO,eAC1C,OAAON,GAAaA,EAAUS,eAEnC,CACC9e,IAAK,sBACLE,IAAK,WACD,IAAIke,EAAOlU,KAAK0T,YACZS,EAAYD,EAAKO,cAAgBP,EAAKO,eAC1C,OAAON,GAAanU,KAAK+S,sBAAwBtT,OAAO0U,GAAW1Z,SAExE,CACC3E,IAAK,QACLE,IAAK,WACD,OAAOgK,KAAKuC,MAAMsS,aAEtB5e,IAAK,SAAaC,GACd8J,KAAKuC,MAAMsS,YAAc3e,MAG1B8d,IAzCP,SAASA,KAEL,OADA5Y,EAAgB4E,KAAMgU,IACfzW,EAA2ByC,KAAMvD,EAAgBuX,IAAgC/M,MAAMjH,KAAM8B,YAyChHC,EAAMiS,+BAAiCA,GAEvC,IAAI/R,IAqBIhG,EAAagG,GAAW,CAAC,CACrBnM,IAAK,aACLI,MAAO,SAAoBoP,GACvB,OAAe,MAARA,GAAgBA,IAAStF,KAAKqB,OAAOiE,MAAQA,IAASI,MAAQ1F,KAAKqB,kBAAkBsE,IAEjG,CACC7P,IAAK,cACLI,MAAO,WACH8J,KAAKxH,GAAGsc,WAAW,CACflB,gBAAiB5T,KAAK+U,eACtBxS,MAAOvC,KAAKgV,SACZnB,KAAM7T,KAAKiV,QACXnB,MAAO9T,KAAKkV,SACZnB,MAAO/T,KAAKmV,SACZ5Q,OAAQvE,KAAKoV,cAGtB,CACCtf,IAAK,gBACLI,MAAO,WACC8J,KAAKxH,IAAIwH,KAAKxH,GAAG6c,iBAE1B,CACCvf,IAAK,aACLI,MAAO,SAAoBof,GACvB,IAAK,IAAI9D,EAAO1P,UAAUrH,OAAQoR,EAAO,IAAIvR,MAAa,EAAPkX,EAAWA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IAChG5F,EAAK4F,EAAO,GAAK3P,UAAU2P,GAE/B,IAAI8D,EAAYvV,KAAKwV,WAAWF,GAC3BC,GACLA,EAAUpc,QAAQ,SAASsc,GACvB,OAAOA,EAAExO,WAAM,EAAQ4E,OAGhC,CACC/V,IAAK,iBACLI,MAAO,WACC8J,KAAK9J,QAAU8J,KAAKxH,GAAGtC,OACvB+P,QAAQC,KAAK,2GAEjBlG,KAAK0V,WAAa,CACdvV,MAAOH,KAAK4S,eACZpS,IAAKR,KAAKC,aAGnB,CACCnK,IAAK,cACLI,MAAO,WACH8J,KAAKqB,OAAOnL,MAAQ8J,KAAKxH,GAAGtC,MAC5B8J,KAAKqC,OAASrC,KAAKqB,OAAOnL,QAE/B,CACCJ,IAAK,gBACLI,MAAO,WACH,IAAIyf,EAAmB3V,KAAKqB,OAAOqG,cAC/BkO,EAAW5V,KAAKqB,OAAOnL,MACvB2f,EAAY7V,KAAK0H,gBAAkBiO,GAAoB3V,KAAK9J,QAAU0f,EAC1E5V,KAAK8V,eAAiBH,EACtB3V,KAAKqC,OAASuT,EACV5V,KAAKxH,GAAGtC,QAAU0f,IAAU5V,KAAKxH,GAAGtC,MAAQ0f,GAC5CC,GAAW7V,KAAK+V,sBAEzB,CACCjgB,IAAK,gBACLI,MAAO,SAAuB8L,GAC1B,IAAIsD,EAAOtD,EAAKsD,KACZ0Q,EAAWjZ,EAAyBiF,EAAM,CAAC,SAC3CiU,GAAcjW,KAAKkW,WAAW5Q,GAC9B6Q,GA7xDpB,SAASC,EAAejM,EAAG3D,GACvB,GAAIA,IAAM2D,EAAG,OAAO,EACpB,IAAIkM,EAAO/b,MAAMmE,QAAQ+H,GACrB8P,EAAOhc,MAAMmE,QAAQ0L,GAEzB,GAAIkM,GAAQC,EAAM,CACd,GAAI9P,EAAE/L,QAAU0P,EAAE1P,OAAQ,OAC1B,IAAKkB,EAAI,EAAGA,EAAI6K,EAAE/L,OAAQkB,IACtB,IAAKya,EAAe5P,EAAE7K,GAAIwO,EAAExO,IAAK,OAErC,OAAO,EAEX,GAAI0a,GAAQC,EAAZ,CACA,GAAI9P,GAAK2D,GAAoB,WAAfpP,EAAQyL,IAAkC,WAAfzL,EAAQoP,GAAiB,CAC9D,IAAIoM,EAAQ/P,aAAad,KACrB8Q,EAAQrM,aAAazE,KACzB,GAAI6Q,GAASC,EAAO,OAAOhQ,EAAEiQ,WAAatM,EAAEsM,UAC5C,GAAIF,GAASC,EAAO,OACpB,IAAIE,EAAUlQ,aAAajB,OACvBoR,EAAUxM,aAAa5E,OAC3B,GAAImR,GAAWC,EAAS,OAAOnQ,EAAE7H,YAAcwL,EAAExL,WACjD,GAAI+X,GAAWC,EAAS,OAExB,IADA,IAAIhhB,EAAOoE,OAAOpE,KAAK6Q,GAClB7K,EAAI,EAAGA,EAAIhG,EAAK8E,OAAQkB,IACzB,IAAK5B,OAAOQ,UAAUuD,eAAetD,KAAK2P,EAAGxU,EAAKgG,IAAK,OAE3D,IAAKA,EAAI,EAAGA,EAAIhG,EAAK8E,OAAQkB,IACzB,IAAKya,EAAejM,EAAExU,EAAKgG,IAAK6K,EAAE7Q,EAAKgG,KAAM,OAEjD,OAAO,EACJ,OAAI6K,GAAK2D,GAAkB,mBAAN3D,GAAiC,mBAAN2D,GAC5C3D,EAAE7H,aAAewL,EAAExL,YA8vDAyX,CAAepW,KAAKqB,OAAQ2U,GAC1CC,IAAYjW,KAAKsF,KAAOA,GACxB6Q,GAAYnW,KAAKqB,OAAOuV,cAAcZ,IACtCC,GAAcE,IAAYnW,KAAK6W,kBAExC,CACC/gB,IAAK,eACLI,MAAO,SAAsB+J,GACR,MAAbA,IACJD,KAAKC,UAAYA,EACjBD,KAAK8W,mBAAmB7W,MAE7B,CACCnK,IAAK,qBACLI,MAAO,SAA4B+J,GAC/B,IAAIuJ,EAAQxJ,KACZA,KAAK+W,qBACL/W,KAAKgX,mBAAqB/W,EAC1BD,KAAKiX,gBAAkBC,WAAW,WACzB1N,EAAMhR,KACXgR,EAAMvJ,UAAYuJ,EAAMwN,mBACxBxN,EAAMuN,uBACP,MAER,CACCjhB,IAAK,oBACLI,MAAO,WACH8J,KAAKmX,WAAW,SAAUnX,KAAKoX,aAC3BpX,KAAKqB,OAAOkG,YAAYvH,KAAKmX,WAAW,WAAYnX,KAAKoX,eAElE,CACCthB,IAAK,qBACLI,MAAO,WACC8J,KAAKiX,kBACLI,aAAarX,KAAKiX,wBACXjX,KAAKiX,mBAGrB,CACCnhB,IAAK,cACLI,MAAO,WACH8J,KAAKC,UAAYD,KAAKqB,OAAOyD,gBAAgB9E,KAAKC,UAAWN,KAElE,CACC7J,IAAK,sBACLI,MAAO,WACC8J,KAAK4S,iBAAmB5S,KAAKC,WACjCD,KAAKsX,gBAEV,CACCxhB,IAAK,KACLI,MAAO,SAAYof,EAAI9B,GAGnB,OAFKxT,KAAKwV,WAAWF,KAAKtV,KAAKwV,WAAWF,GAAM,IAChDtV,KAAKwV,WAAWF,GAAInf,KAAKqd,GAClBxT,OAEZ,CACClK,IAAK,MACLI,MAAO,SAAaof,EAAI9B,GACpB,IAAKxT,KAAKwV,WAAWF,GAAK,OAAOtV,KACjC,IAAKwT,EAED,cADOxT,KAAKwV,WAAWF,GAChBtV,KAEX,IAAIuX,EAASvX,KAAKwV,WAAWF,GAAIvf,QAAQyd,GAEzC,OADc,GAAV+D,GAAavX,KAAKwV,WAAWF,GAAI/e,OAAOghB,EAAQ,GAC7CvX,OAEZ,CACClK,IAAK,WACLI,MAAO,SAAkBU,GAGrB,GAFAoJ,KAAKoX,YAAcxgB,EACnBoJ,KAAK+W,sBACA/W,KAAK0V,WAAY,OAAO1V,KAAKwX,cAClC,IAAI1W,EAAU,IAAIhB,EACdE,KAAKxH,GAAGtC,MAAO8J,KAAKC,UACpBD,KAAK9J,MAAO8J,KAAK0V,YACjB+B,EAAczX,KAAKqB,OAAO4C,cAC1BiI,EAASlM,KAAKqB,OAAO9K,OAAOuK,EAAQV,eAAgBU,EAAQ4W,QAAQjd,OAAQqG,EAAQG,SAAUH,EAAQ6D,iBAAiBuH,OACvHvH,EAAkB8S,IAAgBzX,KAAKqB,OAAO4C,cAAgBnD,EAAQ6D,gBAAkBhF,EACxFM,EAAYD,KAAKqB,OAAOyD,gBAAgBhE,EAAQV,eAAiB8L,EAAQvH,GAC7E3E,KAAK6W,gBACL7W,KAAK2X,aAAa1X,UACXD,KAAKoX,cAEjB,CACCthB,IAAK,YACLI,MAAO,WACC8J,KAAK9J,QAAU8J,KAAKxH,GAAGtC,OACvB8J,KAAKwX,cAETxX,KAAKqB,OAAOmB,WACZxC,KAAK6W,gBACL7W,KAAK+U,mBAEV,CACCjf,IAAK,UACLI,MAAO,SAAiBof,GACpBA,EAAGsC,iBACHtC,EAAGuC,oBAER,CACC/hB,IAAK,WACLI,MAAO,WACH8J,KAAK8X,wBAEV,CACChiB,IAAK,WACLI,MAAO,WACH8J,KAAK8X,wBAEV,CACChiB,IAAK,UACLI,MAAO,WACH8J,KAAK+X,gBACL/X,KAAKwV,WAAW/a,OAAS,SAClBuF,KAAKxH,KAEjB,CACC1C,IAAK,OACLE,IAAK,WACD,OAAOgK,KAAKqB,OAAOiE,MAEvBrP,IAAK,SAAaqP,GACd,IAOIjE,EAPArB,KAAKkW,WAAW5Q,KACdA,aAAgBvD,EAAMG,QAAWlC,KAAKqB,OAAOlG,cAAgBkK,EAAYC,KAM3EjE,EAAS8E,EAAW,CACpBb,KAAMA,KAEHoC,cAAgB1H,KAAKqB,OAAOqG,cACnC1H,KAAKqB,OAASA,GATVrB,KAAKqB,OAAOuV,cAAc,CACtBtR,KAAMA,OAUnB,CACCxP,IAAK,QACLE,IAAK,WACD,OAAOgK,KAAKqC,QAEhBpM,IAAK,SAAauJ,GACdQ,KAAKqB,OAAOnL,MAAQsJ,EACpBQ,KAAK6W,gBACL7W,KAAKsX,gBAEV,CACCxhB,IAAK,gBACLE,IAAK,WACD,OAAOgK,KAAK8V,gBAEhB7f,IAAK,SAAauJ,GACdQ,KAAKqB,OAAOqG,cAAgBlI,EAC5BQ,KAAK6W,gBACL7W,KAAKsX,gBAEV,CACCxhB,IAAK,aACLE,IAAK,WACD,OAAOgK,KAAKqB,OAAOgR,YAEvBpc,IAAK,SAAa+a,GACdhR,KAAKqB,OAAOgR,WAAarB,EACzBhR,KAAK6W,gBACL7W,KAAKsX,gBAEV,CACCxhB,IAAK,iBACLE,IAAK,WACD,OAAOgK,KAAKiX,gBAAkBjX,KAAKgX,mBAAqBhX,KAAKxH,GAAGoa,iBAErE,CACC9c,IAAK,YACLE,IAAK,WACD,OAAOgK,KAAKiX,gBAAkBjX,KAAKgX,mBAAqBhX,KAAKxH,GAAGqa,cAEpE5c,IAAK,SAAawL,GACTzB,KAAKxH,IAAOwH,KAAKxH,GAAGwf,WACzBhY,KAAKxH,GAAGyf,OAAOxW,EAAKA,GACpBzB,KAAK+U,sBAGN9S,IA9QP,SAASA,GAAUzJ,EAAIwJ,GACnB5G,EAAgB4E,KAAMiC,IACtBjC,KAAKxH,GAAKA,aAAcma,EAAcna,EAAmF,IAA9EA,EAAG0f,mBAAoC,UAAf1f,EAAG2f,SAAsC,aAAf3f,EAAG2f,QAA6BnE,GAAyCf,GAAVza,GAC5JwH,KAAKqB,OAAS8E,EAAWnE,GACzBhC,KAAKwV,WAAa,GAClBxV,KAAKqC,OAAS,GACdrC,KAAK8V,eAAiB,GACtB9V,KAAK+U,eAAiB/U,KAAK+U,eAAe/a,KAAKgG,MAC/CA,KAAKgV,SAAWhV,KAAKgV,SAAShb,KAAKgG,MACnCA,KAAKoV,UAAYpV,KAAKoV,UAAUpb,KAAKgG,MACrCA,KAAKiV,QAAUjV,KAAKiV,QAAQjb,KAAKgG,MACjCA,KAAKmV,SAAWnV,KAAKmV,SAASnb,KAAKgG,MACnCA,KAAKkV,SAAWlV,KAAKkV,SAASlb,KAAKgG,MACnCA,KAAKsX,YAActX,KAAKsX,YAAYtd,KAAKgG,MACzCA,KAAK8X,oBAAsB9X,KAAK8X,oBAAoB9d,KAAKgG,MACzDA,KAAKoY,cACLpY,KAAKwX,cACLxX,KAAKoV,YA+PjBrT,EAAME,UAAYA,GAElB,IAAIoW,IAEIjc,EAAUic,GA0BZ5S,GApBExJ,EAAaoc,GAAY,CAAC,CACtBviB,IAAK,UACLI,MAAO,SAAiB8L,GAChBA,EAAKsW,OAAMtW,EAAKsD,KAAO,IAAIiL,OAAOvO,EAAKsW,KAAK,GAAG7d,SACnDsD,EAAKtB,EAAgB4b,GAAW9d,WAAY,UAAWyF,MAAMxF,KAAKwF,KAAMgC,KAE7E,CACClM,IAAK,aACLI,MAAO,WAGH,IAFA,IACImb,EADA7H,EAAQxJ,KAEHwR,EAAO1P,UAAUrH,OAAQoR,EAAO,IAAIvR,MAAMkX,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC7E5F,EAAK4F,GAAQ3P,UAAU2P,GAE3B,OAAOzR,KAAKsY,KAAKC,KAAK,SAAS3hB,GAC3B,OAAyC,GAAlCA,EAAEb,QAAQyT,EAAM9B,mBACpB2J,EAAQtT,EAAKtB,EAAgB4b,GAAW9d,WAAY,aAAcyF,OAAOxF,KAAKyM,MAAMoK,EAAO,CAACrR,MAAM0R,OAAO7F,QAGjHwM,IAvBP,SAASA,KAEL,OADAjd,EAAgB4E,KAAMqY,IACf9a,EAA2ByC,KAAMvD,EAAgB4b,IAAYpR,MAAMjH,KAAM8B,YAuB5FC,EAAMsW,WAAaA,GAEnB,IAAIxS,IAEIzJ,EAAUyJ,GAiPZ3D,GA3OEjG,EAAa4J,GAAc,CAAC,CACxB/P,IAAK,UACLI,MAAO,SAAiB8L,GACpBjE,EAAKtB,EAAgBoJ,GAAatL,WAAY,UAAWyF,MAAMxF,KAAKwF,KAAMgC,GAC1EhC,KAAKwY,mBAEV,CACC1iB,IAAK,iBACLI,MAAO,WACH,IAAIiK,EAAQ,KAAOH,KAAKyY,cAAgB,WAAa,IAGjDjY,GAAOR,KAAK0Y,MAAQ,IAAM9Y,EAAaI,KAAK2Y,OAAS,SAAW3Y,KAAK0Y,MAAQ,MAAQ,IAAM,IAC/F1Y,KAAK4Y,mBAAqB,IAAIrT,OAAOpF,EAHtB,oBAGyCK,GACxDR,KAAK6Y,cAAgB,IAAItT,OAAOpF,EAHtB,OAGoCK,GAC9CR,KAAK8Y,kBAAoB,IAAIvT,OAAO,IAAMvF,KAAK+Y,WAAWtjB,IAAImK,GAAcuI,KAAK,IAAM,IAAK,KAC5FnI,KAAKgZ,0BAA4B,IAAIzT,OAAO3F,EAAaI,KAAKiZ,oBAAqB,OAExF,CACCnjB,IAAK,6BACLI,MAAO,SAAoCA,GACvC,OAAOA,EAAM2J,QAAQG,KAAKgZ,0BAA2B,MAE1D,CACCljB,IAAK,6BACLI,MAAO,SAAoCA,GACvC,IAAIgjB,EAAQhjB,EAAMqc,MAAMvS,KAAK2Y,OAE7B,OADAO,EAAM,GAAKA,EAAM,GAAGrZ,QAAQ,wBAAyBG,KAAKiZ,oBACnDC,EAAM/Q,KAAKnI,KAAK2Y,SAE5B,CACC7iB,IAAK,YACLI,MAAO,SAAmBsJ,GAEtB,IADA,IAAI6R,EACKG,EAAO1P,UAAUrH,OAAQoR,EAAO,IAAIvR,MAAa,EAAPkX,EAAWA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IAChG5F,EAAK4F,EAAO,GAAK3P,UAAU2P,GAE/B,OAAQJ,EAAQtT,EAAKtB,EAAgBoJ,GAAatL,WAAY,YAAayF,OAAOxF,KAAKyM,MAAMoK,EAAO,CAACrR,KAAMA,KAAKmZ,2BAA2B3Z,EAAIK,QAAQG,KAAK8Y,kBAAmB9Y,KAAK2Y,SAASjH,OAAO7F,MAEzM,CACC/V,IAAK,mBACLI,MAAO,SAA0B+Z,EAA1B,GAGH,IAFA,IAAImJ,EAAwC,EAAnBtX,UAAUrH,aAA+BuE,IAD/D,GAAA,EAECqa,EAAQ,EACH5X,EAAM,EAAGA,EAAMwO,IAAMxO,EACtBzB,KAAKqC,OAAOtM,QAAQiK,KAAKiZ,mBAAoBxX,KAASA,MACpD4X,EACED,IAAoBnJ,GAAMjQ,KAAKiZ,mBAAmBxe,SAG9D,OAAO4e,IAEZ,CACCvjB,IAAK,4BACLI,MAAO,SAAA,GACH,IAAI0K,EAA2B,EAAnBkB,UAAUrH,aAA+BuE,IADlD,EAAA,EAC6EgB,KAAKqC,OACrF,OAAOrC,KAAKsZ,iBAAiBtZ,KAAKmZ,2BAA2BvY,GAAOnG,QAAQ,KAEjF,CACC3E,IAAK,eACLI,MAAO,SAAA,EAAA,EAAA,GACH,IAAIuM,EAA6B,EAAnBX,UAAUrH,aAA+BuE,IADpD,EAAA,EAC+E,EAC9E0D,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IAFlD,EAAA,EAE6EgB,KAAK9J,MAAMuE,OACvFqI,EAA2B,EAAnBhB,UAAUrH,OAHnB,OAG+CuE,EAE9Cua,EAAyB/a,EADDwB,KAAKwZ,2BAA2B/W,EAASC,GACF,GACnED,EAAU8W,EAAuB,GACjC7W,EAAQ6W,EAAuB,GAC/B,OAAOvZ,KAAKmZ,2BAA2Bpb,EAAKtB,EAAgBoJ,GAAatL,WAAY,eAAgByF,MAAMxF,KAAKwF,KAAMyC,EAASC,EAAOI,MAE3I,CACChN,IAAK,iBACLI,MAAO,SAAwB2M,EAAxB,GACH,IAAIC,EAA2B,EAAnBhB,UAAUrH,aAA+BuE,IADlD,EAAA,EAC6E,GAChF,IAAKgB,KAAKiZ,mBAAoB,OAAOlb,EAAKtB,EAAgBoJ,GAAatL,WAAY,iBAAkByF,MAAMxF,KAAKwF,KAAM6C,EAAIC,GAC1H,IAAI2W,EAAsB3W,EAAM1B,MAAQ0B,EAAMa,iBAAmBb,EAAMa,iBAAiBtB,OAASrC,KAAKqC,OAClGqX,EAAgC1Z,KAAK2Z,0BAA0BF,GACnEzZ,KAAKqC,OAASrC,KAAKmZ,2BAA2BnZ,KAAK9J,OACnD,IAAI0jB,EAAgB7b,EAAKtB,EAAgBoJ,GAAatL,WAAY,iBAAkByF,MAAMxF,KAAKwF,KAAM6C,EAAIC,GACzG9C,KAAKqC,OAASrC,KAAK6Z,2BAA2B7Z,KAAKqC,QACnD,IAAIyX,EAAkBhX,EAAM1B,MAAQ0B,EAAMa,iBAAmBb,EAAMa,iBAAiBtB,OAASrC,KAAKqC,OAC9F0X,EAA4B/Z,KAAK2Z,0BAA0BG,GAG/D,OAFAF,EAAc1Y,YAAc6Y,EAA4BL,GAAiC1Z,KAAKiZ,mBAAmBxe,OACjHmf,EAAc5Y,MAAQ4Y,EAAc7Y,aAAe8B,IAAO7C,KAAKiZ,mBACxDW,IAEZ,CACC9jB,IAAK,uBACLI,MAAO,SAA8BuL,GACjC,GAAIzB,KAAKiZ,mBAAoB,CACzB,IAAIe,EAAavY,EAAMzB,KAAKiZ,mBAAmBxe,OAAS,EACpDwf,EAAeja,KAAK9J,MAAMH,QAAQiK,KAAKiZ,mBAAoBe,GAC/D,GAAIC,GAAgBxY,EAAK,OAAOwY,EAEpC,OAAQ,IAEb,CACCnkB,IAAK,6BACLI,MAAO,SAAoCwL,EAAMuO,GAC7C,IAAIiK,EAAyBla,KAAKma,qBAAqBzY,GACzB,GAA1BwY,IAA6BxY,EAAOwY,GACxC,IAAIE,EAAuBpa,KAAKma,qBAAqBlK,GAErD,OAD4B,GAAxBmK,IAA2BnK,EAAKmK,EAAuBpa,KAAKiZ,mBAAmBxe,QAC5E,CAACiH,EAAMuO,KAEnB,CACCna,IAAK,SACLI,MAAO,SAAA,EAAA,GACH,IAAIuM,EAA6B,EAAnBX,UAAUrH,aAA+BuE,IADpD,EAAA,EAC+E,EAC9E0D,EAA2B,EAAnBZ,UAAUrH,aAA+BuE,IAFlD,EAAA,EAE6EgB,KAAK9J,MAAMuE,OAEvF4f,EAAyB7b,EADAwB,KAAKwZ,2BAA2B/W,EAASC,GACF,GACpED,EAAU4X,EAAuB,GACjC3X,EAAQ2X,EAAuB,GAC3BC,EAAiBta,KAAK9J,MAAM0K,MAAM,EAAG6B,GACrC8X,EAAgBva,KAAK9J,MAAM0K,MAAM8B,GACjCgX,EAAgC1Z,KAAKsZ,iBAAiBgB,EAAe7f,QACzEuF,KAAKqC,OAASrC,KAAK6Z,2BAA2B7Z,KAAKmZ,2BAA2BmB,EAAiBC,IAC/F,IAAIR,EAA4B/Z,KAAK2Z,0BAA0BW,GAC/D,OAAO,IAAIzZ,EAAc,CACrBK,WAAY6Y,EAA4BL,GAAiC1Z,KAAKiZ,mBAAmBxe,WAG1G,CACC3E,IAAK,kBACLI,MAAO,SAAyB+J,EAAWmH,GACvC,IAAKpH,KAAKiZ,mBAAoB,OAAOhZ,EACrC,OAAQmH,GACJ,KAAKzH,EACL,KAAKA,EACL,KAAKA,EAEG,IAAI6a,EAAqBxa,KAAKma,qBAAqBla,EAAY,GAC/D,GAA0B,GAAtBua,EAAyB,CACzB,IAAIC,EAAwBD,EAAqBxa,KAAKiZ,mBAAmBxe,OACzE,GAAIwF,EAAYwa,GAAyBza,KAAK9J,MAAMuE,QAAUggB,GAAyBrT,IAAczH,EACjG,OAAO6a,EAGf,MAER,KAAK7a,EACL,KAAKA,EAEG,IAAI+a,EAAsB1a,KAAKma,qBAAqBla,GACpD,GAA2B,GAAvBya,EACA,OAAOA,EAAsB1a,KAAKiZ,mBAAmBxe,OAIrE,OAAOwF,IAEZ,CACCnK,IAAK,aACLI,MAAO,SAAoB4M,GACvB,IAGQ6X,EAFJC,GADS9X,EAAMP,MAAQvC,KAAK4Y,mBAAqB5Y,KAAK6Y,eACvCgC,KAAK7a,KAAKmZ,2BAA2BnZ,KAAK9J,QAO7D,OANI0kB,IACID,EAAS3a,KAAK2a,OAClBC,EAAQA,IAAU3iB,MAAM0iB,KACR,MAAZ3a,KAAKD,KAA2B,GAAZC,KAAKD,KAAYC,KAAKD,KAAOC,KAAK2a,UAC1C,MAAZ3a,KAAKO,KAAeP,KAAKO,KAAO,GAAKP,KAAK2a,QAAU3a,KAAKO,MAE1Dqa,GAAS7c,EAAKtB,EAAgBoJ,GAAatL,WAAY,aAAcyF,MAAMxF,KAAKwF,KAAM8C,KAElG,CACChN,IAAK,WACLI,MAAO,WACH,IACQykB,EACAG,EAIAC,EANJ/a,KAAK9J,QAED4kB,EADAH,EAAS3a,KAAK2a,OAEF,MAAZ3a,KAAKD,MAAa+a,EAAWzhB,KAAKkH,IAAIua,EAAU9a,KAAKD,MACzC,MAAZC,KAAKO,MAAaua,EAAWzhB,KAAK0G,IAAI+a,EAAU9a,KAAKO,MACrDua,IAAaH,IAAQ3a,KAAK0H,cAAgBjI,OAAOqb,IACjDC,EAAY/a,KAAK9J,MACjB8J,KAAKgb,iBAAgBD,EAAY/a,KAAKib,gBAAgBF,IACtD/a,KAAKkb,qBAAoBH,EAAY/a,KAAKmb,oBAAoBJ,IAClE/a,KAAKqC,OAAS0Y,GAElBhd,EAAKtB,EAAgBoJ,GAAatL,WAAY,WAAYyF,MAAMxF,KAAKwF,QAE1E,CACClK,IAAK,kBACLI,MAAO,SAAyBA,GAC5B,IAAIgjB,EAAQlZ,KAAKmZ,2BAA2BjjB,GAAOqc,MAAMvS,KAAK2Y,OAS9D,OARAO,EAAM,GAAKA,EAAM,GAAGrZ,QAAQ,kBAAmB,SAAS8Q,EAAOyK,EAAMC,EAAOxK,GACxE,OAAOuK,EAAOvK,IAEd3a,EAAMuE,SAAW,MAAMogB,KAAK3B,EAAM,MAAKA,EAAM,GAAKA,EAAM,GAAK,KAC9C,EAAfA,EAAMze,SACNye,EAAM,GAAKA,EAAM,GAAGrZ,QAAQ,MAAO,IAC9BqZ,EAAM,GAAGze,SAAQye,EAAMze,OAAS,IAElCuF,KAAK6Z,2BAA2BX,EAAM/Q,KAAKnI,KAAK2Y,UAE5D,CACC7iB,IAAK,sBACLI,MAAO,SAA6BA,GAChC,IAAKA,EAAO,OAAOA,EACnB,IAAIgjB,EAAQhjB,EAAMqc,MAAMvS,KAAK2Y,OAG7B,OAFIO,EAAMze,OAAS,GAAGye,EAAM/iB,KAAK,IACjC+iB,EAAM,GAAKA,EAAM,GAAGpI,OAAO9Q,KAAK0Y,MAAO,KAChCQ,EAAM/Q,KAAKnI,KAAK2Y,SAE5B,CACC7iB,IAAK,gBACLE,IAAK,WACD,OAAOgK,KAAKmZ,2BAA2BnZ,KAAKib,gBAAgBjb,KAAK9J,QAAQ2J,QAAQG,KAAK2Y,MAAO,MAEjG1iB,IAAK,SAAayR,GACdrJ,EAAK5B,EAAgBoJ,GAAatL,WAAY,gBAAiBmN,EAAc7H,QAAQ,IAAKG,KAAK2Y,OAAQ3Y,MAAM,KAElH,CACClK,IAAK,aACLE,IAAK,WACD,OAAO4P,OAAO5F,KAAK0H,gBAEvBzR,IAAK,SAAaqlB,GACdjd,EAAK5B,EAAgBoJ,GAAatL,WAAY,gBAAiBkF,OAAO6b,GAAItb,MAAM,KAErF,CACClK,IAAK,SACLE,IAAK,WACD,OAAOgK,KAAKqS,YAEhBpc,IAAK,SAAa0kB,GACd3a,KAAKqS,WAAasI,IAEvB,CACC7kB,IAAK,gBACLE,IAAK,WACD,OAAOgK,KAAKub,QAAsB,MAAZvb,KAAKD,KAAeC,KAAKD,IAAM,GAAiB,MAAZC,KAAKO,KAAeP,KAAKO,IAAM,MAG1FsF,IA9OP,SAASA,GAAa7D,GAElB,OADA5G,EAAgB4E,KAAM6F,IACftI,EAA2ByC,KAAMvD,EAAgBoJ,IAAcrL,KAAKwF,KAAMjG,OAAO/C,OAAO,GAAI6O,GAAaT,SAAU,GAAIpD,KA8O1I6D,GAAaT,SAAW,CACpBuT,MAAO,IACPM,mBAAoB,GACpBF,WAAY,CAAC,KACbL,MAAO,EACP6C,QAAQ,EACRP,gBAAgB,EAChBE,oBAAoB,GAExBnZ,EAAM8D,aAAeA,GAErB,IAAIG,IAEI5J,EAAU4J,GAcZ9D,GAREjG,EAAa+J,GAAgB,CAAC,CAC1BlQ,IAAK,UACLI,MAAO,SAAiB8L,GAChBA,EAAKsD,OAAMtD,EAAKqC,SAAWrC,EAAKsD,MACpCvH,EAAKtB,EAAgBuJ,GAAezL,WAAY,UAAWyF,MAAMxF,KAAKwF,KAAMgC,OAG7EgE,IAXP,SAASA,KAEL,OADA5K,EAAgB4E,KAAMgG,IACfzI,EAA2ByC,KAAMvD,EAAgBuJ,IAAgBiB,MAAMjH,KAAM8B,YAWhGC,EAAMiE,eAAiBA,GAEvB,IAAIF,IAEI1J,EAAU0J,GA6MZ5D,GApMEjG,EAAa6J,GAAe,CAAC,CACzBhQ,IAAK,UACLI,MAAO,SAAiB8L,GACpBjE,EAAKtB,EAAgBqJ,GAAcvL,WAAY,UAAWyF,MAAMxF,KAAKwF,KAAMgC,GACvE,SAAUA,IACVhC,KAAKwb,cAAgBlhB,MAAMmE,QAAQuD,EAAKsD,MAAQtD,EAAKsD,KAAK7P,IAC/C0Q,GACN,MAGd,CACCrQ,IAAK,iBACLI,MAAO,WACH,IAEQulB,EAFJ3a,EAAUd,KAAK0b,eAAezU,MAAMjH,KAAM8B,WAK9C,OAJI9B,KAAK2b,aAEL7a,EAAQS,WAAWka,EAAoBzb,KAAK2b,aAAa9X,YAAYoD,MAAMwU,EAAmB3Z,YAE3FhB,IAEZ,CACChL,IAAK,iBACLI,MAAO,SAAA,EAAA,GACH,IAcY8b,EAdR7O,EAA8B,EAAnBrB,UAAUrH,aAA+BuE,IADrD,EAAA,EACgF,GAC/E8D,EAA2B,EAAnBhB,UAAUrH,aAA+BuE,IAFlD,EAAA,EAE6E,GAC5E4c,EAAsB9Y,EAAM1B,MAAkC,MAA1B0B,EAAMa,iBAA2Bb,EAAMa,iBAAiBtB,OAASrC,KAAK9J,MAC1G2lB,EAAa7b,KAAKiE,cAClB6X,EAAchZ,EAAM1B,MAAkC,MAA1B0B,EAAMa,iBAClCb,EAAMa,iBAAiBoY,eAAiBF,EACxCG,EAAYH,EAAWjb,MAAMkb,EAAYrhB,QACzCwhB,EAAWjc,KAAK2b,YAChB7a,EAAU,IAAID,EACdqb,EAAgBD,GAAYA,EAASpa,MAmBzC,OAlBA7B,KAAK2b,YAAc3b,KAAKmc,WAAWhZ,EAAUpJ,OAAO/C,OAAO,GAAI8L,IAC3D9C,KAAK2b,cACD3b,KAAK2b,cAAgBM,GACrBjc,KAAK2b,YAAYrZ,QACb0P,EAAIhS,KAAK2b,YAAYra,OAAOwa,EAAa,CACzC3W,KAAK,IAETrE,EAAQI,UAAY8Q,EAAE/Q,SAASxG,OAASmhB,EAAoBnhB,OACxDuhB,IACAlb,EAAQI,WAAalB,KAAK2b,YAAYra,OAAO0a,EAAW,CACpD7W,KAAK,EACL/D,MAAM,IACPF,YAGPlB,KAAK2b,YAAY9Z,MAAQqa,GAG1Bpb,IAEZ,CACChL,IAAK,qBACLI,MAAO,WACH,IAAI4K,EAAUd,KAAK0b,eAAezU,MAAMjH,KAAM8B,WAI9C,OAHI9B,KAAK2b,aACL7a,EAAQS,UAAUvB,KAAK2b,YAAYna,sBAEhCV,IAEZ,CACChL,IAAK,aACLI,MAAO,SAAoBiN,EAApB,GACH,IAAIL,EAA2B,EAAnBhB,UAAUrH,aAA+BuE,IADlD,EAAA,EAC6E,GAChF,OAAOgB,KAAKoc,SAASjZ,EAAUnD,KAAM8C,KAE1C,CACChN,IAAK,aACLI,MAAO,WAEH,IADA,IAAImb,EAAOgL,EACF7K,EAAO1P,UAAUrH,OAAQoR,EAAO,IAAIvR,MAAMkX,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC7E5F,EAAK4F,GAAQ3P,UAAU2P,GAE3B,OAAQJ,EAAQtT,EAAKtB,EAAgBqJ,GAAcvL,WAAY,aAAcyF,OAAOxF,KAAKyM,MAAMoK,EAAO,CAACrR,MAAM0R,OAAO7F,OAAY7L,KAAK2b,cAAgBU,EAAqBrc,KAAK2b,aAAapY,WAAW0D,MAAMoV,EAAoBxQ,MAEtO,CACC/V,IAAK,QACLI,MAAO,WACC8J,KAAK2b,aAAa3b,KAAK2b,YAAYrZ,QACvCtC,KAAKwb,cAAcriB,QAAQ,SAAS2Y,GAChC,OAAOA,EAAExP,YAGlB,CACCxM,IAAK,SACLI,MAAO,WACH,IAEQomB,EAFJxb,EAAU,IAAID,EAMlB,OALIb,KAAK2b,aAEL7a,EAAQS,WAAW+a,EAAqBtc,KAAK2b,aAAa5W,OAAOkC,MAAMqV,EAAoBxa,YACtFP,UAAUvB,KAAK0b,kBAEjB5a,IAEZ,CACChL,IAAK,eACLI,MAAO,WACH,IAAIqmB,EACJ,OAAOvc,KAAK2b,aAAeY,EAAqBvc,KAAK2b,aAAahZ,aAAasE,MAAMsV,EAAoBza,WAAa,KAE3H,CACChM,IAAK,cACLI,MAAO,WAEH,IADA,IAAIsmB,EAAoBC,EACfC,EAAQ5a,UAAUrH,OAAQoR,EAAO,IAAIvR,MAAMoiB,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAClF9Q,EAAK8Q,GAAS7a,UAAU6a,GAE5B,OAAO3c,KAAK2b,aAAea,EAAqBxc,KAAK2b,aAAa9W,YAAYoC,MAAMuV,EAAoB3Q,IAAS4Q,EAAQ1e,EAAKtB,EAAgBqJ,GAAcvL,WAAY,cAAeyF,OAAOxF,KAAKyM,MAAMwV,EAAO,CAACzc,MAAM0R,OAAO7F,MAEnO,CACC/V,IAAK,WACLI,MAAO,WACC8J,KAAK2b,aAAa3b,KAAK2b,YAAYnZ,WACvCzE,EAAKtB,EAAgBqJ,GAAcvL,WAAY,WAAYyF,MAAMxF,KAAKwF,QAE3E,CACClK,IAAK,kBACLI,MAAO,WAEH,IADA,IAAI0mB,EAAoBC,EACfC,EAAQhb,UAAUrH,OAAQoR,EAAO,IAAIvR,MAAMwiB,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAClFlR,EAAKkR,GAASjb,UAAUib,GAE5B,OAAO/c,KAAK2b,aAAeiB,EAAqB5c,KAAK2b,aAAa7W,gBAAgBmC,MAAM2V,EAAoB/Q,IAASgR,EAAQ9e,EAAKtB,EAAgBqJ,GAAcvL,WAAY,kBAAmByF,OAAOxF,KAAKyM,MAAM4V,EAAO,CAAC7c,MAAM0R,OAAO7F,MAE3O,CACC/V,IAAK,QACLE,IAAK,WACD,OAAOgK,KAAK2b,YAAc3b,KAAK2b,YAAYzlB,MAAQ,IAEvDD,IAAK,SAAaC,GACdmI,EAAK5B,EAAgBqJ,GAAcvL,WAAY,QAASrE,EAAO8J,MAAM,KAE1E,CACClK,IAAK,gBACLE,IAAK,WACD,OAAOgK,KAAK2b,YAAc3b,KAAK2b,YAAYjU,cAAgB,IAE/DzR,IAAK,SAAayR,GACdrJ,EAAK5B,EAAgBqJ,GAAcvL,WAAY,gBAAiBmN,EAAe1H,MAAM,KAE1F,CACClK,IAAK,aACLE,IAAK,WACD,OAAOgK,KAAK2b,YAAc3b,KAAK2b,YAAYtJ,WAAa,IAE5Dpc,IAAK,SAAaC,GACd,IAAIwR,EAAgBjI,OAAOvJ,GACvB8J,KAAK2b,cACL3b,KAAK2b,YAAYtJ,WAAanc,EAC9BwR,EAAgB1H,KAAK2b,YAAYjU,eAErC1H,KAAK0H,cAAgBA,IAE1B,CACC5R,IAAK,aACLE,IAAK,WACD,QAASgK,KAAK2b,aAAe3b,KAAK2b,YAAYpU,aAEnD,CACCzR,IAAK,QACLE,IAAK,WACD,OAAO+D,OAAO/C,OAAO,GAAI+G,EAAKtB,EAAgBqJ,GAAcvL,WAAY,QAASyF,MAAO,CACpF+b,eAAgB/b,KAAKiE,cACrBuX,cAAexb,KAAKwb,cAAc/lB,IAAI,SAASqc,GAC3C,OAAOA,EAAEjQ,QAEbmb,eAAgBhd,KAAK2b,YACrBA,YAAa3b,KAAK2b,aAAe3b,KAAK2b,YAAY9Z,SAG1D5L,IAAK,SAAa4L,GACd,IAAI2Z,EAAgB3Z,EAAM2Z,cACtBwB,EAAiBnb,EAAMmb,eACvBrB,EAAc9Z,EAAM8Z,YACpB/L,EAAc7S,EAAyB8E,EAAO,CAAC,gBAAiB,iBAAkB,gBACtF7B,KAAKwb,cAAcriB,QAAQ,SAAS2Y,EAAGmL,GACnC,OAAOnL,EAAEjQ,MAAQ2Z,EAAcyB,KAEb,MAAlBD,IACAhd,KAAK2b,YAAcqB,EACnBhd,KAAK2b,YAAY9Z,MAAQ8Z,GAE7Btd,EAAK5B,EAAgBqJ,GAAcvL,WAAY,QAASqV,EAAa5P,MAAM,KAEhF,CACClK,IAAK,YACLE,IAAK,WACD,OAAOgK,KAAK2b,YAAc3b,KAAK2b,YAAYnY,UAAYzF,EAAKtB,EAAgBqJ,GAAcvL,WAAY,YAAayF,OAEvH/J,IAAK,WACDgQ,QAAQC,KAAK,wFAGdJ,IA1MP,SAASA,GAAc9D,GACnB,IAAIwH,EAIJ,OAHApO,EAAgB4E,KAAM8F,KACtB0D,EAAQjM,EAA2ByC,KAAMvD,EAAgBqJ,IAAetL,KAAKwF,KAAMjG,OAAO/C,OAAO,GAAI8O,GAAcV,SAAU,GAAIpD,MAC3H2Z,YAAc,KACbnS,EAuMnB1D,GAAcV,SAAW,CACrBgX,SAAU,SAAkBjZ,EAAU9B,EAAQyB,GAC1C,GAAKzB,EAAOma,cAAc/gB,OAA1B,CACA,IAAIohB,EAAaxa,EAAO4C,cACpBiZ,EAAS7b,EAAOma,cAAc/lB,IAAI,SAASqc,EAAGxb,GAO9C,OANAwb,EAAExP,QACFwP,EAAExQ,OAAOua,EAAY,CACjB1W,KAAK,IAET2M,EAAExQ,OAAO6B,EAAUL,GAEZ,CACHqa,OAFSrL,EAAE7N,cAAcxJ,OAGzBnE,MAAOA,KAMf,OAHA4mB,EAAOhT,KAAK,SAASkT,EAAIC,GACrB,OAAOA,EAAGF,OAASC,EAAGD,SAEnB9b,EAAOma,cAAc0B,EAAO,GAAG5mB,UAG9CyL,EAAM+D,cAAgBA,GAEtB,IAAIwX,GAAY,CACZC,OAAQ,QACRC,SAAU,gBACVC,MAAO,cAGX,SAASC,GAAWpY,GAChB,IAAI5D,EAA0B,EAAnBI,UAAUrH,aAA+BuE,IAAjB8C,UAAU,GAAmBA,UAAU,GAAKwb,GAAUC,OACrFtN,EAAwB,EAAnBnO,UAAUrH,aAA+BuE,IAAjB8C,UAAU,GAAmBA,UAAU,GAAKwb,GAAUC,OACnFlc,EAAS8E,EAAWb,GACxB,OAAO,SAASpP,GACZ,OAAOmL,EAAOsc,YAAY,SAAS7L,GAE/B,OADAA,EAAEpQ,GAAQxL,EACH4b,EAAE7B,MAWrBlO,EAAMub,UAAYA,GAClBvb,EAAM2b,WAAaA,GACnB3b,EAAM6b,KARN,SAAc1nB,GACV,IAAK,IAAIsb,EAAO1P,UAAUrH,OAAQojB,EAAW,IAAIvjB,MAAa,EAAPkX,EAAWA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IACpGoM,EAASpM,EAAO,GAAK3P,UAAU2P,GAEnC,OAAOiM,GAAWzW,WAAM,EAAQ4W,EAAzBH,CAAmCxnB,IAM9C,IACI4nB,WAAW/b,MAAQA,EACrB,MAAOnL,IAEa,GAAGgK,MAAMpG,KAAK1D,SAASgE,iBAAiB,gBAC9CrF,IAAI,SAASsoB,GACzB,OAAO,IAAIhc,EAAMgc,EAAQ,CACrBzY,KAAMyY,EAAOC,QAAQ1Y,KACrBuB,KAAyC,SAAnCkX,EAAOC,QAAQ,oBAI7B,IAAIC,GAAY,2CACZC,GAAYpnB,SAASgE,iBAAiBmjB,IACtCE,QAAgBnf,EACpBkf,GAAU/kB,QAAQ,SAASilB,GACvBA,EAASjkB,iBAAiB,YAAa,SAASvD,GAC5CA,EAAEihB,kBACEjhB,EAAE6E,OAAOuiB,QAAQK,UAA0C,aAA9BznB,EAAE6E,OAAOuiB,QAAQK,WAC9CF,GAAgBvnB,EAAEunB,iBAG1BC,EAASjkB,iBAAiB,mBAAoB,SAASvD,GACnDA,EAAEihB,kBACF,IAAIvT,EAAS6Z,GAAgBA,GAAcG,cAAcC,QAAQN,SAAajf,EAC1EsF,GAAUA,IAAW8Z,GACrBxnB,EAAEghB,iBAENuG,QAAgBnf,MAKK,GAAG4B,MAAMpG,KAAK1D,SAASgE,iBAAiB,+BAC9CrF,IAAI,SAAS+oB,GAC5B,IAAIC,EACApkB,EAAU,CACVqkB,MAAO,CACHC,KAAM,GACNC,KAAM,IAEVC,MAAM,EACNC,UAA4F,QAAhFL,EAAwBD,EAAiBO,aAAa,4BAA4D,IAA1BN,EAAmCA,EAAwB,QAEnK,OAAO,IAAIO,UAAUC,QAAQT,EAAkBnkB,KAE1B,GAAGuG,MAAMpG,KAAK1D,SAASgE,iBAAiB,+BAC9CrF,IAAI,SAASypB,GAC5B,IAAIC,EAAuBC,EACvB/kB,EAAU,CACVqkB,MAAO,CACHC,KAAM,GACNC,KAAM,IAEVC,KAAkF,QAA3EM,EAAwBD,EAAiBH,aAAa,uBAAuD,IAA1BI,GAAmCA,EAC7HL,UAA6F,QAAjFM,EAAyBF,EAAiBH,aAAa,4BAA6D,IAA3BK,EAAoCA,EAAyB,QAEtK,OAAO,IAAIJ,UAAUK,QAAQH,EAAkB7kB,KAEzB,GAAGuG,MAAMpG,KAAK1D,SAASgE,iBAAiB,gCAC9CrF,IAAI,SAAS6pB,GAC7B,OAAO,IAAIN,UAAUO,SAASD,KAER,GAAG1e,MAAMpG,KAAK1D,SAASgE,iBAAiB,mCAC9CrF,IAAI,SAAS+pB,GAC7BA,EAAgBrlB,iBAAiB,QAAS,SAASvD,GAC/CA,EAAEihB,kBACF2H,EAAgBC,UAAUC,OAAO"}